/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={351:e=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=51)}([function(e,t,n){"use strict";(function(e){var r=n(3),i=function(){var t,n;function i(e,t){return("000"+e).slice(-2-(t||0))}"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope||e.console&&e.console.log&&"function"==typeof e.console.log.apply?(t=function(){console.log.apply(console,arguments)},n=console.warn?function(){console.warn.apply(console,arguments)}:t):t=n=e.console&&e.console.log?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){};var o=1;function a(e){return r.a.logTimestamps?function(t){var n=new Date;e(i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+"."+i(n.getMilliseconds(),!0)+" "+t)}:e}var s=a(t),c=a(n);function u(e){}return u.LOG_NONE=0,u.LOG_ERROR=1,u.LOG_MAJOR=2,u.LOG_MINOR=3,u.LOG_MICRO=4,u.LOG_DEFAULT=1,u.LOG_DEBUG=4,u.logAction=function(e,t,n){u.shouldLog(e)&&(1===e?c:s)("Ably: "+t+": "+n)},u.deprecated=function(e,t){u.deprecatedWithMsg(e,"Please use '"+t+"' instead.")},u.deprecatedWithMsg=function(e,t){u.shouldLog(1)&&c("Ably: Deprecation warning - '"+e+"' is deprecated and will be removed from a future version. "+t)},u.shouldLog=function(e){return e<=o},u.setLog=function(e,t){void 0!==e&&(o=e),void 0!==t&&(s=c=t)},u}();t.a=i}).call(this,n(17))},function(e,t,n){"use strict";var r=n(3),i=n(4),o=n(5),a=Object.prototype.hasOwnProperty,s=function(){var e=r.a.msgpack;function t(){}function n(e){return Math.floor(Math.random()*e.length)}t.mixin=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(!n)break;for(var r in n)a.call(n,r)&&(e[r]=n[r])}return e},t.copy=function(e){return t.mixin({},e)},t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=function(e){return t.isEmptyArg(e)?[]:t.isArray(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var n in e)if(n!==t)return!1;return!0},t.isEmptyArg=function(e){return null==e},t.shallowClone=function(e){var t=new Object;for(var n in e)t[n]=e[n];return t},t.prototypicalClone=function(e,n){function r(){}r.prototype=e;var i=new r;return n&&t.mixin(i,n),i},t.inherits=r.a.inherits||function(e,n){e.super_=n,e.prototype=t.prototypicalClone(n.prototype,{constructor:e})},t.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},t.intersect=function(e,n){return t.isArray(n)?t.arrIntersect(e,n):t.arrIntersectOb(e,n)},t.arrIntersect=function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];-1!=t.arrIndexOf(n,o)&&r.push(o)}return r},t.arrIntersectOb=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i in t&&n.push(i)}return n},t.arrSubtract=function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];-1==t.arrIndexOf(n,o)&&r.push(o)}return r},t.arrIndexOf=Array.prototype.indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){n=n||0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.arrIn=function(e,n){return-1!==t.arrIndexOf(e,n)},t.arrDeleteValue=function(e,n){var r=t.arrIndexOf(e,n),i=-1!=r;return i&&e.splice(r,1),i},t.arrWithoutValue=function(e,n){var r=e.slice();return t.arrDeleteValue(r,n),r},t.keysArray=function(e,t){var n=[];for(var r in e)t&&!a.call(e,r)||n.push(r);return n},t.valuesArray=function(e,t){var n=[];for(var r in e)t&&!a.call(e,r)||n.push(e[r]);return n},t.forInOwnNonNullProps=function(e,t){for(var n in e)a.call(e,n)&&e[n]&&t(n)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},t.safeArrForEach=function(e,n){return t.arrForEach(e.slice(),n)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)n.push(t(e[i],i,e));return n},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)t(e[i])&&n.push(e[i]);return n},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(!t(e[r],r,e))return!1;return!0},t.allSame=function(e,n){if(0===e.length)return!0;var r=e[0][n];return t.arrEvery(e,(function(e){return e[n]===r}))},t.nextTick=r.a.nextTick;var s={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};return t.defaultGetHeaders=function(e){return{accept:s[e||"json"],"X-Ably-Version":i.a.apiVersion,"Ably-Agent":i.a.agent}},t.defaultPostHeaders=function(e){var t;return{accept:t=s[e||"json"],"content-type":t,"X-Ably-Version":i.a.apiVersion,"Ably-Agent":i.a.agent}},t.arrPopRandomElement=function(e){return e.splice(n(e),1)[0]},t.toQueryString=function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,n=/([^?&=]+)=?([^&]*)/g,r={};t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r},t.now=Date.now||function(){return(new Date).getTime()},t.inspect=r.a.inspect,t.isErrorInfo=function(e){return"ErrorInfo"==e.constructor.name},t.inspectError=function(e){return e&&(t.isErrorInfo(e)||"Error"==e.constructor.name||e instanceof Error)?e.toString():t.inspect(e)},t.inspectBody=function(e){return o.a.isBuffer(e)?e.toString():"string"==typeof e?e:r.a.inspect(e)},t.dataSizeBytes=function(e){if(o.a.isBuffer(e))return o.a.byteLength(e);if("string"==typeof e)return r.a.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=r.a.getRandomValues&&"undefined"!=typeof Uint8Array?function(e){var t=new Uint8Array(e);return r.a.getRandomValues(t),o.a.base64Encode(t)}:function(e){for(var t=o.a.base64CharSet,r=Math.round(4*e/3),i="",a=0;a<r;a++)i+=t[n(t)];return i},t.randomHexString=r.a.getRandomValues&&"undefined"!=typeof Uint8Array?function(e){var t=new Uint8Array(e);return r.a.getRandomValues(t),o.a.hexEncode(t)}:function(e){for(var t=o.a.hexCharSet,r=2*e,i="",a=0;a<r;a++)i+=t[n(t)];return i},t.arrChooseN=function(e,n){for(var r=Math.min(n,e.length),i=e.slice(),o=[],a=0;a<r;a++)o.push(t.arrPopRandomElement(i));return o},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,n){return new Promise((function(r,i){e[t].apply(e,Array.prototype.slice.call(n).concat((function(e,t){e?i(e):r(t)})))}))},t.decodeBody=function(t,n){return"msgpack"==n?e.decode(t):JSON.parse(String(t))},t.encodeBody=function(t,n){return"msgpack"==n?e.encode(t,!0):JSON.stringify(t)},t.allToLowerCase=function(e){return t.arrMap(e,(function(e){return e&&e.toLowerCase()}))},t.allToUpperCase=function(e){return t.arrMap(e,(function(e){return e&&e.toUpperCase()}))},t}();t.a=s},function(e,t,n){"use strict";var r=n(1),i=function(){function e(e,t,n,r){this.message=e,this.code=t,this.statusCode=n,this.cause=r,this.href=void 0}return e.prototype.toString=function(){var e="["+this.constructor.name;return this.message&&(e+=": "+this.message),this.statusCode&&(e+="; statusCode="+this.statusCode),this.code&&(e+="; code="+this.code),this.cause&&(e+="; cause="+r.a.inspectError(this.cause)),!this.href||this.message&&this.message.indexOf("help.ably.io")>-1||(e+="; see "+this.href+" "),e+"]"},e.fromValues=function(t){var n=r.a.mixin(new e,t);return t instanceof Error&&(n.message=t.message),n.code&&!n.href&&(n.href="https://help.ably.io/error/"+n.code),n},e}();t.a=i},function(e,t,n){"use strict";(function(e,r){var i=n(24);"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var o,a=e.navigator&&e.navigator.userAgent.toString(),s={agent:"browser",logTimestamps:!0,userAgent:a,currentUrl:e.location&&e.location.href,noUpgrade:a&&a.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:e.WebSocket||e.MozWebSocket,xhrSupported:e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!=typeof document,allowComet:(o=e.location,!e.WebSocket||!o||!o.origin||o.origin.indexOf("http")>-1),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:i.a,supportsBinary:!!e.TextDecoder,preferBinary:!1,ArrayBuffer:e.ArrayBuffer,atob:e.atob,nextTick:void 0!==r?e.setImmediate.bind(e):function(e){setTimeout(e,0)},addEventListener:e.addEventListener,inspect:JSON.stringify,stringByteSize:function(t){return e.TextDecoder&&(new e.TextEncoder).encode(t).length||t.length},TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,Promise:e.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,n){e.getRandomValues(t),n&&n(null)}}(e.crypto||e.msCrypto)};t.a=s}).call(this,n(17),n(43).setImmediate)},function(e,t,n){"use strict";var r=n(3),i={internetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:["xhr_polling","xhr_streaming","jsonp","web_socket"],baseTransportOrder:["xhr_polling","xhr_streaming","jsonp","web_socket"],transportPreferenceOrder:["jsonp","xhr_polling","xhr_streaming","web_socket"],upgradeTransports:["xhr_streaming","web_socket"]};r.a.noUpgrade&&(i.upgradeTransports=[]);var o=i,a=n(1),s=n(5),c=n(0),u=n(2),l=n(38);o.ENVIRONMENT="",o.REST_HOST="rest.ably.io",o.REALTIME_HOST="realtime.ably.io",o.FALLBACK_HOSTS=["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],o.PORT=80,o.TLS_PORT=443,o.TIMEOUTS={disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},o.httpMaxRetryCount=3,o.maxMessageSize=65536,o.errorReportingUrl="https://errors.ably.io/api/15/store/",o.errorReportingHeaders={"X-Sentry-Auth":"Sentry sentry_version=7, sentry_key=a04e33c8674c451f8a310fbec029acf5, sentry_client=ably-js/0.1","Content-Type":"application/json"},o.version=l.a,o.apiVersion="1.2";var f="ably-js/"+o.version;function d(e){if("string"!=typeof e)throw new u.a("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new u.a("host must not be zero-length",4e4,400)}r.a.agent&&(f+=" "+r.a.agent),o.agent=f,o.getHost=function(e,t,n){return n?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost},o.getPort=function(e,t){return t||e.tls?e.tlsPort:e.port},o.getHttpScheme=function(e){return e.tls?"https://":"http://"},o.environmentFallbackHosts=function(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]},o.getFallbackHosts=function(e){var t=e.fallbackHosts,n=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:o.httpMaxRetryCount;return t?a.a.arrChooseN(t,n):[]},o.getHosts=function(e){return[e.restHost].concat(o.getFallbackHosts(e))},o.objectifyOptions=function(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e},o.normaliseOptions=function(e){if(e.host&&(c.a.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(c.a.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(c.a.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw c.a.logAction(c.a.LOG_ERROR,"Defaults.normaliseOptions",t),new u.a(t,4e4,400)}if(e.port||e.tlsPort)throw t="fallbackHostsUseDefault cannot be set when port or tlsPort are set",c.a.logAction(c.a.LOG_ERROR,"Defaults.normaliseOptions",t),new u.a(t,4e4,400);e.environment?c.a.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):c.a.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),e.fallbackHosts=o.FALLBACK_HOSTS}!0===e.recover&&(c.a.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"==typeof e.recover&&!0===e.closeOnUnload&&(c.a.logAction(c.a.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=null),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),e.transports&&a.a.arrIn(e.transports,"xhr")&&(c.a.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),a.a.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);var n=e.environment&&String(e.environment).toLowerCase()||o.ENVIRONMENT,i=!n||"production"===n;for(var l in e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=i?o.FALLBACK_HOSTS:o.environmentFallbackHosts(n)),e.realtimeHost||(e.restHost?(c.a.logAction(c.a.LOG_WARN,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.realtimeHost=e.restHost):e.realtimeHost=i?o.REALTIME_HOST:n+"-"+o.REALTIME_HOST),e.restHost||(e.restHost=i?o.REST_HOST:n+"-"+o.REST_HOST),a.a.arrForEach((e.fallbackHosts||[]).concat(e.restHost,e.realtimeHost),d),e.port=e.port||o.PORT,e.tlsPort=e.tlsPort||o.TLS_PORT,e.maxMessageSize=e.maxMessageSize||o.maxMessageSize,"tls"in e||(e.tls=!0),e.timeouts={},o.TIMEOUTS)e.timeouts[l]=e[l]||o.TIMEOUTS[l];if(e.useBinaryProtocol="useBinaryProtocol"in e?r.a.supportsBinary&&e.useBinaryProtocol:r.a.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=s.a.base64Encode(s.a.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!r.a.Promise&&(c.a.logAction(c.a.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1),e.agents)for(var f in e.agents)o.agent+=" "+f+"/"+e.agents[f];return e},t.a=o},function(e,t,n){"use strict";var r=n(32),i=n(33),o=n(18),a=n(10),s=n.n(a),c=n(3),u=function(){var e=c.a.ArrayBuffer,t=c.a.atob,n=c.a.TextEncoder,a=c.a.TextDecoder,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(e){return null!=e&&void 0!==e.sigBytes}function f(t){return null!=t&&t.constructor===e}function d(t){return e&&e.isView&&e.isView(t)}function p(){}p.base64CharSet=u,p.hexCharSet="0123456789abcdef";var h=p.isBuffer=function(e){return f(e)||l(e)||d(e)},v=p.toBuffer=function(t){if(!e)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(f(t))return new Uint8Array(t);if(d(t))return new Uint8Array(t.buffer);if(l(t)){for(var n=new e(t.sigBytes),r=new Uint8Array(n),i=0;i<t.sigBytes;i++)r[i]=t.words[i>>>2]>>>24-i%4*8&255;return r}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")};return p.toArrayBuffer=function(e){return f(e)?e:v(e).buffer},p.toWordArray=function(e){return d(e)&&(e=e.buffer),l(e)?e:s.a.create(e)},p.base64Encode=function(e){return l(e)?Object(o.stringify)(e):function(e){for(var t,n="",r=u,i=e.byteLength,o=i%3,a=i-o,s=0;s<a;s+=3)n+=r[(16515072&(t=e[s]<<16|e[s+1]<<8|e[s+2]))>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];return 1==o?n+=r[(252&(t=e[a]))>>2]+r[(3&t)<<4]+"==":2==o&&(n+=r[(64512&(t=e[a]<<8|e[a+1]))>>10]+r[(1008&t)>>4]+r[(15&t)<<2]+"="),n}(v(e))},p.base64Decode=function(n){return e&&t?function(e){for(var n=t(e),r=n.length,i=new Uint8Array(r),o=0;o<r;o++){var a=n.charCodeAt(o);i[o]=a}return i.buffer}(n):Object(o.parse)(n)},p.hexEncode=function(e){return e=p.toWordArray(e),Object(r.stringify)(e)},p.hexDecode=function(t){var n=Object(r.parse)(t);return e?p.toArrayBuffer(n):n},p.utf8Encode=function(e){return n?(new n).encode(e).buffer:Object(i.parse)(e)},p.utf8Decode=function(e){if(!h(e))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return a&&!l(e)?(new a).decode(e):(e=p.toWordArray(e),Object(i.stringify)(e))},p.bufferCompare=function(e,t){if(!e)return-1;if(!t)return 1;e=p.toWordArray(e),t=p.toWordArray(t),e.clamp(),t.clamp();var n=e.sigBytes-t.sigBytes;if(0!=n)return n;e=e.words,t=t.words;for(var r=0;r<e.length;r++)if(0!=(n=e[r]-t[r]))return n;return 0},p.byteLength=function(e){return f(e)||d(e)?e.byteLength:l(e)?e.sigBytes:void 0},p.typedArrayToBuffer=function(e){return e.buffer},p}();t.a=u},function(e,t,n){"use strict";var r=n(1),i=n(4),o=function(){var e=function(){};function t(){}var n=Date.now||function(){return(new Date).getTime()};function o(e){var t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function a(e){var t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(i.a.getFallbackHosts(e.options)):i.a.getHosts(e.options)}return t._getHosts=a,t.methods=["get","delete","post","put","patch"],t.methodsWithoutBody=["get","delete"],t.methodsWithBody=r.a.arrSubtract(t.methods,t.methodsWithoutBody),r.a.arrForEach(t.methodsWithoutBody,(function(e){t[e]=function(n,r,i,o,a){t.do(e,n,r,i,null,o,a)},t[e+"Uri"]=function(n,r,i,o,a){t.doUri(e,n,r,i,null,o,a)}})),r.a.arrForEach(t.methodsWithBody,(function(e){t[e]=function(n,r,i,o,a,s){t.do(e,n,r,i,o,a,s)},t[e+"Uri"]=function(n,r,i,o,a,s){t.doUri(e,n,r,i,o,a,s)}})),t.do=function(r,i,s,c,u,l,f){f=f||e;var d="function"==typeof s?s:function(e){return i.baseUri(e)+s},p=(c&&c.accept,arguments),h=i._currentFallback;if(h){if(h.validUntil>n())return void t.Request(r,i,d(h.host),c,l,u,(function(e){if(e&&o(e))return i._currentFallback=null,void t.do.apply(t,p);f.apply(null,arguments)}));i._currentFallback=null}var v=a(i);if(1!=v.length){var m=function(e,a){var s=e.shift();t.doUri(r,i,d(s),c,u,l,(function(t){t&&o(t)&&e.length?m(e,!0):(a&&(i._currentFallback={host:s,validUntil:n()+i.options.timeouts.fallbackRetryTimeout}),f.apply(null,arguments))}))};m(v)}else t.doUri(r,i,d(v[0]),c,u,l,f)},t.doUri=function(e,n,r,i,o,a,s){t.Request(e,n,r,i,a,o,s)},t.supportsAuthHeaders=!1,t.supportsLinkHeaders=!1,t}();t.a=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(3),a=Object.prototype.hasOwnProperty,s=function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}function t(e,t,n){try{t.apply(e,n)}catch(e){i.a.logAction(i.a.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+e+"; stack = "+(e&&e.stack))}}function n(e,t,i){var o,s,c,u;for(u=0;u<e.length;u++)if(o=e[u],i&&(o=o[i]),r.a.isArray(o)){for(;-1!==(s=r.a.arrIndexOf(o,t));)o.splice(s,1);i&&0===o.length&&delete e[u][i]}else if(r.a.isObject(o))for(c in o)a.call(o,c)&&r.a.isArray(o[c])&&n([o],t,c)}return e.prototype.on=function(e,t){if(1==arguments.length&&"function"==typeof e)this.any.push(e);else if(r.a.isEmptyArg(e))this.any.push(t);else if(r.a.isArray(e)){var n=this;r.a.arrForEach(e,(function(e){n.on(e,t)}))}else{var i=this.events[e]||(this.events[e]=[]);i.push(t)}},e.prototype.off=function(e,t){if(0==arguments.length||r.a.isEmptyArg(e)&&r.a.isEmptyArg(t))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));if(1==arguments.length&&"function"==typeof e&&(t=e,e=null),t&&r.a.isEmptyArg(e))n([this.any,this.events,this.anyOnce,this.eventsOnce],t);else{if(r.a.isArray(e)){var i=this;r.a.arrForEach(e,(function(e){i.off(e,t)}))}t?n([this.events,this.eventsOnce],t,e):(delete this.events[e],delete this.eventsOnce[e])}},e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},e.prototype.emit=function(e){var n=Array.prototype.slice.call(arguments,1),i={event:e},o=[];this.anyOnce.length&&(Array.prototype.push.apply(o,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(o,this.any);var a=this.eventsOnce[e];a&&(Array.prototype.push.apply(o,a),delete this.eventsOnce[e]);var s=this.events[e];s&&Array.prototype.push.apply(o,s),r.a.arrForEach(o,(function(e){t(i,e,n)}))},e.prototype.once=function(e,t){var n=arguments.length,i=this;if((0===n||1===n&&"function"!=typeof e)&&o.a.Promise)return new o.a.Promise((function(t){i.once(e,t)}));if(1==arguments.length&&"function"==typeof e)this.anyOnce.push(e);else if(r.a.isEmptyArg(e))this.anyOnce.push(t);else if(r.a.isArray(e)){var a=function(){var n=Array.prototype.slice.call(arguments);r.a.arrForEach(e,(function(e){i.off(e,a)})),t.apply(this,n)};r.a.arrForEach(e,(function(e){i.on(e,a)}))}else{var s=this.eventsOnce[e]||(this.eventsOnce[e]=[]);s.push(t)}},e.prototype.whenState=function(n,r,i){var a={event:n},s=this,c=Array.prototype.slice.call(arguments,3);if("string"!=typeof n||"string"!=typeof r)throw"whenState requires a valid event String argument";if("function"!=typeof i&&o.a.Promise)return new o.a.Promise((function(t){e.prototype.whenState.apply(s,[n,r,t].concat(c))}));n===r?t(a,i,c):this.once(n,i)},e}();t.a=s},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(9),a=n(11),s=function(){function e(){this.action=void 0,this.flags=void 0,this.id=void 0,this.timestamp=void 0,this.count=void 0,this.error=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionSerial=void 0,this.channel=void 0,this.channelSerial=void 0,this.msgSerial=void 0,this.messages=void 0,this.presence=void 0,this.auth=void 0,this.params=void 0}var t=e.Action={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17};e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=[],r.a.arrForEach(r.a.keysArray(e.Action,!0),(function(n){e.ActionName[t[n]]=n}));var n={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},s=r.a.keysArray(n);function c(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}n.MODE_ALL=n.PRESENCE|n.PUBLISH|n.SUBSCRIBE|n.PRESENCE_SUBSCRIBE,e.prototype.hasFlag=function(e){return(this.flags&n[e])>0},e.prototype.setFlag=function(e){return this.flags=this.flags|n[e]},e.prototype.getMode=function(){return this.flags&&this.flags&n.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;r.a.arrForEach(e,(function(e){t.setFlag(e)}))},e.prototype.decodeModesFromFlags=function(){var t=[],n=this;return r.a.arrForEach(e.channelModes,(function(e){n.hasFlag(e)&&t.push(e)})),t.length>0?t:void 0},e.serialize=r.a.encodeBody,e.deserialize=function(t,n){var i=r.a.decodeBody(t,n);return e.fromDeserialized(i)},e.fromDeserialized=function(t){var n=t.error;n&&(t.error=i.a.fromValues(n));var s=t.messages;if(s)for(var c=0;c<s.length;c++)s[c]=o.a.fromValues(s[c]);var u=t.presence;if(u)for(c=0;c<u.length;c++)u[c]=a.a.fromValues(u[c],!0);return r.a.mixin(new e,t)},e.fromValues=function(t){return r.a.mixin(new e,t)};var u="id channel channelSerial connectionId connectionKey connectionSerial count msgSerial timestamp".split(" ");return e.stringify=function(t){var n,l="[ProtocolMessage";void 0!==t.action&&(l+="; action="+e.ActionName[t.action]||0);for(var f=0;f<u.length;f++)n=u[f],void 0!==t[n]&&(l+="; "+n+"="+t[n]);if(t.messages&&(l+="; messages="+c(o.a.fromValuesArray(t.messages))),t.presence&&(l+="; presence="+c(a.a.fromValuesArray(t.presence))),t.error&&(l+="; error="+i.a.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(l+="; token="+t.auth.accessToken),t.flags&&(l+="; flags="+r.a.arrFilter(s,(function(e){return t.hasFlag(e)})).join(",")),t.params){var d="";r.a.forInOwnNonNullProps(t.params,(function(e){d.length>0&&(d+="; "),d+=e+"="+t.params[e]})),d.length>0&&(l+="; params=["+d+"]")}return l+"]"},e.isDuplicate=function(e,n){if(e&&n&&(e.action===t.MESSAGE||e.action===t.PRESENCE)&&e.action===n.action&&e.channel===n.channel&&e.id===n.id){if(e.action===t.PRESENCE)return!0;if(e.messages.length===n.messages.length){for(var r=0;r<e.messages.length;r++){var i=e.messages[r],o=n.messages[r];if((i.extras&&i.extras.delta&&i.extras.delta.format)!==(o.extras&&o.extras.delta&&o.extras.delta.format))return!1}return!0}}return!1},e}();t.a=s},function(e,t,n){"use strict";var r=n(5),i=n(1),o=n(0),a=n(19),s=n(2),c=function(){function e(){this.name=void 0,this.id=void 0,this.timestamp=void 0,this.clientId=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.data=void 0,this.encoding=void 0,this.extras=void 0,this.size=void 0}function t(e){if(e&&e.cipher&&!e.cipher.channelCipher){if(!a.a)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=a.a.getCipher(e.cipher);e.cipher=t.cipherParams,e.channelCipher=t.cipher}}function n(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=i.a.dataSizeBytes(e.data)),t}return e.prototype.toJSON=function(){var e={name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,encoding:this.encoding,extras:this.extras},t=this.data;if(t&&r.a.isBuffer(t))if(arguments.length>0){var n=this.encoding;e.encoding=n?n+"/base64":"base64",t=r.a.base64Encode(t)}else t=r.a.toBuffer(t);return e.data=t,e},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:r.a.isBuffer(this.data)?e+="; data (buffer)="+r.a.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+"]"},e.encrypt=function(e,t,n){var i=e.data,o=e.encoding,a=t.channelCipher;o=o?o+"/":"",r.a.isBuffer(i)||(i=r.a.utf8Encode(String(i)),o+="utf-8/"),a.encrypt(i,(function(t,r){t?n(t):(e.data=r,e.encoding=o+"cipher+"+a.algorithm,n(null,e))}))},e.encode=function(t,n,o){var a,c=t.data;if("string"!=typeof c&&!r.a.isBuffer(c)&&null!=c){if(!i.a.isObject(c)&&!i.a.isArray(c))throw new s.a("Data type is unsupported",40013,400);t.data=JSON.stringify(c),t.encoding=(a=t.encoding)?a+"/json":"json"}null!=n&&n.cipher?e.encrypt(t,n,o):o(null,t)},e.encodeArray=function(t,n,r){for(var i=0,o=0;o<t.length;o++)e.encode(t[o],n,(function(e,n){e?r(e):++i==t.length&&r(null,t)}))},e.serialize=i.a.encodeBody,e.decode=function(e,t){t&&t.channelOptions||(t={channelOptions:t,plugins:{},baseEncodedPreviousPayload:void 0});var n=e.data,i=e.encoding;if(i){var o,a=i.split("/"),c=a.length,u=e.data;try{for(;(o=c)>0;){var l=a[--c].match(/([\-\w]+)(\+([\w\-]+))?/);if(!l)break;var f=l[1];switch(f){case"base64":u=r.a.base64Decode(String(u)),o==a.length&&(n=u);continue;case"utf-8":u=r.a.utf8Decode(u);continue;case"json":u=JSON.parse(u);continue;case"cipher":if(null!=t.channelOptions&&t.channelOptions.cipher){var d=l[3],p=t.channelOptions.channelCipher;if(d!=p.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");u=p.decrypt(u);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!t.plugins||!t.plugins.vcdiff)throw new s.a("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new s.a("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var h=t.baseEncodedPreviousPayload;"string"==typeof h&&(h=r.a.utf8Encode(h)),h=r.a.toBuffer(h),u=r.a.toBuffer(u),n=u=r.a.typedArrayToBuffer(t.plugins.vcdiff.decode(u,h))}catch(e){throw new s.a("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw new Error("Unknown encoding")}break}}catch(e){throw new s.a("Error processing the "+f+" encoding, decoder returned ‘"+e.message+"’",e.code||40013,400)}finally{e.encoding=o<=0?null:a.slice(0,o).join("/"),e.data=u}}t.baseEncodedPreviousPayload=n},e.fromResponseBody=function(t,n,r){r&&(t=i.a.decodeBody(t,r));for(var a=0;a<t.length;a++){var s=t[a]=e.fromValues(t[a]);try{e.decode(s,n)}catch(e){o.a.logAction(o.a.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return t},e.fromValues=function(t){return i.a.mixin(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e.fromEncoded=function(n,r){var i=e.fromValues(n);t(r);try{e.decode(i,r)}catch(e){o.a.logAction(o.a.LOG_ERROR,"Message.fromEncoded()",e.toString())}return i},e.fromEncodedArray=function(n,r){return t(r),i.a.arrMap(n,(function(t){return e.fromEncoded(t,r)}))},e.getMessagesSize=function(e){for(var t,r=0,i=0;i<e.length;i++)r+=(t=e[i]).size||(t.size=n(t));return r},e}();t.a=c},function(e,t,n){var r;e.exports=(r=n(12),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},function(e,t,n){"use strict";var r=n(3),i=n(0),o=n(5),a=n(9),s=n(1),c=function(){function e(e){return s.a.arrIndexOf(t.Actions,e)}function t(){this.action=void 0,this.id=void 0,this.timestamp=void 0,this.clientId=void 0,this.connectionId=void 0,this.data=void 0,this.encoding=void 0,this.size=void 0}return r.a.msgpack,t.Actions=["absent","present","enter","leave","update"],t.prototype.isSynthesized=function(){return this.id.substring(this.connectionId.length,0)!==this.connectionId},t.prototype.parseId=function(){var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},t.prototype.toJSON=function(){var t={clientId:this.clientId,action:e(this.action),encoding:this.encoding},n=this.data;if(n&&o.a.isBuffer(n))if(arguments.length>0){var r=this.encoding;t.encoding=r?r+"/base64":"base64",n=o.a.base64Encode(n)}else n=o.a.toBuffer(n);return t.data=n,t},t.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:o.a.isBuffer(this.data)?e+="; data (buffer)="+o.a.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),e+"]"},t.encode=a.a.encode,t.decode=a.a.decode,t.fromResponseBody=function(e,n,r){r&&(e=s.a.decodeBody(e,r));for(var o=0;o<e.length;o++){var a=e[o]=t.fromValues(e[o],!0);try{t.decode(a,n)}catch(e){i.a.logAction(i.a.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return e},t.fromValues=function(e,n){return n&&(e.action=t.Actions[e.action]),s.a.mixin(new t,e)},t.fromValuesArray=function(e){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=t.fromValues(e[i]);return r},t.fromEncoded=function(e,n){var r=t.fromValues(e,!0);try{t.decode(r,n)}catch(e){i.a.logAction(i.a.LOG_ERROR,"PresenceMessage.fromEncoded()",e.toString())}return r},t.fromEncodedArray=function(e,n){return s.a.arrMap(e,(function(e){return t.fromEncoded(e,n)}))},t.getMessagesSize=a.a.getMessagesSize,t}();t.a=c},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(46)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},c=s.lib={},u=c.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),f=s.enc={},d=f.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=f.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=f.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},v=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(i,f);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(c.Hasher=v.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(17))},function(e,t,n){"use strict";var r=n(2),i=n(1),o={disconnected:r.a.fromValues({statusCode:400,code:80003,message:"Connection to server temporarily unavailable"}),suspended:r.a.fromValues({statusCode:400,code:80002,message:"Connection to server unavailable"}),failed:r.a.fromValues({statusCode:400,code:8e4,message:"Connection failed or disconnected by server"}),closing:r.a.fromValues({statusCode:400,code:80017,message:"Connection closing"}),closed:r.a.fromValues({statusCode:400,code:80017,message:"Connection closed"}),unknownConnectionErr:r.a.fromValues({statusCode:500,code:50002,message:"Internal connection error"}),unknownChannelErr:r.a.fromValues({statusCode:500,code:50001,message:"Internal channel error"}),isRetriable:function(e){if(!e.statusCode||!e.code||e.statusCode>=500)return!0;var t=!1;return i.a.valuesArray(o).forEach((function(n){n.code&&n.code==e.code&&(t=!0)})),t}};t.a=o},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(1),a=n(6),s=n(22),c=n(5),u=n(2),l=function(){function e(){this.buffer=[]}e.prototype.append=function(e){return this.buffer.push(e),this},e.prototype.toString=function(){return this.buffer.join("")};var t={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){for(var i=new e,o=t.codex,a=new n(r);a.moveNext();){var s=a.current;a.moveNext();var c=a.current;a.moveNext();var u=a.current,l=s>>2,f=(3&s)<<4|c>>4,d=(15&c)<<2|u>>6,p=63&u;isNaN(c)?d=p=64:isNaN(u)&&(p=64),i.append(o.charAt(l)+o.charAt(f)+o.charAt(d)+o.charAt(p))}return i.toString()},decode:function(t){for(var n=new e,i=new r(t);i.moveNext();){var o=i.current;if(o<128)n.append(String.fromCharCode(o));else if(o>191&&o<224){i.moveNext();var a=i.current;n.append(String.fromCharCode((31&o)<<6|63&a))}else{i.moveNext(),a=i.current,i.moveNext();var s=i.current;n.append(String.fromCharCode((15&o)<<12|(63&a)<<6|63&s))}}return n.toString()}};function n(e){this._input=e,this._index=-1,this._buffer=[]}function r(e){this._input=e,this._index=-1,this._buffer=[]}return n.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),e<128?this.current=e:e>127&&e<2048?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},r.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=t.codex.indexOf(this._input.charAt(++this._index)),n=t.codex.indexOf(this._input.charAt(++this._index)),r=t.codex.indexOf(this._input.charAt(++this._index)),i=t.codex.indexOf(this._input.charAt(++this._index)),o=e<<2|n>>4,a=(15&n)<<4|r>>2,s=(3&r)<<6|i;return this.current=o,64!=r&&this._buffer.push(a),64!=i&&this._buffer.push(s),!0}},t}(),f=n(39),d=n.n(f),p=n(18),h=function(){var e,t,n=Math.pow(2,17);function f(){}function h(){return("000000"+Math.floor(1e16*Math.random())).slice(-16)}function v(e){return o.a.isErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new u.a(o.a.inspectError(e),e.code||40170,e.statusCode||401)}function m(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),n=o.a.keysArray(e,!0);if(!n)return"";n.sort();for(var r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function g(e){if(e.authCallback)r.a.logAction(r.a.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)r.a.logAction(r.a.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)r.a.logAction(r.a.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){var t="authOptions must include valid authentication parameters";throw r.a.logAction(r.a.LOG_ERROR,"Auth()",t),new Error(t)}r.a.logAction(r.a.LOG_MINOR,"Auth()","using token auth with supplied token only")}}i.a.createHmac?(t=function(e){return Buffer.from(e,"ascii").toString("base64")},e=function(e,t){var n=i.a.createHmac("SHA256",t);return n.update(e),n.digest("base64")}):(t=l.encode,e=function(e,t){return Object(p.stringify)(d()(e,t))});var y=0;function b(t,n){if(this.client=t,this.tokenParams=n.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,function(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}(n)){if(n.key&&!e){var i="client-side token request signing not supported";throw r.a.logAction(r.a.LOG_ERROR,"Auth()",i),new Error(i)}(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(n)&&r.a.logAction(r.a.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(n.defaultTokenParams,n),g(this.authOptions)}else{if(!n.key)throw i="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)",r.a.logAction(r.a.LOG_ERROR,"Auth()",i),new u.a(i,40160,401);r.a.logAction(r.a.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(n)}}return b.prototype.authorize=function(e,t,n){if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n){if(this.client.options.promises)return o.a.promisify(this,"authorize",arguments);n=f}var i=this;if(t&&t.key&&this.authOptions.key!==t.key)throw new u.a("Unable to update auth options with incompatible key",40102,401);t&&"force"in t&&(r.a.logAction(r.a.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),o.a.isOnlyPropIn(t,"force")&&(t=null)),this._forceNewToken(e,t,(function(e,t){if(e)return i.client.connection&&i.client.connection.connectionManager.actOnErrorFromAuthorize(e),void n(e);i.client.connection?i.client.connection.connectionManager.onAuthUpdated(t,n):n(null,t)}))},b.prototype.authorise=function(){r.a.deprecated("Auth.authorise","Auth.authorize"),this.authorize.apply(this,arguments)},b.prototype._forceNewToken=function(e,t,n){var r=this;this.tokenDetails=null,this._saveTokenOptions(e,t),g(this.authOptions),this._ensureValidAuthCredentials(!0,(function(e,t){delete r.tokenParams.timestamp,delete r.authOptions.queryTime,n(e,t)}))},b.prototype.requestToken=function(e,t,i){if("function"!=typeof e||i?"function"!=typeof t||i||(i=t,t=null):(i=e,t=e=null),!i&&this.client.options.promises)return o.a.promisify(this,"requestToken",arguments);t=t||this.authOptions,e=e||o.a.copy(this.tokenParams),i=i||f;var s,l=this.client;if(t.authCallback)r.a.logAction(r.a.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),s=t.authCallback;else if(t.authUrl)r.a.logAction(r.a.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),s=function(e,i){var s,f=o.a.mixin({accept:"application/json, text/plain"},t.authHeaders),d=t.authMethod&&"post"===t.authMethod.toLowerCase(),p=t.authUrl.indexOf("?");p>-1&&(s=o.a.parseQueryString(t.authUrl.slice(p)),t.authUrl=t.authUrl.slice(0,p),d||(t.authParams=o.a.mixin(s,t.authParams)));var h=o.a.mixin({},t.authParams||{},e),v=function(e,t,a,s){var l;if(e?r.a.logAction(r.a.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+o.a.inspectError(e)):(l=a["content-type"],r.a.logAction(r.a.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+l+"; body: "+o.a.inspectBody(t))),e||s)return i(e,t);if(c.a.isBuffer(t)&&(t=t.toString()),l){var f=l.indexOf("application/json")>-1,d=l.indexOf("text/plain")>-1||l.indexOf("application/jwt")>-1;if(f||d){if(f){if(t.length>n)return void i(new u.a("authUrl response exceeded max permitted length",40170,401));try{t=JSON.parse(t)}catch(e){return void i(new u.a("Unexpected error processing authURL response; err = "+e.message,40170,401))}}i(null,t,l)}else i(new u.a("authUrl responded with unacceptable content-type "+l+", should be either text/plain, application/jwt or application/json",40170,401))}else i(new u.a("authUrl response is missing a content-type header",40170,401))};if(r.a.logAction(r.a.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(h)+"; method: "+(d?"POST":"GET")),d){var m=f||{};m["content-type"]="application/x-www-form-urlencoded";var g=o.a.toQueryString(h).slice(1);a.a.postUri(l,t.authUrl,m,g,s,v)}else a.a.getUri(l,t.authUrl,f||{},h,v)};else{if(!t.key){var d="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";return r.a.logAction(r.a.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),void i(new u.a(d,40171,403))}var p=this;r.a.logAction(r.a.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),s=function(e,n){p.createTokenRequest(e,t,n)}}"capability"in e&&(e.capability=m(e.capability));var h=function(e,n){var i="/keys/"+e.keyName+"/requestToken",s=o.a.defaultPostHeaders();t.requestHeaders&&o.a.mixin(s,t.requestHeaders),r.a.logAction(r.a.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+i+"; Token params: "+JSON.stringify(e)),e=JSON.stringify(e),a.a.post(l,(function(e){return l.baseUri(e)+i}),s,e,null,n)},g=!1,y=this.client.options.timeouts.realtimeRequestTimeout,b=setTimeout((function(){g=!0;var e="Token request callback timed out after "+y/1e3+" seconds";r.a.logAction(r.a.LOG_ERROR,"Auth.requestToken()",e),i(new u.a(e,40170,401))}),y);s(e,(function(e,a,s){if(!g){if(clearTimeout(b),e)return r.a.logAction(r.a.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+o.a.inspectError(e)),void i(v(e));if("string"!=typeof a){if("object"!=typeof a){var c="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof a;return r.a.logAction(r.a.LOG_ERROR,"Auth.requestToken()",c),void i(new u.a(c,40170,401))}var l=JSON.stringify(a).length;if(l>n&&!t.suppressMaxLengthCheck)i(new u.a("Token request/details object exceeded max permitted stringified size (was "+l+" bytes)",40170,401));else if("issued"in a)i(null,a);else{if(!("keyName"in a))return c="Expected token request callback to call back with a token string, token request object, or token details object",r.a.logAction(r.a.LOG_ERROR,"Auth.requestToken()",c),void i(new u.a(c,40170,401));h(a,(function(e,t,n,a){if(e)return r.a.logAction(r.a.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+o.a.inspectError(e)),void i(v(e));a||(t=JSON.parse(t)),r.a.logAction(r.a.LOG_MINOR,"Auth.getToken()","token received"),i(null,t)}))}}else 0===a.length?i(new u.a("Token string is empty",40170,401)):a.length>n?i(new u.a("Token string exceeded max permitted length (was "+a.length+" bytes)",40170,401)):"undefined"===a||"null"===a?i(new u.a("Token string was literal null/undefined",40170,401)):"{"!==a[0]||s&&s.indexOf("application/jwt")>-1?i(null,{token:a}):i(new u.a("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401))}}))},b.prototype.createTokenRequest=function(t,n,i){if("function"!=typeof t||i?"function"!=typeof n||i||(i=n,n=null):(i=t,n=t=null),!i&&this.client.options.promises)return o.a.promisify(this,"createTokenRequest",arguments);n=n||this.authOptions,t=t||o.a.copy(this.tokenParams);var a=n.key;if(a){var s=a.split(":"),c=s[0],l=s[1];if(l)if(""!==t.clientId){"capability"in t&&(t.capability=m(t.capability));var f,d=o.a.mixin({keyName:c},t),p=t.clientId||"",v=t.ttl||"",g=t.capability||"",y=this;f=function(){var t=d.nonce||(d.nonce=h()),n=d.timestamp,o=d.keyName+"\n"+v+"\n"+g+"\n"+p+"\n"+n+"\n"+t+"\n";d.mac=d.mac||e(o,l),r.a.logAction(r.a.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),i(null,d)},d.timestamp?f():y.getTimestamp(n&&n.queryTime,(function(e,t){e?i(e):(d.timestamp=t,f())}))}else i(new u.a("clientId can’t be an empty string",40012,400));else i(new u.a("Invalid key specified",40101,403))}else i(new u.a("No key specified",40101,403))},b.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,(function(t,n){t?e(t):e(null,{access_token:n.token})}))},b.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,(function(n,r){n?e(n):e(null,{authorization:"Bearer "+t(r.token)})}))},b.prototype.getTimestamp=function(e,t){this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?t(null,this.getTimestampUsingOffset()):this.client.time(t)},b.prototype.getTimestampUsingOffset=function(){return o.a.now()+(this.client.serverTimeOffset||0)},b.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},b.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=t(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},b.prototype._saveTokenOptions=function(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},b.prototype._ensureValidAuthCredentials=function(e,t){var n=this,i=this.tokenDetails;if(i){if(this._tokenClientIdMismatch(i.clientId))return void t(new u.a("Mismatch between clientId in token ("+i.clientId+") and current clientId ("+this.clientId+")",40102,403));if(!this.isTimeOffsetSet()||!i.expires||i.expires>=this.getTimestampUsingOffset())return r.a.logAction(r.a.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+i.expires),void t(null,i);r.a.logAction(r.a.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=Object(s.a)())).push(t),null===this.currentTokenRequestId||e){var o=this.currentTokenRequestId=y++;this.requestToken(this.tokenParams,this.authOptions,(function(e,t){if(n.currentTokenRequestId>o)r.a.logAction(r.a.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");else{n.currentTokenRequestId=null;var i=n.waitingForTokenRequest||f;n.waitingForTokenRequest=null,e?i(e):i(null,n.tokenDetails=t)}}))}},b.prototype._userSetClientId=function(e){if("string"!=typeof e&&null!==e)throw new u.a("clientId must be either a string or null",40012,400);if("*"===e)throw new u.a('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t},b.prototype._uncheckedSetClientId=function(e){if(this._tokenClientIdMismatch(e)){var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new u.a(t,40102,401);return r.a.logAction(r.a.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null},b.prototype._tokenClientIdMismatch=function(e){return this.clientId&&"*"!==this.clientId&&e&&"*"!==e&&this.clientId!==e},b.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},b}();t.a=h},function(e,t,n){"use strict";var r=n(1),i=n(8),o=n(20),a=n(0),s=n(4),c=n(13),u=n(14),l=n(2),f=function(){function e(e){return function(e){return!!e.code&&!u.a.isTokenErr(e)&&(!!r.a.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)}(e)?[i.a.fromValues({action:i.a.Action.ERROR,error:e})]:[i.a.fromValues({action:i.a.Action.DISCONNECTED,error:e})]}function t(e,t,n){n.format=void 0,n.heartbeats=!0,o.a.call(this,e,t,n),this.stream=!("stream"in n)||n.stream,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}return r.a.inherits(t,o.a),t.REQ_SEND=0,t.REQ_RECV=1,t.REQ_RECV_POLL=2,t.REQ_RECV_STREAM=3,t.prototype.connect=function(){a.a.logAction(a.a.LOG_MINOR,"CometTransport.connect()","starting"),o.a.prototype.connect.call(this);var t=this,n=this.params,i=n.options,c=s.a.getHost(i,n.host),u=s.a.getPort(i),f=i.tls?"https://":"http://";this.baseUri=f+c+":"+u+"/comet/";var d=this.baseUri+"connect";a.a.logAction(a.a.LOG_MINOR,"CometTransport.connect()","uri: "+d),this.auth.getAuthParams((function(n,i){if(n)t.disconnect(n);else if(!t.isDisposed){t.authParams=i;var o=t.params.getConnectParams(i);"stream"in o&&(t.stream=o.stream),a.a.logAction(a.a.LOG_MINOR,"CometTransport.connect()","connectParams:"+r.a.toQueryString(o));var s=!1,c=t.recvRequest=t.createRequest(d,null,o,null,t.stream?3:1);c.on("data",(function(e){t.recvRequest&&(s||(s=!0,t.emit("preconnect")),t.onData(e))})),c.on("complete",(function(n,i,o){t.recvRequest||(n=n||new l.a("Request cancelled",80003,400)),t.recvRequest=null,s||n||(s=!0,t.emit("preconnect")),t.onActivity(),n?n.code?t.onData(e(n)):t.disconnect(n):r.a.nextTick((function(){t.recv()}))})),c.exec()}}))},t.prototype.requestClose=function(){a.a.logAction(a.a.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){a.a.logAction(a.a.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=e?this.closeUri:this.disconnectUri;if(t){var n=this,i=this.createRequest(t,null,this.authParams,null,0);i.on("complete",(function(t){t&&(a.a.logAction(a.a.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+r.a.inspectError(t)),n.finish("disconnected",t))})),i.exec()}},t.prototype.dispose=function(){if(a.a.logAction(a.a.LOG_MINOR,"CometTransport.dispose()",""),!this.isDisposed){this.isDisposed=!0,this.recvRequest&&(a.a.logAction(a.a.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",c.a.disconnected);var e=this;r.a.nextTick((function(){e.emit("disposed")}))}},t.prototype.onConnect=function(e){if(!this.isDisposed){var t=e.connectionKey;o.a.prototype.onConnect.call(this,e);var n=this.baseUri+t;a.a.logAction(a.a.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+n+"; connectionKey = "+e.connectionKey),this.sendUri=n+"/send",this.recvUri=n+"/recv",this.closeUri=n+"/close",this.disconnectUri=n+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(t){var n=this,i=this.sendRequest=n.createRequest(n.sendUri,null,n.authParams,this.encodeRequest(t),0);i.on("complete",(function(t,i){t&&a.a.logAction(a.a.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+r.a.inspectError(t)),n.sendRequest=null,t?t.code?n.onData(e(t)):n.disconnect(t):(i&&n.onData(i),n.pendingItems&&r.a.nextTick((function(){n.sendRequest||n.sendAnyPending()})))})),i.exec()},t.prototype.recv=function(){if(!this.recvRequest&&this.isConnected){var t=this,n=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,t.stream?3:2);n.on("data",(function(e){t.onData(e)})),n.on("complete",(function(n){t.recvRequest=null,t.onActivity(),n?n.code?t.onData(e(n)):t.disconnect(n):r.a.nextTick((function(){t.recv()}))})),n.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var n=0;n<t.length;n++)this.onProtocolMessage(i.a.fromDeserialized(t[n]))}catch(e){a.a.logAction(a.a.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e&&(e=JSON.parse(e)),e},t.prototype.onAuthUpdated=function(e){this.authParams={access_token:e.token}},t}();t.a=f},function(e,t,n){"use strict";(function(e){var r=n(1),i=function(){var t,n,i="ablyjs-storage-test";try{e.sessionStorage.setItem(i,i),e.sessionStorage.removeItem(i),t=!0}catch(e){t=!1}try{e.localStorage.setItem(i,i),e.localStorage.removeItem(i),n=!0}catch(e){n=!1}function o(){}function a(t){return t?e.sessionStorage:e.localStorage}function s(e,t,n,i){var o={value:t};return n&&(o.expires=r.a.now()+n),a(i).setItem(e,JSON.stringify(o))}function c(e,t){var n=a(t).getItem(e);if(!n)return null;var i=JSON.parse(n);return i.expires&&i.expires<r.a.now()?(a(t).removeItem(e),null):i.value}function u(e,t){return a(t).removeItem(e)}return n&&(o.set=function(e,t,n){return s(e,t,n,!1)},o.get=function(e){return c(e,!1)},o.remove=function(e){return u(e,!1)}),t&&(o.setSession=function(e,t,n){return s(e,t,n,!0)},o.getSession=function(e){return c(e,!0)},o.removeSession=function(e){return u(e,!0)}),o}();t.a=i}).call(this,n(17))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,i,o;e.exports=(r=n(12),o=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}(e,t,r)}},r.enc.Base64)},function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(18),a=n(28),s=n.n(a),c=n(3),u=n(0),l=n(5),f=function(){var e;if(c.a.getRandomWordArray)e=c.a.getRandomWordArray;else if("undefined"!=typeof Uint32Array&&c.a.getRandomValues){var t=new Uint32Array(4);e=function(e,n){var r=e/4,i=4==r?t:new Uint32Array(r);c.a.getRandomValues(i,(function(e){n(e,l.a.toWordArray(i))}))}}else e=function(e,t){u.a.logAction(u.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var n=e/4,r=new Array(n),o=0;o<n;o++)r[o]=Math.floor(4294967296*Math.random())-2147483648;t(null,i.a.create(r))};function n(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function r(e){return e.replace("_","/").replace("-","+")}i.a.create([0,0,0,0]);var a=[i.a.create([269488144,269488144,269488144,269488144],16),i.a.create([16777216],1),i.a.create([33685504],2),i.a.create([50529024],3),i.a.create([67372036],4),i.a.create([84215045,83886080],5),i.a.create([101058054,101056512],6),i.a.create([117901063,117901056],7),i.a.create([134744072,134744072],8),i.a.create([151587081,151587081,150994944],9),i.a.create([168430090,168430090,168427520],10),i.a.create([185273099,185273099,185273088],11),i.a.create([202116108,202116108,202116108],12),i.a.create([218959117,218959117,218959117,218103808],13),i.a.create([235802126,235802126,235802126,235798528],14),i.a.create([252645135,252645135,252645135,252645135],15),i.a.create([269488144,269488144,269488144,269488144],16)];function f(){}function d(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function p(e,t,n){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=l.a.toWordArray(e.key),n&&(this.iv=l.a.toWordArray(n).clone()),this.blockLengthWords=t}return f.CipherParams=d,f.getDefaultParams=function(e){var t;if("function"!=typeof e&&"string"!=typeof e){if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");t="string"==typeof e.key?Object(o.parse)(r(e.key)):l.a.toWordArray(e.key);var i=new d;if(i.key=t,i.algorithm=e.algorithm||"aes",i.keyLength=32*t.words.length,i.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==i.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+i.keyLength);return n(i),i}if(u.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"==typeof e)f.generateRandomKey((function(t){e(null,f.getDefaultParams({key:t}))}));else{if("function"!=typeof arguments[1])throw new Error("Invalid arguments for Crypto.getDefaultParams");arguments[1](null,f.getDefaultParams({key:e}))}},f.generateRandomKey=function(t,n){1==arguments.length&&"function"==typeof t&&(n=t,t=void 0),e((t||256)/8,n)},f.getCipher=function(e){var t=e instanceof d?e:f.getDefaultParams(e);return{cipherParams:t,cipher:new p(t,4,e.iv)}},p.prototype.encrypt=function(t,n){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.encrypt()","");var r=(t=l.a.toWordArray(t)).sigBytes,i=function(e){return e+16&-16}(r),o=this,c=function(){o.getIv((function(e,s){if(e)n(e);else{var c=o.encryptCipher.process(t.concat(a[i-r])),u=s.concat(c);n(null,u)}}))};this.encryptCipher?c():this.iv?(this.encryptCipher=s.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),c()):e(16,(function(e,t){e?n(e):(o.encryptCipher=s.a.algo[o.cjsAlgorithm].createEncryptor(o.key,{iv:t}),o.iv=t,c())}))},p.prototype.decrypt=function(e){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=l.a.toWordArray(e);var t=this.blockLengthWords,n=e.words,r=i.a.create(n.slice(0,t)),o=i.a.create(n.slice(t)),a=s.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:r}),c=a.process(o),f=a.finalize();return a.reset(),f&&f.sigBytes&&c.concat(f),c},p.prototype.getIv=function(t){if(this.iv){var n=this.iv;return this.iv=null,void t(null,n)}var r=this;e(16,(function(e,n){e?t(e):t(null,r.encryptCipher.process(n))}))},f}();t.a=f},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(7),a=n(0),s=n(13),c=n(2),u=function(){var e=r.a.Action,t=r.a.fromValues({action:e.CLOSE}),n=r.a.fromValues({action:e.DISCONNECT});function u(e,t,n){o.a.call(this),this.connectionManager=e,e.registerProposedTransport(this),this.auth=t,this.params=n,this.timeouts=n.options.timeouts,this.format=n.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}return i.a.inherits(u,o.a),u.prototype.connect=function(){},u.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",s.a.closed)},u.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||s.a.disconnected)},u.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||s.a.failed)},u.prototype.finish=function(e,t){this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(this.idleTimer),this.idleTimer=null,this.emit(e,t),this.dispose())},u.prototype.onProtocolMessage=function(t){switch(a.a.shouldLog(a.a.LOG_MICRO)&&a.a.logAction(a.a.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+r.a.stringify(t)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),t.action){case e.HEARTBEAT:a.a.logAction(a.a.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",t.id);break;case e.CONNECTED:this.onConnect(t),this.emit("connected",t.error,t.connectionId,t.connectionDetails,t);break;case e.CLOSED:this.onClose(t);break;case e.DISCONNECTED:this.onDisconnect(t);break;case e.ACK:this.emit("ack",t.msgSerial,t.count);break;case e.NACK:this.emit("nack",t.msgSerial,t.count,t.error);break;case e.SYNC:if(void 0!==t.connectionId){this.emit("sync",t.connectionId,t);break}this.connectionManager.onChannelMessage(t,this);break;case e.AUTH:this.auth.authorize((function(e){e&&a.a.logAction(a.a.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+i.a.inspectError(e))}));break;case e.ERROR:if(a.a.logAction(a.a.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+i.a.inspect(t.error)+(t.channel?", channel: "+t.channel:"")),void 0===t.channel){this.onFatalError(t);break}this.connectionManager.onChannelMessage(t,this);break;default:this.connectionManager.onChannelMessage(t,this)}},u.prototype.onConnect=function(e){this.isConnected=!0;var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())},u.prototype.onDisconnect=function(e){var t=e&&e.error;a.a.logAction(a.a.LOG_MINOR,"Transport.onDisconnect()","err = "+i.a.inspectError(t)),this.finish("disconnected",t)},u.prototype.onFatalError=function(e){var t=e&&e.error;a.a.logAction(a.a.LOG_MINOR,"Transport.onFatalError()","err = "+i.a.inspectError(t)),this.finish("failed",t)},u.prototype.onClose=function(e){var t=e&&e.error;a.a.logAction(a.a.LOG_MINOR,"Transport.onClose()","err = "+i.a.inspectError(t)),this.finish("closed",t)},u.prototype.requestClose=function(){a.a.logAction(a.a.LOG_MINOR,"Transport.requestClose()",""),this.send(t)},u.prototype.requestDisconnect=function(){a.a.logAction(a.a.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(n)},u.prototype.ping=function(e){var t={action:r.a.Action.HEARTBEAT};e&&(t.id=e),this.send(r.a.fromValues(t))},u.prototype.dispose=function(){a.a.logAction(a.a.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},u.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=i.a.now(),this.setIdleTimer(this.maxIdleInterval+100))},u.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout((function(){t.onIdleTimerExpire()}),e))},u.prototype.onIdleTimerExpire=function(){this.idleTimer=null;var e=i.a.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var n="No activity seen from realtime in "+e+"ms; assuming connection has dropped";a.a.logAction(a.a.LOG_ERROR,"Transport.onIdleTimerExpire()",n),this.disconnect(new c.a(n,80003,408))}else this.setIdleTimer(t+100)},u.prototype.onAuthUpdated=function(){},u}();t.a=u},function(e,t,n){"use strict";t.a=function(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){e=e||[];var t=function(){for(var t=0;t<e.length;t++){var n=e[t];if(n)try{n.apply(null,arguments)}catch(e){r.a.logAction(r.a.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}};return t.push=function(){Array.prototype.push.apply(e,arguments)},t}},function(e,t,n){"use strict";var r=n(1),i=n(3),o=n(4),a=n(0),s=n(6),c=function(){function e(){}return e.levels=["fatal","error","warning","info","debug"],e.report=function(e,t,n,c){var u={event_id:r.a.randomHexString(16),tags:r.a.mixin({ablyAgent:o.a.agent},c),platform:"javascript",level:e,release:o.a.version,fingerprint:n&&[n],message:t,request:{headers:{"User-Agent":i.a.userAgent},url:i.a.currentUrl}};a.a.logAction(a.a.LOG_MICRO,"ErrorReporter","POSTing to error reporter: "+t),s.a.postUri(null,o.a.errorReportingUrl,o.a.errorReportingHeaders,JSON.stringify(u),{},(function(e,t){a.a.logAction(a.a.LOG_MICRO,"ErrorReporter","POSTing to error reporter resulted in: "+(e?r.a.inspectError(e):r.a.inspectBody(t)))}))},e}();t.a=c},function(e,t,n){"use strict";var r=function(){var e={};function t(e,t,n){e.byteLength;for(var r=0,i=n.length;r<i;r++){var o=n.charCodeAt(r);if(o<128)e.setUint8(t++,o>>>0&127|0);else if(o<2048)e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);else if(o<65536)e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);else{if(!(o<1114112))throw new Error("bad codepoint "+o);e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128)}}}function n(e,t,n){for(var r="",i=t,o=t+n;i<o;i++){var a=e.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));r+=String.fromCharCode((7&a)<<18|(63&e.getUint8(++i))<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0)}else r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0);else r+=String.fromCharCode((15&a)<<6|63&e.getUint8(++i));else r+=String.fromCharCode(a)}return r}function r(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<65536)t+=3;else{if(!(i<1114112))throw new Error("bad codepoint "+i);t+=4}}return t}e.inspect=function(e){if(void 0===e)return"undefined";var t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);for(var r=[],i=0;i<e.byteLength;i++){if(i>20){r.push("...");break}var o=t.getUint8(i).toString(16);1===o.length&&(o="0"+o),r.push(o)}return"<"+n+" "+r.join(" ")+">"},e.utf8Write=t,e.utf8Read=n,e.utf8ByteCount=r,e.encode=function(e,t){var n=u(e,t);if(0!=n){var r=new ArrayBuffer(n);return c(e,new DataView(r),0,t),r}},e.decode=function(e){var t=new a(new DataView(e)),n=t.parse();if(t.offset!==e.byteLength)throw new Error(e.byteLength-t.offset+" trailing bytes");return n};var i=4294967296,o=1/i;function a(e,t){this.offset=t||0,this.view=e}function s(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r);return n.filter((function(n){var r=e[n];return!(t&&null==r||"function"==typeof r&&!r.toJSON)}))}function c(e,n,i,a){var u=typeof e;if("string"===u){if((l=r(e))<32)return n.setUint8(i,160|l),t(n,i+1,e),1+l;if(l<256)return n.setUint8(i,217),n.setUint8(i+1,l),t(n,i+2,e),2+l;if(l<65536)return n.setUint8(i,218),n.setUint16(i+1,l),t(n,i+3,e),3+l;if(l<4294967296)return n.setUint8(i,219),n.setUint32(i+1,l),t(n,i+5,e),5+l}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){if((l=e.byteLength)<256)return n.setUint8(i,196),n.setUint8(i+1,l),new Uint8Array(n.buffer).set(new Uint8Array(e),i+2),2+l;if(l<65536)return n.setUint8(i,197),n.setUint16(i+1,l),new Uint8Array(n.buffer).set(new Uint8Array(e),i+3),3+l;if(l<4294967296)return n.setUint8(i,198),n.setUint32(i+1,l),new Uint8Array(n.buffer).set(new Uint8Array(e),i+5),5+l}if("number"===u){if(Math.floor(e)!==e)return n.setUint8(i,203),n.setFloat64(i+1,e),9;if(e>=0){if(e<128)return n.setUint8(i,e),1;if(e<256)return n.setUint8(i,204),n.setUint8(i+1,e),2;if(e<65536)return n.setUint8(i,205),n.setUint16(i+1,e),3;if(e<4294967296)return n.setUint8(i,206),n.setUint32(i+1,e),5;if(e<0x10000000000000000)return n.setUint8(i,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*o)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(n,i+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return n.setInt8(i,e),1;if(e>=-128)return n.setUint8(i,208),n.setInt8(i+1,e),2;if(e>=-32768)return n.setUint8(i,209),n.setInt16(i+1,e),3;if(e>=-2147483648)return n.setUint8(i,210),n.setInt32(i+1,e),5;if(e>=-0x8000000000000000)return n.setUint8(i,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*o)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(n,i+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===u)return a?0:(n.setUint8(i,212),n.setUint8(i+1,0),n.setUint8(i+2,0),3);if(null===e)return a?0:(n.setUint8(i,192),1);if("boolean"===u)return n.setUint8(i,e?195:194),1;if("function"==typeof e.toJSON)return c(e.toJSON(),n,i,a);if("object"===u){var l,f=0,d=Array.isArray(e);if(d)l=e.length;else{var p=s(e,a);l=p.length}if(l<16?(n.setUint8(i,l|(d?144:128)),f=1):l<65536?(n.setUint8(i,d?220:222),n.setUint16(i+1,l),f=3):l<4294967296&&(n.setUint8(i,d?221:223),n.setUint32(i+1,l),f=5),d)for(var h=0;h<l;h++)f+=c(e[h],n,i+f,a);else for(h=0;h<l;h++){var v=p[h];f+=c(v,n,i+f),f+=c(e[v],n,i+f,a)}return f}if("function"===u)return 0;throw new Error("Unknown type "+u)}function u(e,t){var n=typeof e;if("string"===n){if((i=r(e))<32)return 1+i;if(i<256)return 2+i;if(i<65536)return 3+i;if(i<4294967296)return 5+i}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){if((i=e.byteLength)<256)return 2+i;if(i<65536)return 3+i;if(i<4294967296)return 5+i}if("number"===n){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"==typeof e.toJSON)return u(e.toJSON(),t);if("object"===n){var i,o=0;if(Array.isArray(e)){i=e.length;for(var a=0;a<i;a++)o+=u(e[a],t)}else{var c=s(e,t);for(i=c.length,a=0;a<i;a++){var l=c[a];o+=u(l)+u(e[l],t)}}if(i<16)return 1+o;if(i<65536)return 3+o;if(i<4294967296)return 5+o;throw new Error("Array or object too long 0x"+i.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}return a.prototype.map=function(e){for(var t={},n=0;n<e;n++)t[this.parse()]=this.parse();return t},a.prototype.bin=a.prototype.buf=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},a.prototype.str=function(e){var t=n(this.view,this.offset,e);return this.offset+=e,t},a.prototype.array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.parse();return t},a.prototype.ext=function(e){var t={};return t.type=this.view.getInt8(this.offset),this.offset++,t.data=this.buf(e),this.offset+=e,t},a.prototype.parse=function(){var e,t,n,r,o=this.view.getUint8(this.offset);if(0==(128&o))return this.offset++,o;if(128==(240&o))return t=15&o,this.offset++,this.map(t);if(144==(240&o))return t=15&o,this.offset++,this.array(t);if(160==(224&o))return t=31&o,this.offset++,this.str(t);if(224==(224&o))return e=this.view.getInt8(this.offset),this.offset++,e;switch(o){case 192:return this.offset++,null;case 193:return void this.offset++;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return t=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(t);case 197:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(t);case 198:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(t);case 199:return t=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(t);case 200:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(t);case 201:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(t);case 202:return e=this.view.getFloat32(this.offset+1),this.offset+=5,e;case 203:return e=this.view.getFloat64(this.offset+1),this.offset+=9,e;case 204:return e=this.view.getUint8(this.offset+1),this.offset+=2,e;case 205:return e=this.view.getUint16(this.offset+1),this.offset+=3,e;case 206:return e=this.view.getUint32(this.offset+1),this.offset+=5,e;case 207:return n=this.view,r=(r=this.offset+1)||0,e=n.getUint32(r)*i+n.getUint32(r+4),this.offset+=9,e;case 208:return e=this.view.getInt8(this.offset+1),this.offset+=2,e;case 209:return e=this.view.getInt16(this.offset+1),this.offset+=3,e;case 210:return e=this.view.getInt32(this.offset+1),this.offset+=5,e;case 211:return e=function(e,t){return t=t||0,e.getInt32(t)*i+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,e;case 212:return t=1,this.offset++,this.ext(t);case 213:return t=2,this.offset++,this.ext(t);case 214:return t=4,this.offset++,this.ext(t);case 215:return t=8,this.offset++,this.ext(t);case 216:return t=16,this.offset++,this.ext(t);case 217:return t=this.view.getUint8(this.offset+1),this.offset+=2,this.str(t);case 218:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.str(t);case 219:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.str(t);case 220:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.array(t);case 221:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.array(t);case 222:return t=this.view.getUint16(this.offset+1),this.offset+=3,this.map(t);case 223:return t=this.view.getUint32(this.offset+1),this.offset+=5,this.map(t)}throw new Error("Unknown type 0x"+o.toString(16))},e}();t.a=r},function(e,t,n){"use strict";(function(e){var r=n(8),i=n(1),o=n(34),a=n(4),s=n(3),c=n(7),u=n(26),l=n(0),f=n(21),d=n(13),p=n(2),h=n(14),v=n(6),m=n(9),g=n(22),y=n(23),b=n(16),w=n(42),S=n(41),k=function(){var t=!(void 0===b.a||!b.a.get),n=!(void 0===b.a||!b.a.getSession),k=r.a.Action,E=o.a.PendingMessage,_=function(){},O=a.a.transportPreferenceOrder,T=O[O.length-1],x="ably-transport-preference",R="ably-connection-recovery";function A(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?"msgpack":"json",this.connectionSerial=void 0,this.timeSerial=void 0}function C(e,t){c.a.call(this),this.realtime=e,this.options=t;var r=t.timeouts,o=this,f=r.preferenceConnectTimeout+r.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:f,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:r.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:r.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:r.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new u.a,this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.timeSerial=void 0,this.connectionSerial=void 0,this.connectionStateTtl=r.connectionStateTtl,this.maxIdleInterval=null,this.transports=i.a.intersect(t.transports||a.a.defaultTransports,C.supportedTransports),this.baseTransport=i.a.intersect(a.a.baseTransportOrder,this.transports)[0],this.upgradeTransports=i.a.intersect(this.transports,a.a.upgradeTransports),this.transportPreference=null,this.httpHosts=a.a.getHosts(t),this.activeProtocol=null,this.proposedTransports=[],this.pendingTransports=[],this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.mostRecentMsg=null,this.forceFallbackHost=!1,this.connectCounter=0,l.a.logAction(l.a.LOG_MINOR,"Realtime.ConnectionManager()","started"),l.a.logAction(l.a.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(t.transports||a.a.defaultTransports)+"]"),l.a.logAction(l.a.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),l.a.logAction(l.a.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){var d="no requested transports available";throw l.a.logAction(l.a.LOG_ERROR,"realtime.ConnectionManager()",d),new Error(d)}var p=s.a.addEventListener;p&&(n&&"function"==typeof t.recover&&p("beforeunload",this.persistConnection.bind(this)),!0===t.closeOnUnload&&p("beforeunload",(function(){l.a.logAction(l.a.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),o.requestState({state:"closing"})})),p("online",(function(){o.state!=o.states.disconnected&&o.state!=o.states.suspended||(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),o.requestState({state:"connecting"}))})),p("offline",(function(){o.state==o.states.connected&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),o.disconnectAllTransports())})))}return A.prototype.getConnectParams=function(e){var t=e?i.a.copy(e):{},n=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey,void 0!==this.timeSerial?t.timeSerial=this.timeSerial:void 0!==this.connectionSerial&&(t.connectionSerial=this.connectionSerial);break;case"recover":var r=n.recover.split(":");if(r){t.recover=r[0];var o=r[1];isNaN(o)?t.timeSerial=o:t.connectionSerial=o}}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=a.a.apiVersion,t.agent=a.a.agent,void 0!==n.transportParams&&i.a.mixin(t,n.transportParams),t},A.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),void 0!==this.connectionSerial&&(e+=",connectionSerial="+this.connectionSerial),this.timeSerial&&(e+=",timeSerial="+this.timeSerial),this.format&&(e+=",format="+this.format),e+"]"},i.a.inherits(C,c.a),C.supportedTransports={},Object(S.a)(C),i.a.arrForEach(w.a,(function(e){e(C)})),C.prototype.createTransportParams=function(e,t){var n=new A(this.options,e,t,this.connectionKey);return this.timeSerial?n.timeSerial=this.timeSerial:void 0!==this.connectionSerial&&(n.connectionSerial=this.connectionSerial),n},C.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey)e("resume");else if("string"!=typeof t.options.recover){var r=t.options.recover,i=n&&b.a.getSession(R);if(i&&"function"==typeof r)return l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),void r(i,(function(n){n?(t.options.recover=i.recoveryKey,e("recover")):e("clean")}));e("clean")}else e("recover")}((function(n){var r=t.createTransportParams(null,n);if("recover"===n){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var i=t.options.recover.split(":");i&&i[2]&&(t.msgSerial=i[2])}else l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+r.toString());e(r)}))},C.prototype.tryATransport=function(e,t,n){var r=this;e.host,l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),C.supportedTransports[t].tryConnect(this,this.realtime.auth,e,(function(i,o){var a=r.state;return a==r.states.closing||a==r.states.closed||a==r.states.failed?(o&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+a.state+" while we were attempting the transport; closing "+o),o.close()),void n(!0)):i?(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+i.event+", err: "+i.error.toString()),void(!h.a.isTokenErr(i.error)||r.errorReason&&h.a.isTokenErr(r.errorReason)?"failed"===i.event?(r.notifyState({state:"failed",error:i.error}),n(!0)):"disconnected"===i.event&&(d.a.isRetriable(i.error)?n(!1):(r.notifyState({state:r.states.connecting.failState,error:i.error}),n(!0))):(r.errorReason=i.error,r.realtime.auth._forceNewToken(null,null,(function(i){i?r.actOnErrorFromAuthorize(i):r.tryATransport(e,t,n)}))))):(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),r.setTransportPending(o,e),void n(null,o))}))},C.prototype.setTransportPending=function(e,t){var n=t.mode;l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+n),i.a.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var r=this;e.once("connected",(function(o,a,s,c){"upgrade"==n&&r.activeProtocol?e.shortName!==T&&i.a.arrIn(r.getUpgradePossibilities(),T)?setTimeout((function(){r.scheduleTransportActivation(o,e,a,s,c)}),r.options.timeouts.parallelUpgradeDelay):r.scheduleTransportActivation(o,e,a,s,c):(r.activateTransport(o,e,a,s,c),i.a.nextTick((function(){r.connectImpl(t)}))),"recover"===n&&r.options.recover&&(r.options.recover=null,r.unpersistConnection())})),e.on(["disconnected","closed","failed"],(function(t){r.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)},C.prototype.scheduleTransportActivation=function(e,t,n,r,o){var a,s,c=this,u=this.activeProtocol&&this.activeProtocol.getTransport(),f=function(){t.disconnect(),i.a.arrDeleteValue(c.pendingTransports,t)};return this.state!==this.states.connected&&this.state!==this.states.connecting?(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void f()):!u||(a=t,s=u,i.a.arrIndexOf(O,a.shortName)>i.a.arrIndexOf(O,s.shortName))?(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t),void this.realtime.channels.onceNopending((function(i){var a;if(i)l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.scheduleTransportActivation()","Unable to activate transport; transport = "+t+"; err = "+i);else{if(!t.isConnected)return l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),void f();if(c.state===c.states.connected)l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),c.state=c.states.synchronizing,a=c.activeProtocol;else if(c.state!==c.states.connecting)return l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+c.state.state+(c.state===c.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void f();var s=n!==c.connectionId,u=s?o:c;s&&l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.scheduleTransportActivation()","Upgrade resulted in new connectionId; resetting library connection position from "+(c.timeSerial||c.connectionSerial)+" to "+(u.timeSerial||u.connectionSerial)+"; upgrade error was "+e),l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t),c.sync(t,u,(function(n,i,o){if(n)c.state===c.states.synchronizing&&(l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.scheduleTransportActivation()","Unexpected error attempting to sync transport; transport = "+t+"; err = "+n),c.disconnectAllTransports());else{var s=function(){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),c.activateTransport(e,t,i,r,o),c.state===c.states.synchronizing?(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),c.state=c.states.connected):l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+c.state.state+", so leaving unchanged"),c.state.sendEvents&&c.sendQueuedMessages()};a?a.onceIdle(s):s()}}))}}))):(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+u.shortName+" - abandoning upgrade"),void f())},C.prototype.activateTransport=function(e,t,n,r,a){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),a&&l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.activateTransport()","serial =  "+(a.timeSerial||a.connectionSerial)),this.persistTransportPreference(t);var s=this.state,c=this.states.connected.state;if(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+s.state),s.state==this.states.closing.state||s.state==this.states.closed.state||s.state==this.states.failed.state)return l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(i.a.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;var u=this.activeProtocol;this.activeProtocol=new o.a(t),this.host=t.params.host;var d=r.connectionKey;d&&this.connectionKey!=d&&this.setConnection(n,r,a,!!e),this.onConnectionDetailsUpdate(r,t);var p=this;if(i.a.nextTick((function(){t.on("connected",(function(e,n,r){p.onConnectionDetailsUpdate(r,t),p.emit("update",new f.a(c,c,null,e))}))})),s.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new f.a(c,c,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),u)if(u.messageQueue.count()>0&&l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+u.transport.shortName+", new one is "+t.shortName+") finishing with "+u.messageQueue.count()+" messages still pending"),u.transport===t){var h="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.activateTransport()",h),y.a.report("error",h,"transport-previously-active")}else u.finish();return i.a.safeArrForEach(this.pendingTransports,(function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+(new Error).stack;l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.activateTransport()",n),y.a.report("error",n,"transport-activating-pending"),i.a.arrDeleteValue(p.pendingTransports,t)}else e.disconnect()})),i.a.safeArrForEach(this.proposedTransports,(function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+(new Error).stack;l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.activateTransport()",n),y.a.report("error",n,"transport-activating-proposed"),i.a.arrDeleteValue(p.proposedTransports,t)}else e.dispose()})),!0},C.prototype.deactivateTransport=function(e,t,n){var r=this.activeProtocol,o=r&&r.getTransport()===e,a=i.a.arrDeleteValue(this.pendingTransports,e),s=i.a.arrDeleteValue(this.proposedTransports,e),c=this.noTransportsScheduledForActivation();if(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":a?"; was pending":s?"; was proposed":"")+(c?"":"; another transport is scheduled for activation")),n&&n.message&&l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),i.a.nextTick((function(){r.clearPendingMessages()})),this.activeProtocol=this.host=null,clearTimeout(this.channelResumeCheckTimer)),this.emit("transport.inactive",e),o&&c||o&&"failed"===t||"closed"===t||null===r&&a&&0===this.pendingTransports.length){if("disconnected"===t&&n&&n.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});var u="failed"===t&&h.a.isTokenErr(n)?"disconnected":t;this.notifyState({state:u,error:n})}else o&&"disconnected"===t&&this.state!==this.states.synchronizing&&(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:n}))},C.prototype.noTransportsScheduledForActivation=function(){return i.a.isEmpty(this.pendingTransports)||this.pendingTransports.every((function(e){return!e.isConnected}))},C.prototype.sync=function(e,t,n){var i=setTimeout((function(){e.off("sync"),n(new p.a("Timeout waiting for sync response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout),o=r.a.fromValues({action:k.SYNC,connectionKey:this.connectionKey});t.timeSerial?o.timeSerial=t.timeSerial:void 0!==t.connectionSerial&&(o.connectionSerial=t.connectionSerial),e.send(o),e.once("sync",(function(e,t){clearTimeout(i),n(null,e,t)}))},C.prototype.setConnection=function(e,t,n,r){var o=this,a=this.connectionid,s=a&&a!==e;(s||!a&&r)&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0),this.connectionId!==e?(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),i.a.nextTick((function(){o.realtime.channels.reattach()}))):this.options.checkChannelsOnResume&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.setConnection()","Same connectionId; checkChannelsOnResume is enabled"),clearTimeout(this.channelResumeCheckTimer),this.realtime.channels.resetAttachedMsgIndicators(),this.channelResumeCheckTimer=setTimeout((function(){o.realtime.channels.checkAttachedMsgIndicators(e)}),3e4)),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey;var c=s||!a;this.setConnectionSerial(n,c)},C.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.clearConnectionSerial(),this.msgSerial=0,this.unpersistConnection()},C.prototype.setConnectionSerial=function(e,t){var n=e.timeSerial,r=e.connectionSerial;if(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.setConnectionSerial()","Updating connection serial; serial = "+r+"; timeSerial = "+n+"; force = "+t+"; previous = "+this.connectionSerial),void 0!==n)return n<=this.timeSerial&&!t?(l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.setConnectionSerial()","received message with timeSerial "+n+", but current timeSerial is "+this.timeSerial+"; assuming message is a duplicate and discarding it"),!0):(this.realtime.connection.timeSerial=this.timeSerial=n,void this.setRecoveryKey());if(void 0!==r){if(r<=this.connectionSerial&&!t)return l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.setConnectionSerial()","received message with connectionSerial "+r+", but current connectionSerial is "+this.connectionSerial+"; assuming message is a duplicate and discarding it"),!0;this.realtime.connection.serial=this.connectionSerial=r,this.setRecoveryKey()}},C.prototype.clearConnectionSerial=function(){this.realtime.connection.serial=this.connectionSerial=void 0,this.realtime.connection.timeSerial=this.timeSerial=void 0,this.clearRecoveryKey()},C.prototype.setRecoveryKey=function(){this.realtime.connection.recoveryKey=this.connectionKey+":"+(this.timeSerial||this.connectionSerial)+":"+this.msgSerial},C.prototype.clearRecoveryKey=function(){this.realtime.connection.recoveryKey=null},C.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=i.a.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended",this.states.connecting.queueEvents=!1)}},C.prototype.persistConnection=function(){if(n){var t=this.realtime.connection.recoveryKey;t&&(r={recoveryKey:t,disconnectedAt:i.a.now(),location:e.location,clientId:this.realtime.auth.clientId},this.connectionStateTtl,n&&b.a.setSession(R,r))}var r},C.prototype.unpersistConnection=function(){n&&b.a.removeSession(R)},C.prototype.getError=function(){return this.errorReason||this.getStateError()},C.prototype.getStateError=function(){return d.a[this.state.state]},C.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},C.prototype.enactStateChange=function(e){var t="failed"===e.current?l.a.LOG_ERROR:l.a.LOG_MAJOR;l.a.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var n=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(n.terminal||"suspended"===n.state)&&this.clearConnection(),this.emit("connectionstate",e)},C.prototype.startTransitionTimer=function(e){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer));var t=this;this.transitionTimer=setTimeout((function(){t.transitionTimer&&(t.transitionTimer=null,l.a.logAction(l.a.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))}),e.retryDelay)},C.prototype.cancelTransitionTimer=function(){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},C.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout((function(){e.suspendTimer&&(e.suspendTimer=null,l.a.logAction(l.a.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.states.connecting.queueEvents=!1,e.notifyState({state:"suspended"}))}),this.connectionStateTtl))},C.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},C.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.states.connecting.queueEvents=!0,this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},C.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout((function(){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})}),e)},C.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},C.prototype.notifyState=function(e){var t=e.state,n=this,r="disconnected"===t&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&h.a.isTokenErr(e.error)&&!(this.errorReason&&h.a.isTokenErr(this.errorReason)));if(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+t+(r?"; will retry connection immediately":"")),t!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),!this.state.terminal)){var o=this.states[e.state],a=new f.a(this.state.state,o.state,o.retryDelay,e.error||d.a[o.state]);if(r){var s=function(){n.state===n.states.disconnected&&(n.lastAutoReconnectAttempt=i.a.now(),n.requestState({state:"connecting"}))},c=this.lastAutoReconnectAttempt&&i.a.now()-this.lastAutoReconnectAttempt+1;c&&c<1e3?(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+c+"ms ago, waiting another "+(1e3-c)+"ms before trying again"),setTimeout(s,1e3-c)):i.a.nextTick(s)}else"disconnected"!==t&&"suspended"!==t||this.startRetryTimer(o.retryDelay);("disconnected"===t&&!r||"suspended"===t||o.terminal)&&i.a.nextTick((function(){n.disconnectAllTransports()})),"connected"!=t||this.activeProtocol||l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(a),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(t,a.reason),this.failQueuedMessages(a.reason))}},C.prototype.requestState=function(e){var t=e.state,n=this;if(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+t+"; current state: "+this.state.state),t!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(t),!("connecting"==t&&"connected"==this.state.state||"closing"==t&&"closed"==this.state.state))){var r=this.states[t],o=new f.a(this.state.state,r.state,null,e.error||d.a[r.state]);this.enactStateChange(o),"connecting"==t&&i.a.nextTick((function(){n.startConnect()})),"closing"==t&&this.closeImpl()}},C.prototype.startConnect=function(){if(this.state===this.states.connecting){var e=this.realtime.auth,t=this,n=++this.connectCounter,r=function(){t.checkConnectionStateFreshness(),t.getTransportParams((function(e){n===t.connectCounter&&t.connectImpl(e,n)}))};if(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===e.method)r();else{var i=function(e){n===t.connectCounter&&(e?t.actOnErrorFromAuthorize(e):r())};this.errorReason&&h.a.isTokenErr(this.errorReason)?e._forceNewToken(null,null,i):e._ensureValidAuthCredentials(!1,i)}}else l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state)},C.prototype.connectImpl=function(e,t){var n=this.state.state;n!==this.states.connecting.state&&n!==this.states.connected.state?l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+n):this.pendingTransports.length?l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):n==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e):this.connectBase(e,t)},C.prototype.connectPreference=function(e){var t=this.getTransportPreference(),n=this,r=!1;i.a.arrIn(this.transports,t)||(this.unpersistTransportPreference(),this.connectImpl(e)),l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+t);var o=setTimeout((function(){r=!0,n.state.state!==n.states.connected.state&&(l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+t+" failed; clearing preference and trying from scratch"),n.disconnectAllTransports(),n.unpersistTransportPreference()),n.connectImpl(e)}),this.options.timeouts.preferenceConnectTimeout);e.host=n.httpHosts[0],n.tryATransport(e,t,(function(t,a){clearTimeout(o),r&&a?(a.off(),a.disconnect(),i.a.arrDeleteValue(this.pendingTransports,a)):a||t||(n.unpersistTransportPreference(),n.connectImpl(e))}))},C.prototype.connectBase=function(e,t){var n=this,r=function(e){n.notifyState({state:n.states.connecting.failState,error:e})},o=this.httpHosts.slice(),a=function(e,r){t===n.connectCounter&&(r||e||c())};l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var s=o.shift();if(s){if(e.host=s,this.forceFallbackHost&&o.length)return this.forceFallbackHost=!1,void c();this.tryATransport(e,this.baseTransport,a)}else r(new p.a("Unable to connect (no available host)",80003,404));function c(){o.length?v.a.checkConnectivity((function(s,c){t===n.connectCounter&&(s?r(s):c?(e.host=i.a.arrPopRandomElement(o),n.tryATransport(e,n.baseTransport,a)):r(new p.a("Unable to connect (network unreachable)",80003,404)))})):r(new p.a("Unable to connect (and no more fallback hosts to try)",80003,404))}},C.prototype.getUpgradePossibilities=function(){var e=this.activeProtocol.getTransport().shortName,t=i.a.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},C.prototype.upgradeIfNeeded=function(e){var t=this.getUpgradePossibilities(),n=this;l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+i.a.inspect(t)),t.length&&i.a.arrForEach(t,(function(t){var r=n.createTransportParams(e.host,"upgrade");n.tryATransport(r,t,_)}))},C.prototype.closeImpl=function(){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),i.a.safeArrForEach(this.pendingTransports,(function(e){l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()})),i.a.safeArrForEach(this.proposedTransports,(function(e){l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.activeProtocol&&(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},C.prototype.onAuthUpdated=function(e,t){var n=this;switch(this.state.state){case"connected":if(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&n.state!==n.states.synchronizing){this.disconnectAllTransports(!0);var o=this.activeProtocol.getTransport().params;i.a.nextTick((function(){"connected"===n.state.state&&n.upgradeIfNeeded(o)}))}this.activeProtocol.getTransport().onAuthUpdated(e);var a=r.a.fromValues({action:k.AUTH,auth:{accessToken:e.token}});this.send(a);var s=function(){n.off(c),t(null,e)},c=function(e){"failed"===e.current&&(n.off(s),n.off(c),t(e.reason||n.getStateError()))};this.once("connectiondetails",s),this.on("connectionstate",c);break;case"connecting":l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var u=function(r){switch(r.current){case"connected":n.off(u),t(null,e);break;case"failed":case"closed":case"suspended":n.off(u),t(r.reason||n.getStateError())}};n.on("connectionstate",u),"connecting"===this.state.state?n.startConnect():n.requestState({state:"connecting"})}},C.prototype.disconnectAllTransports=function(e){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),this.connectCounter++,i.a.safeArrForEach(this.pendingTransports,(function(e){l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()})),this.pendingTransports=[],i.a.safeArrForEach(this.proposedTransports,(function(e){l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.proposedTransports=[],this.activeProtocol&&!e&&(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},C.prototype.send=function(e,t,n){n=n||_;var i=this.state;if(i.sendEvents)return l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new E(e,n));if(!(t&&i.queueEvents||i.forceQueueEvents)){var o="rejecting event, queueEvent was "+t+", state was "+i.state;return l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.send()",o),void n(this.errorReason||new p.a(o,9e4,400))}l.a.shouldLog(l.a.LOG_MICRO)&&l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+r.a.stringify(e)),this.queue(e,n)},C.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++,this.setRecoveryKey());try{this.activeProtocol.send(e)}catch(e){l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}},C.prototype.queue=function(e,t){l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.queue()","queueing event");var n=this.queuedMessages.last(),r=this.options.maxMessageSize;n&&!n.sendAttempted&&function(e,t,n){var r;if(e.channel!==t.channel)return!1;if((r=e.action)!==k.PRESENCE&&r!==k.MESSAGE)return!1;if(r!==t.action)return!1;var o=r===k.PRESENCE?"presence":"messages",a=e[o].concat(t[o]);return!(m.a.getMessagesSize(a)>n||!i.a.allSame(a,"clientId")||!i.a.arrEvery(a,(function(e){return!e.id}))||(e[o]=a,0))}(n.message,e,r)?(n.merged||(n.callback=Object(g.a)([n.callback]),n.merged=!0),n.callback.push(t)):this.queuedMessages.push(new E(e,t))},C.prototype.sendQueuedMessages=function(){var e;for(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},C.prototype.queuePendingMessages=function(e){e&&e.length&&(l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},C.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+i.a.inspectError(e)),this.queuedMessages.completeAllMessages(e))},C.prototype.onChannelMessage=function(e,t){var n=this.activeProtocol&&t===this.activeProtocol.getTransport(),o=i.a.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing,a=e.action===k.MESSAGE||e.action===k.PRESENCE;if(n||o){if(a){if(this.setConnectionSerial(e))return;if(r.a.isDuplicate(e,this.mostRecentMsg))return void l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.onChannelMessage()","received message with different connectionSerial, but same message id as a previous; discarding; id = "+e.id);this.mostRecentMsg=e}this.realtime.channels.onChannelMessage(e)}else i.a.arrIndexOf([k.ACK,k.NACK,k.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):l.a.logAction(l.a.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},C.prototype.ping=function(e,t){if(e){l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var n=i.a.now(),r=i.a.cheapRandStr(),o=function(s){if(s===r){e.off("heartbeat",o),clearTimeout(a);var c=i.a.now()-n;t(null,c)}},a=setTimeout((function(){e.off("heartbeat",o),t(new p.a("Timeout waiting for heartbeat response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout);return e.on("heartbeat",o),void e.ping(r)}if("connected"===this.state.state){var s=!1,c=this,u=function(){s||(s=!0,i.a.nextTick((function(){c.ping(null,t)})))};this.on("transport.active",u),this.ping(this.activeProtocol.getTransport(),(function(e,n){c.off("transport.active",u),s||(s=!0,t(e,n))}))}else t(new p.a("Unable to ping service; not connected",4e4,400))},C.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},C.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},C.prototype.getTransportPreference=function(){return this.transportPreference||t&&b.a.get(x)},C.prototype.persistTransportPreference=function(e){i.a.arrIn(a.a.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,t&&b.a.set(x,e.shortName))},C.prototype.unpersistTransportPreference=function(){this.transportPreference=null,t&&b.a.remove(x)},C.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(403===e.statusCode){var t="Client configured authentication provider returned 403; failing the connection";l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new p.a(t,80019,403,e)})}else t="Client configured authentication provider request failed",l.a.logAction(l.a.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new p.a(t,80019,401,e)})},C.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var n=e.clientId;if(n){var r=this.realtime.auth._uncheckedSetClientId(n);if(r)return l.a.logAction(l.a.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",r.message),void t.fail(r)}var i=e.connectionStateTtl;i&&(this.connectionStateTtl=i),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},C}();t.a=k}).call(this,n(17))},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(0),a=function(){function e(){i.a.call(this),this.messages=[]}return r.a.inherits(e,i.a),e.prototype.count=function(){return this.messages.length},e.prototype.push=function(e){this.messages.push(e)},e.prototype.shift=function(){return this.messages.shift()},e.prototype.last=function(){return this.messages[this.messages.length-1]},e.prototype.copyAll=function(){return this.messages.slice()},e.prototype.append=function(e){this.messages.push.apply(this.messages,e)},e.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},e.prototype.completeMessages=function(e,t,n){o.a.logAction(o.a.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),n=n||null;var r=this.messages,i=r[0];if(i){var a=i.message.msgSerial,s=e+t;if(s>a)for(var c=r.splice(0,s-a),u=0;u<c.length;u++)c[u].callback(n);0==r.length&&this.emit("idle")}},e.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},e.prototype.clear=function(){o.a.logAction(o.a.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},e}();t.a=a},function(e,t,n){"use strict";(function(e){var r=n(1),i=n(7),o=n(3),a=n(2),s=n(6),c=n(0),u=n(4),l=n(5),f=n(35),d=function(){var t=function(){},n=0,d={},p=void 0!==e&&e.XDomainRequest;function h(e,t,o,a,s,c,u){var l,f;i.a.call(this),(o=o||{}).rnd=r.a.cheapRandStr(),p&&(l=(f=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/))&&Number(f[1]))&&10===l&&!o.envelope&&(o.envelope="json"),this.uri=e+r.a.toQueryString(o),this.headers=t||{},this.body=a,this.method=u?u.toUpperCase():r.a.isEmptyArg(a)?"GET":"POST",this.requestMode=s,this.timeouts=c,this.timedOut=!1,this.requestComplete=!1,d[this.id=String(++n)]=this}r.a.inherits(h,i.a);var v=h.createRequest=function(e,t,n,i,o,a,s){return a=a||u.a.TIMEOUTS,new h(e,t,r.a.copy(n),i,o,a,s)};return h.prototype.complete=function(e,t,n,r,i){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,i),this.dispose())},h.prototype.abort=function(){this.dispose()},h.prototype.exec=function(){var e=0==this.requestMode?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,t=this,n=this.timer=setTimeout((function(){t.timedOut=!0,u.abort()}),e),i=this.body,o=this.method,s=this.headers,u=this.xhr=new XMLHttpRequest,f=s.accept,d="text";for(var p in f?0===f.indexOf("application/x-msgpack")&&(d="arraybuffer"):s.accept="application/json",i&&(s["content-type"]||(s["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof i&&(i=JSON.stringify(i)),u.open(o,this.uri,!0),u.responseType=d,"authorization"in s&&(u.withCredentials=!0),s)u.setRequestHeader(p,s[p]);var h=function(e,n,r,i){var o=n+" (event type: "+e.type+")"+(t.xhr.statusText?", current statusText is "+t.xhr.statusText:"");c.a.logAction(c.a.LOG_ERROR,"Request.on"+e.type+"()",o),t.complete(new a.a(o,r,i))};u.onerror=function(e){h(e,"XHR error occurred",null,400)},u.onabort=function(e){t.timedOut?h(e,"Request aborted due to request timeout expiring",null,408):h(e,"Request cancelled",null,400)},u.ontimeout=function(e){h(e,"Request timed out",null,408)};var v,m,g,y,b=0,w=!1;function S(){for(var e,t,n=(g=u.responseText).length-1;b<n&&(e=g.indexOf("\n",b))>-1;)t=g.slice(b,e),b=e+1,k(t)}function k(e){try{e=JSON.parse(e)}catch(e){return void t.complete(new a.a("Malformed response body from server: "+e.message,null,400))}t.emit("data",e)}u.onreadystatechange=function(){var e=u.readyState;e<3||0!==u.status&&(void 0===m&&(1223===(m=u.status)&&(m=204),clearTimeout(n),y=m<400,204!=m?v=3==t.requestMode&&y&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(u):t.complete(null,null,null,null,m)),3==e&&v?S():4==e&&(v?(S(),t.streamComplete=!0,r.a.nextTick((function(){t.complete()}))):function(){try{var e,n,i=function(e,t){return e.getResponseHeader&&e.getResponseHeader("content-type")}(u);(i?i.indexOf("application/json")>=0:"text"==u.responseType)?((n="arraybuffer"===u.responseType?l.a.utf8Decode(u.response):String(u.responseText)).length&&(n=JSON.parse(n)),w=!0):n=u.response,void 0!==n.response?(m=n.statusCode,y=m<400,e=n.headers,n=n.response):e=function(e){for(var t=r.a.trim(e.getAllResponseHeaders()).split("\r\n"),n={},i=0;i<t.length;i++){var o=r.a.arrMap(t[i].split(":"),r.a.trim);n[o[0].toLowerCase()]=o[1]}return n}(u)}catch(e){return void t.complete(new a.a("Malformed response body from server: "+e.message,null,400))}if(y||r.a.isArray(n))t.complete(null,n,e,w,m);else{var o=function(e,t){if(r.a.arrIn(r.a.allToLowerCase(r.a.keysArray(t)),"x-ably-errorcode"))return e.error&&a.a.fromValues(e.error)}(n,e);o||(o=new a.a("Error response received from server: "+m+" body was: "+r.a.inspect(n),null,m)),t.complete(o,n,e,w,m)}}()))},u.send(i)},h.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=t,this.xhr=null;var n=this.timer;n&&(clearTimeout(n),this.timer=null),this.requestComplete||e.abort()}delete d[this.id]},o.a.xhrSupported&&("object"==typeof f.a&&f.a.addUnloadListener((function(){for(var e in d)d[e].dispose()})),void 0!==s.a&&(s.a.supportsAuthHeaders=!0,s.a.Request=function(e,t,n,r,i,o,a){var s=v(n,r,i,o,0,t&&t.options.timeouts,e);return s.once("complete",a),s.exec(),s},s.a.checkConnectivity=function(e){var t=u.a.internetUpUrl;c.a.logAction(c.a.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),s.a.getUri(null,t,null,null,(function(t,n){var r=!t&&"yes"==n.replace(/\n/,"");c.a.logAction(c.a.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+r),e(null,r)}))})),h}();t.a=d}).call(this,n(17))},function(e,t,n){var r;e.exports=(r=n(12),n(10),n(47),n(18),n(37),n(36),n(29),n(30),n(31),n(48),n(49),r)},function(e,t,n){var r,i,o;e.exports=(i=(r=n(12)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(12),n(37),n(29),o=(i=(r=l).lib).Base,a=i.WordArray,c=(s=r.algo).MD5,u=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,c=r.keySize,u=r.iterations;s.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},l.EvpKDF)},function(e,t,n){var r,i,o,a,s,c,u,l,f,d,p,h,v,m,g,y,b,w,S;e.exports=(r=n(12),n(30),void(r.lib.Cipher||(i=r,o=i.lib,a=o.Base,s=o.WordArray,c=o.BufferedBlockAlgorithm,u=i.enc,u.Utf8,l=u.Base64,f=i.algo.EvpKDF,d=o.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),o.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=i.mode={},h=o.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),v=p.CBC=function(){var e=h.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var c=s.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=d.extend({cfg:d.cfg.extend({mode:v,padding:m}),reset:function(){var e;d.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),g=o.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?s.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=s.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},b=o.SerializableCipher=a.extend({cfg:a.extend({format:y}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=(i.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=s.random(8));var i=f.create({keySize:t+n}).compute(e,r),o=s.create(i.words.slice(t),4*n);return i.sigBytes=4*t,g.create({key:i,iv:o,salt:r})}},S=o.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:w}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}}))))},function(e,t,n){e.exports=n(12).enc.Hex},function(e,t,n){e.exports=n(12).enc.Utf8},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(7),a=n(0),s=n(26),c=n(2),u=function(){var e=r.a.Action;function t(e){o.a.call(this),this.transport=e,this.messageQueue=new s.a;var t=this;e.on("ack",(function(e,n){t.onAck(e,n)})),e.on("nack",(function(e,n,r){t.onNack(e,n,r)}))}return i.a.inherits(t,o.a),t.prototype.onAck=function(e,t){a.a.logAction(a.a.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,n){a.a.logAction(a.a.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+i.a.inspectError(n)),n||(n=new c.a("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,n)},t.prototype.onceIdle=function(e){var t=this.messageQueue;0!==t.count()?t.once("idle",e):e()},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),a.a.shouldLog(a.a.LOG_MICRO)&&a.a.logAction(a.a.LOG_MICRO,"Protocol.send()","sending msg; "+r.a.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle((function(){e.disconnect()}))},t.PendingMessage=function(t,n){this.message=t,this.callback=n,this.merged=!1;var r=t.action;this.sendAttempted=!1,this.ackRequired=r==e.MESSAGE||r==e.PRESENCE},t}();t.a=u},function(e,t,n){"use strict";(function(e){var n=function(){function t(){}return t.addListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,(function(){n.apply(e,arguments)}))},t.removeListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,(function(){n.apply(e,arguments)}))},t.addMessageListener=function(e,n){t.addListener(e,"message",n)},t.removeMessageListener=function(e,n){t.removeListener(e,"message",n)},t.addUnloadListener=function(n){t.addListener(e,"unload",n)},t}();t.a=n}).call(this,n(17))},function(e,t,n){var r;e.exports=(r=n(12),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],d=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var h=u[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[p]=v+u[p-7]+g+u[p-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[p]+u[p];d=f,f=l,l=s,s=a+w|0,a=o,o=i,i=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(i=(r=l=n(12)).lib,o=i.WordArray,a=i.Hasher,s=r.algo,c=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+s+c[u];f+=u<20?1518500249+(i&o|~i&a):u<40?1859775393+(i^o^a):u<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),l.SHA1)},function(e){e.exports=JSON.parse('{"a":"1.2.15"}')},function(e,t,n){var r;e.exports=(r=n(12),n(36),n(29),r.HmacSHA256)},function(e,t,n){"use strict";(function(e){var r=n(1),i=n(15),o=n(3),a=n(7),s=n(6),c=n(2),u=n(4),l=n(0);t.a=function(t){var n=function(){},f=e._ablyjs_jsonp={};f._=function(e){return f["_"+e]||n};var d=1,p=null;function h(e,t,n){n.stream=!1,i.a.call(this,e,t,n),this.shortName="jsonp"}r.a.inherits(h,i.a),h.isAvailable=function(){return o.a.jsonpSupported&&o.a.allowComet},h.isAvailable()&&(t.supportedTransports.jsonp=h),o.a.jsonpSupported&&(p=document.getElementsByTagName("head")[0]);var v=null;e.JSONPTransport=h,h.tryConnect=function(e,t,n,r){var i=new h(e,t,n),o=function(e){r({event:this.event,error:e})};i.on(["failed","disconnected"],o),i.on("preconnect",(function(){l.a.logAction(l.a.LOG_MINOR,"JSONPTransport.tryConnect()","viable transport "+i),i.off(["failed","disconnected"],o),r(null,i)})),i.connect()},h.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected};var m=h.prototype.createRequest=function(e,t,n,i,o,a,s){return a=this&&this.timeouts||a||u.a.TIMEOUTS,new g(void 0,e,t,r.a.copy(n),i,o,a,s)};function g(e,t,n,i,o,s,c,u){a.a.call(this),void 0===e&&(e=d++),this.id=e,this.uri=t,this.params=i||{},this.params.rnd=r.a.cheapRandStr(),n&&(n["X-Ably-Version"]&&(this.params.v=n["X-Ably-Version"]),n["Ably-Agent"]&&(this.params.agent=n["Ably-Agent"])),this.body=o,this.method=u,this.requestMode=s,this.timeouts=c,this.requestComplete=!1}return r.a.inherits(g,a.a),g.prototype.exec=function(){var e=this.id,t=this.body,n=this.method,o=this.uri,a=this.params,s=this;a.callback="_ablyjs_jsonp._("+e+")",a.envelope="jsonp",t&&(a.body=t),n&&"get"!==n&&(a.method=n);var u=this.script=document.createElement("script"),d=o+r.a.toQueryString(a);u.src=d,u.src.split("/").slice(-1)[0]!==d.split("/").slice(-1)[0]&&l.a.logAction(l.a.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),u.async=!0,u.type="text/javascript",u.charset="UTF-8",u.onerror=function(e){s.complete(new c.a("JSONP script error (event: "+r.a.inspect(e)+")",null,400))},f["_"+e]=function(e){if(e.statusCode){var t=e.response;if(204==e.statusCode)s.complete(null,null,null,e.statusCode);else if(t)if(e.statusCode<400||r.a.isArray(t))s.complete(null,t,e.headers,e.statusCode);else{var n=t.error||new c.a("Error response received from server",null,e.statusCode);s.complete(n)}else s.complete(new c.a("Invalid server response: no envelope detected",null,500))}else s.complete(null,e)};var h=this.requestMode==i.a.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout((function(){s.abort()}),h),p.insertBefore(u,p.firstChild)},g.prototype.complete=function(e,t,n,r){var i;n=n||{},this.requestComplete||(this.requestComplete=!0,t&&(i="string"==typeof t?"text/plain":"application/json",n["content-type"]=i,this.emit("data",t)),this.emit("complete",e,t,n,!0,r),this.dispose())},g.prototype.abort=function(){this.dispose()},g.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete f[this.id],this.emit("disposed")},o.a.jsonpSupported&&!s.a.Request&&(s.a.Request=function(e,t,n,o,a,s,c){var u=m(n,o,a,s,i.a.REQ_SEND,t&&t.options.timeouts,e);return u.once("complete",c),r.a.nextTick((function(){u.exec()})),u},s.a.checkConnectivity=function(e){var t=u.a.jsonpInternetUpUrl;if(v)v.push(e);else{v=[e],l.a.logAction(l.a.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+t);var n=new g("isTheInternetUp",t,null,null,null,i.a.REQ_SEND,u.a.TIMEOUTS);n.once("complete",(function(e,t){var n=!e&&t;l.a.logAction(l.a.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+n);for(var r=0;r<v.length;r++)v[r](null,n);v=null})),r.a.nextTick((function(){n.exec()}))}}),h}}).call(this,n(17))},function(e,t,n){"use strict";var r=n(3),i=n(1),o=n(20),a=n(4),s=n(0),c=n(8),u=n(2);t.a=function(e){var t=r.a.WebSocket;function n(e,t,n){this.shortName="web_socket",n.heartbeats=r.a.useProtocolHeartbeats,o.a.call(this,e,t,n),this.wsHost=a.a.getHost(n.options,n.host,!0)}return i.a.inherits(n,o.a),n.isAvailable=function(){return!!t},n.isAvailable()&&(e.supportedTransports.web_socket=n),n.tryConnect=function(e,t,r,i){var o=new n(e,t,r),a=function(e){i({event:this.event,error:e})};o.on(["failed","disconnected"],a),o.on("wsopen",(function(){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.tryConnect()","viable transport "+o),o.off(["failed","disconnected"],a),i(null,o)})),o.connect()},n.prototype.createWebSocket=function(e,n){return this.uri=e+i.a.toQueryString(n),new t(this.uri)},n.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},n.prototype.connect=function(){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.connect()","starting"),o.a.prototype.connect.call(this);var e=this,t=this.params,n=t.options,i=(n.tls?"wss://":"ws://")+this.wsHost+":"+a.a.getPort(n)+"/";s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.connect()","uri: "+i),this.auth.getAuthParams((function(n,o){if(!e.isDisposed){var a="";for(var c in o)a+=" "+c+": "+o[c]+";";if(s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+a+" err: "+n),n)e.disconnect(n);else{var u=t.getConnectParams(o);try{var l=e.wsConnection=e.createWebSocket(i,u);l.binaryType=r.a.binaryType,l.onopen=function(){e.onWsOpen()},l.onclose=function(t){e.onWsClose(t)},l.onmessage=function(t){e.onWsData(t.data)},l.onerror=function(t){e.onWsError(t)},l.on&&l.on("ping",(function(){e.onActivity()}))}catch(t){s.a.logAction(s.a.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}}}))},n.prototype.send=function(e){var t=this.wsConnection;if(t)try{t.send(c.a.serialize(e,this.params.format))}catch(e){var n="Exception from ws connection when trying to send: "+i.a.inspectError(e);s.a.logAction(s.a.LOG_ERROR,"WebSocketTransport.send()",n),this.finish("disconnected",new u.a(n,5e4,500))}else s.a.logAction(s.a.LOG_ERROR,"WebSocketTransport.send()","No socket connection")},n.prototype.onWsData=function(e){s.a.logAction(s.a.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(c.a.deserialize(e,this.format))}catch(e){s.a.logAction(s.a.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}},n.prototype.onWsOpen=function(){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("wsopen")},n.prototype.onWsClose=function(e){var t,n;if("object"==typeof e?(t=e.wasClean,n=e.code):t=1e3==(n=e),delete this.wsConnection,t){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var r=new u.a("Websocket closed",80003,400);this.finish("disconnected",r)}else{var i="Unclean disconnection of WebSocket ; code = "+n;r=new u.a(i,80003,400),s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.onWsClose()",i),this.finish("disconnected",r)}this.emit("disposed")},n.prototype.onWsError=function(e){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message);var t=this;i.a.nextTick((function(){t.disconnect(e)}))},n.prototype.dispose=function(){s.a.logAction(s.a.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,i.a.nextTick((function(){s.a.logAction(s.a.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),e.close()})))},n}},function(e,t,n){"use strict";var r=n(40),i=n(1),o=n(0),a=n(3),s=n(15),c=n(27);t.a=[r.a,function(e){var t="xhr_polling";function n(e,n,r){r.stream=!1,s.a.call(this,e,n,r),this.shortName=t}return i.a.inherits(n,s.a),n.isAvailable=function(){return a.a.xhrSupported&&a.a.allowComet},n.tryConnect=function(e,t,r,i){var a=new n(e,t,r),s=function(e){i({event:this.event,error:e})};a.on(["failed","disconnected"],s),a.on("preconnect",(function(){o.a.logAction(o.a.LOG_MINOR,"XHRPollingTransport.tryConnect()","viable transport "+a),a.off(["failed","disconnected"],s),i(null,a)})),a.connect()},n.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,i){return c.a.createRequest(e,t,n,r,i,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n},function(e){var t="xhr_streaming";function n(e,n,r){s.a.call(this,e,n,r),this.shortName=t}return i.a.inherits(n,s.a),n.isAvailable=function(){return a.a.xhrSupported&&a.a.streamingSupported&&a.a.allowComet},n.tryConnect=function(e,t,r,i){var a=new n(e,t,r),s=function(e){i({event:this.event,error:e})};a.on(["failed","disconnected"],s),a.on("preconnect",(function(){o.a.logAction(o.a.LOG_MINOR,"XHRStreamingTransport.tryConnect()","viable transport "+a),a.off(["failed","disconnected"],s),i(null,a)})),a.connect()},n.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,i){return c.a.createRequest(e,t,n,r,i,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n}]},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(44),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},d.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(17),n(45))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){},function(e,t,n){var r;e.exports=(r=n(12),function(){var e=r,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},function(e,t,n){var r,i,o,a;e.exports=(a=n(12),n(31),i=(r=a).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},a.format.Hex)},function(e,t,n){var r;e.exports=(r=n(12),n(18),n(50),n(30),n(31),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],a=[],s=[],c=[],u=[],l=[],f=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,i[n]=h,o[h]=n;var v=e[n],m=e[v],g=e[m],y=257*e[h]^16843008*h;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,c[n]=y<<8|y>>>24,u[n]=y,y=16843009*g^65537*m^257*v^16843008*n,l[h]=y<<24|y>>>8,f[h]=y<<16|y>>>16,d[h]=y<<8|y>>>24,p[h]=y,n?(n=v^e[e[e[g^v]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],v=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=t[a]:(u=o[a-1],a%n?n>6&&a%n==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=h[a/n|0]<<24),o[a]=o[a-n]^u);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var u=o[a];else u=o[a-4];s[c]=c<4||a<=4?u:l[i[u>>>24]]^f[i[u>>>16&255]]^d[i[u>>>8&255]]^p[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,d,p,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],p=4,h=1;h<c;h++){var v=r[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&d]^n[p++],m=r[l>>>24]^i[f>>>16&255]^o[d>>>8&255]^a[255&u]^n[p++],g=r[f>>>24]^i[d>>>16&255]^o[u>>>8&255]^a[255&l]^n[p++],y=r[d>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^n[p++];u=v,l=m,f=g,d=y}v=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[p++],m=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[p++],g=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[p++],y=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[p++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=t._createHelper(v)}(),r.AES)},function(e,t,n){var r;e.exports=(r=n(12),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],p=e[t+2],h=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],S=e[t+10],k=e[t+11],E=e[t+12],_=e[t+13],O=e[t+14],T=e[t+15],x=o[0],R=o[1],A=o[2],C=o[3];x=u(x,R,A,C,a,7,s[0]),C=u(C,x,R,A,c,12,s[1]),A=u(A,C,x,R,p,17,s[2]),R=u(R,A,C,x,h,22,s[3]),x=u(x,R,A,C,v,7,s[4]),C=u(C,x,R,A,m,12,s[5]),A=u(A,C,x,R,g,17,s[6]),R=u(R,A,C,x,y,22,s[7]),x=u(x,R,A,C,b,7,s[8]),C=u(C,x,R,A,w,12,s[9]),A=u(A,C,x,R,S,17,s[10]),R=u(R,A,C,x,k,22,s[11]),x=u(x,R,A,C,E,7,s[12]),C=u(C,x,R,A,_,12,s[13]),A=u(A,C,x,R,O,17,s[14]),x=l(x,R=u(R,A,C,x,T,22,s[15]),A,C,c,5,s[16]),C=l(C,x,R,A,g,9,s[17]),A=l(A,C,x,R,k,14,s[18]),R=l(R,A,C,x,a,20,s[19]),x=l(x,R,A,C,m,5,s[20]),C=l(C,x,R,A,S,9,s[21]),A=l(A,C,x,R,T,14,s[22]),R=l(R,A,C,x,v,20,s[23]),x=l(x,R,A,C,w,5,s[24]),C=l(C,x,R,A,O,9,s[25]),A=l(A,C,x,R,h,14,s[26]),R=l(R,A,C,x,b,20,s[27]),x=l(x,R,A,C,_,5,s[28]),C=l(C,x,R,A,p,9,s[29]),A=l(A,C,x,R,y,14,s[30]),x=f(x,R=l(R,A,C,x,E,20,s[31]),A,C,m,4,s[32]),C=f(C,x,R,A,b,11,s[33]),A=f(A,C,x,R,k,16,s[34]),R=f(R,A,C,x,O,23,s[35]),x=f(x,R,A,C,c,4,s[36]),C=f(C,x,R,A,v,11,s[37]),A=f(A,C,x,R,y,16,s[38]),R=f(R,A,C,x,S,23,s[39]),x=f(x,R,A,C,_,4,s[40]),C=f(C,x,R,A,a,11,s[41]),A=f(A,C,x,R,h,16,s[42]),R=f(R,A,C,x,g,23,s[43]),x=f(x,R,A,C,w,4,s[44]),C=f(C,x,R,A,E,11,s[45]),A=f(A,C,x,R,T,16,s[46]),x=d(x,R=f(R,A,C,x,p,23,s[47]),A,C,a,6,s[48]),C=d(C,x,R,A,y,10,s[49]),A=d(A,C,x,R,O,15,s[50]),R=d(R,A,C,x,m,21,s[51]),x=d(x,R,A,C,E,6,s[52]),C=d(C,x,R,A,h,10,s[53]),A=d(A,C,x,R,S,15,s[54]),R=d(R,A,C,x,c,21,s[55]),x=d(x,R,A,C,b,6,s[56]),C=d(C,x,R,A,T,10,s[57]),A=d(A,C,x,R,g,15,s[58]),R=d(R,A,C,x,_,21,s[59]),x=d(x,R,A,C,v,6,s[60]),C=d(C,x,R,A,k,10,s[61]),A=d(A,C,x,R,p,15,s[62]),R=d(R,A,C,x,w,21,s[63]),o[0]=o[0]+x|0,o[1]=o[1]+R|0,o[2]=o[2]+A|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function f(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(1),o=n(0),a=n(4),s=n(14),c=function(){function e(){this.id=void 0,this.deviceSecret=void 0,this.platform=void 0,this.formFactor=void 0,this.clientId=void 0,this.metadata=void 0,this.deviceIdentityToken=void 0,this.push={recipient:void 0,state:void 0,error:void 0}}return e.prototype.toJSON=function(){return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:this.push.recipient,state:this.push.state,error:this.push.error}}},e.prototype.toString=function(){var e="[DeviceDetails";return this.id&&(e+="; id="+this.id),this.platform&&(e+="; platform="+this.platform),this.formFactor&&(e+="; formFactor="+this.formFactor),this.clientId&&(e+="; clientId="+this.clientId),this.metadata&&(e+="; metadata="+this.metadata),this.deviceIdentityToken&&(e+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),this.push.recipient&&(e+="; push.recipient="+JSON.stringify(this.push.recipient)),this.push.state&&(e+="; push.state="+this.push.state),this.push.error&&(e+="; push.error="+JSON.stringify(this.push.error)),this.push.metadata&&(e+="; push.metadata="+this.push.metadata),e+"]"},e.toRequestBody=i.a.encodeBody,e.fromResponseBody=function(t,n){return n&&(t=i.a.decodeBody(t,n)),i.a.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&ErrorInfo.fromValues(t.error),i.a.mixin(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e}(),u=n(6),l=n(5),f=function(){var e=r.a.msgpack;function t(){}function n(e,t,n,r,o){u.a.supportsAuthHeaders?e.auth.getAuthHeaders((function(e,a){e?r(e):o(i.a.mixin(a,t),n)})):e.auth.getAuthParams((function(e,a){e?r(e):o(t,i.a.mixin(a,n))}))}function a(e){var t=[];if(e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function c(e,t){return e+(t?"?":"")+a(t)}return i.a.arrForEach(u.a.methodsWithoutBody,(function(e){t[e]=function(n,r,i,o,a,s){t.do(e,n,r,null,i,o,a,s)}})),i.a.arrForEach(u.a.methodsWithBody,(function(e){t[e]=function(n,r,i,o,a,s,c){t.do(e,n,r,i,o,a,s,c)}})),t.do=function(t,r,f,d,p,h,v,m){o.a.shouldLog(o.a.LOG_MICRO)&&(m=function(e,t,n,r){return function(s,u,f,d,p){s?o.a.logAction(o.a.LOG_MICRO,"Resource."+t+"()","Received Error; "+c(n,r)+"; Error: "+i.a.inspectError(s)):o.a.logAction(o.a.LOG_MICRO,"Resource."+t+"()","Received; "+c(n,r)+"; Headers: "+a(f)+"; StatusCode: "+p+"; Body: "+(l.a.isBuffer(u)?u.toString():u)),e&&e(s,u,f,d,p)}}(m,t,f,h)),v&&(m=m&&function(e,t){return function(n,r,o,a,s){if(!n||r){if(!a)try{r=i.a.decodeBody(r,t)}catch(t){return void e(t)}if(void 0!==r.statusCode){var c=r.statusCode,u=r.response,l=r.headers;if(c<200||c>=300){var f=u&&u.error||n;return f||((f=new Error("Error in unenveloping "+r)).statusCode=c),void e(f,u,l,!0,c)}e(n,u,l,!0,c)}else e(n,r,o,!0,s)}else e(n)}}(m,v),(h=h||{}).envelope=v),n(r,p,h,m,(function a(l,v){o.a.shouldLog(o.a.LOG_MICRO)&&o.a.logAction(o.a.LOG_MICRO,"Resource."+t+"()","Sending; "+c(f,v));var g=[r,f,l,d,v,function(e,t,i,o,c){e&&s.a.isTokenErr(e)?r.auth.authorize(null,null,(function(e){e?m(e):n(r,p,h,m,a)})):m(e,t,i,o,c)}];if(d||g.splice(3,1),o.a.shouldLog(o.a.LOG_MICRO)){var y=d;if((l["content-type"]||"").indexOf("msgpack")>0)try{y=e.decode(d)}catch(e){o.a.logAction(o.a.LOG_MICRO,"Resource."+t+"()","Sending MsgPack Decoding Error: "+i.a.inspectError(e))}o.a.logAction(o.a.LOG_MICRO,"Resource."+t+"()","Sending; "+c(f,v)+"; Body: "+y)}u.a[t].apply(this,g)}))},t}(),d=function(){function e(e,t,n,r,i,o){this.rest=e,this.path=t,this.headers=n,this.envelope=r,this.bodyHandler=i,this.useHttpPaginatedResponse=o||!1}function t(e,t,n){if(this.resource=e,this.items=t,n){var r=this;"first"in n&&(this.first=function(e){if(!e&&r.resource.rest.options.promises)return i.a.promisify(r,"first",[]);r.get(n.first,e)}),"current"in n&&(this.current=function(e){if(!e&&r.resource.rest.options.promises)return i.a.promisify(r,"current",[]);r.get(n.current,e)}),this.next=function(e){if(!e&&r.resource.rest.options.promises)return i.a.promisify(r,"next",[]);"next"in n?r.get(n.next,e):e(null,null)},this.hasNext=function(){return"next"in n},this.isLast=function(){return!this.hasNext()}}}function n(e,n,r,i,o,a){t.call(this,e,n,o),this.statusCode=i,this.success=i<300&&i>=200,this.headers=r,this.errorCode=a&&a.code,this.errorMessage=a&&a.message}return i.a.arrForEach(u.a.methodsWithoutBody,(function(t){e.prototype[t]=function(e,n){var r=this;f[t](r.rest,r.path,r.headers,e,r.envelope,(function(e,t,i,o,a){r.handlePage(e,t,i,o,a,n)}))}})),i.a.arrForEach(u.a.methodsWithBody,(function(t){e.prototype[t]=function(e,n,r){var i=this;f[t](i.rest,i.path,n,i.headers,e,i.envelope,(function(e,t,n,o,a){r&&i.handlePage(e,t,n,o,a,r)}))}})),e.prototype.handlePage=function(e,r,a,s,c,u){if(e&&function(e,t,n){return!(n&&(t||"number"==typeof e.code))}(e,r,this.useHttpPaginatedResponse))return o.a.logAction(o.a.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+i.a.inspectError(e)),void u(e);var l,f,d;try{l=this.bodyHandler(r,a,s)}catch(t){return void u(e||t)}a&&(f=a.Link||a.link)&&(d=function(e){"string"==typeof e&&(e=e.split(","));for(var t,n={},r=0;r<e.length;r++){var o=e[r].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(o){var a=(void 0,(t=o[1].match(/^\.\/(\w+)\?(.*)$/))&&i.a.parseQueryString(t[2]));a&&(n[o[2]]=a)}}return n}(f)),this.useHttpPaginatedResponse?u(null,new n(this,l,a,c,d,e)):u(null,new t(this,l,d))},t.prototype.get=function(e,t){var n=this.resource;f.get(n.rest,n.path,n.headers,e,n.envelope,(function(e,r,i,o,a){n.handlePage(e,r,i,o,a,t)}))},i.a.inherits(n,t),e}(),p=n(2),h=function(){function e(){this.channel=void 0,this.deviceId=void 0,this.clientId=void 0}return e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+"]"},e.toRequestBody=i.a.encodeBody,e.fromResponseBody=function(t,n){return n&&(t=i.a.decodeBody(t,n)),i.a.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return i.a.mixin(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e.fromValues(t[i]);return r},e}(),v=function(){var e=function(){};function t(e){this.rest=e,this.deviceRegistrations=new n(e),this.channelSubscriptions=new r(e)}function n(e){this.rest=e}function r(e){this.rest=e}return t.prototype.publish=function(t,n,r){var o=this.rest,a=o.options.useBinaryProtocol?"msgpack":"json",s=i.a.mixin({recipient:t},n),c=i.a.defaultPostHeaders(a),u={};if("function"!=typeof r){if(this.rest.options.promises)return i.a.promisify(this,"publish",arguments);r=e}o.options.headers&&i.a.mixin(c,o.options.headers),o.options.pushFullWait&&i.a.mixin(u,{fullWait:"true"}),s=i.a.encodeBody(s,a),f.post(o,"/push/publish",s,c,u,!1,(function(e){r(e)}))},n.prototype.save=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=c.fromValues(t),s=i.a.defaultPostHeaders(o),u={};if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"save",arguments);n=e}r.options.headers&&i.a.mixin(s,r.options.headers),r.options.pushFullWait&&i.a.mixin(u,{fullWait:"true"}),a=i.a.encodeBody(a,o),f.put(r,"/push/deviceRegistrations/"+encodeURIComponent(t.id),a,s,u,!1,(function(e,t,r,i){n(e,!e&&c.fromResponseBody(t,!i&&o))}))},n.prototype.get=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=i.a.defaultGetHeaders(o),s=t.id||t;if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"get",arguments);n=e}"string"==typeof s&&s.length?(r.options.headers&&i.a.mixin(a,r.options.headers),f.get(r,"/push/deviceRegistrations/"+encodeURIComponent(s),a,{},!1,(function(e,t,r,i){n(e,!e&&c.fromResponseBody(t,!i&&o))}))):n(new p.a("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400))},n.prototype.list=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=u.a.supportsLinkHeaders?void 0:o,s=i.a.defaultGetHeaders(o);if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"list",arguments);n=e}r.options.headers&&i.a.mixin(s,r.options.headers),new d(r,"/push/deviceRegistrations",s,a,(function(e,t,n){return c.fromResponseBody(e,!n&&o)})).get(t,n)},n.prototype.remove=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=i.a.defaultGetHeaders(o),s={},c=t.id||t;if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"remove",arguments);n=e}"string"==typeof c&&c.length?(r.options.headers&&i.a.mixin(a,r.options.headers),r.options.pushFullWait&&i.a.mixin(s,{fullWait:"true"}),f.delete(r,"/push/deviceRegistrations/"+encodeURIComponent(c),a,s,!1,(function(e){n(e)}))):n(new p.a("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400))},n.prototype.removeWhere=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=i.a.defaultGetHeaders(o);if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"removeWhere",arguments);n=e}r.options.headers&&i.a.mixin(a,r.options.headers),r.options.pushFullWait&&i.a.mixin(t,{fullWait:"true"}),f.delete(r,"/push/deviceRegistrations",a,t,!1,(function(e){n(e)}))},r.prototype.save=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=h.fromValues(t),s=i.a.defaultPostHeaders(o),c={};if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"save",arguments);n=e}r.options.headers&&i.a.mixin(s,r.options.headers),r.options.pushFullWait&&i.a.mixin(c,{fullWait:"true"}),a=i.a.encodeBody(a,o),f.post(r,"/push/channelSubscriptions",a,s,c,!1,(function(e,t,r,i){n(e,!e&&h.fromResponseBody(t,!i&&o))}))},r.prototype.list=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=u.a.supportsLinkHeaders?void 0:o,s=i.a.defaultGetHeaders(o);if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"list",arguments);n=e}r.options.headers&&i.a.mixin(s,r.options.headers),new d(r,"/push/channelSubscriptions",s,a,(function(e,t,n){return h.fromResponseBody(e,!n&&o)})).get(t,n)},r.prototype.removeWhere=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=i.a.defaultGetHeaders(o);if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"removeWhere",arguments);n=e}r.options.headers&&i.a.mixin(a,r.options.headers),r.options.pushFullWait&&i.a.mixin(t,{fullWait:"true"}),f.delete(r,"/push/channelSubscriptions",a,t,!1,(function(e){n(e)}))},r.prototype.remove=r.prototype.removeWhere,r.prototype.listChannels=function(t,n){var r=this.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=u.a.supportsLinkHeaders?void 0:o,s=i.a.defaultGetHeaders(o);if("function"!=typeof n){if(this.rest.options.promises)return i.a.promisify(this,"listChannels",arguments);n=e}r.options.headers&&i.a.mixin(s,r.options.headers),r.options.pushFullWait&&i.a.mixin(t,{fullWait:"true"}),new d(r,"/push/channels",s,a,(function(e,t,n){!n&&o&&(e=i.a.decodeBody(e,o));for(var r=0;r<e.length;r++)e[r]=String(e[r]);return e})).get(t,n)},function(e){this.rest=e,this.admin=new t(e)}}(),m=v,g=n(7),y=n(11),b=function(){function e(){}function t(e){this.channel=e,this.basePath=e.basePath+"/presence"}return i.a.inherits(t,g.a),t.prototype.get=function(t,n){if(o.a.logAction(o.a.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.channel.rest.options.promises)return i.a.promisify(this,"get",arguments);n=e}var r=this.channel.rest,a=r.options.useBinaryProtocol?"msgpack":"json",s=u.a.supportsLinkHeaders?void 0:a,c=i.a.defaultGetHeaders(a);r.options.headers&&i.a.mixin(c,r.options.headers);var l=this.channel.channelOptions;new d(r,this.basePath,c,s,(function(e,t,n){return y.a.fromResponseBody(e,l,!n&&a)})).get(t,n)},t.prototype.history=function(e,t){o.a.logAction(o.a.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(t,n){if(void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.channel.rest.options.promises)return i.a.promisify(this,"_history",arguments);n=e}var r=this.channel.rest,o=r.options.useBinaryProtocol?"msgpack":"json",a=u.a.supportsLinkHeaders?void 0:o,s=i.a.defaultGetHeaders(o);this.channel,r.options.headers&&i.a.mixin(s,r.options.headers);var c=this.channel.channelOptions;new d(r,this.basePath+"/history",s,a,(function(e,t,n){return y.a.fromResponseBody(e,c,!n&&o)})).get(t,n)},t}(),w=b,S=n(19),k=n(9),E=function(){function e(){}function t(e,t,n){o.a.logAction(o.a.LOG_MINOR,"Channel()","started; name = "+t),g.a.call(this),this.rest=e,this.name=t,this.basePath="/channels/"+encodeURIComponent(t),this.presence=new w(this),this.setOptions(n)}function n(e){return i.a.arrEvery(e,(function(e){return!e.id}))}return i.a.inherits(t,g.a),t.prototype.setOptions=function(e){if(this.channelOptions=e=e||{},e.cipher){if(!S.a)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=S.a.getCipher(e.cipher);e.cipher=t.cipherParams,e.channelCipher=t.cipher}else"cipher"in e&&(e.cipher=null,e.channelCipher=null)},t.prototype.history=function(t,n){if(o.a.logAction(o.a.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.rest.options.promises)return i.a.promisify(this,"history",arguments);n=e}this._history(t,n)},t.prototype._history=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?"msgpack":"json",o=u.a.supportsLinkHeaders?void 0:r,a=i.a.defaultGetHeaders(r);n.options.headers&&i.a.mixin(a,n.options.headers);var s=this.channelOptions;new d(n,this.basePath+"/messages",a,o,(function(e,t,n){return k.a.fromResponseBody(e,s,!n&&r)})).get(e,t)},t.prototype.publish=function(){var t,r,o=arguments.length,a=arguments[0],s=arguments[1],c=arguments[o-1],u=this;if("function"!=typeof c){if(this.rest.options.promises)return i.a.promisify(this,"publish",arguments);c=e}if("string"==typeof a||null===a)t=[k.a.fromValues({name:a,data:s})],r=arguments[2];else if(i.a.isObject(a))t=[k.a.fromValues(a)],r=arguments[1];else{if(!i.a.isArray(a))throw new p.a("The single-argument form of publish() expects a message object or an array of message objects",40013,400);t=k.a.fromValuesArray(a),r=arguments[1]}"object"==typeof r&&r||(r={});var l=this.rest,f=l.options,d=f.useBinaryProtocol?"msgpack":"json",h=l.options.idempotentRestPublishing,v=i.a.defaultPostHeaders(d);if(f.headers&&i.a.mixin(v,f.headers),h&&n(t)){var m=i.a.randomString(9);i.a.arrForEach(t,(function(e,t){e.id=m+":"+t.toString()}))}k.a.encodeArray(t,this.channelOptions,(function(e){if(e)c(e);else{var n=k.a.getMessagesSize(t),i=f.maxMessageSize;n>i?c(new p.a("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+i+" bytes)",40009,400)):u._publish(k.a.serialize(t,d),v,r,c)}}))},t.prototype._publish=function(e,t,n,r){f.post(this.rest,this.basePath+"/messages",e,t,n,!1,r)},t}(),_=E,O=function(){function e(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0}function t(t){var n=this;e.call(this,t),this.category=void 0,t&&t.category&&(this.category={},i.a.forInOwnNonNullProps(t.category,(function(r){n.category[r]=new e(t.category[r])})))}function n(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0}function r(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0}function o(e){this.plain=new n(e&&e.plain),this.tls=new n(e&&e.tls),this.all=new n(e&&e.all)}function a(e){this.messages=new t(e&&e.messages),this.presence=new t(e&&e.presence),this.all=new t(e&&e.all)}function s(e){this.realtime=new a(e&&e.realtime),this.rest=new a(e&&e.rest),this.webhook=new a(e&&e.webhook),this.sharedQueue=new a(e&&e.sharedQueue),this.externalQueue=new a(e&&e.externalQueue),this.httpEvent=new a(e&&e.httpEvent),this.push=new a(e&&e.push),this.all=new a(e&&e.all)}function c(e){this.all=new a(e&&e.all),this.inbound=new s(e&&e.inbound),this.outbound=new s(e&&e.outbound)}function u(e){this.all=new a(e&&e.all),this.producerPaid=new c(e&&e.producerPaid),this.consumerPaid=new c(e&&e.consumerPaid)}function l(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0}function f(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0}function d(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},i.a.forInOwnNonNullProps(e.delta,(function(n){t.delta[n]=new f(e.delta[n])})))}function p(e){c.call(this,e),this.persisted=new a(e&&e.persisted),this.connections=new o(e&&e.connections),this.channels=new n(e&&e.channels),this.apiRequests=new r(e&&e.apiRequests),this.tokenRequests=new r(e&&e.tokenRequests),this.xchgProducer=new u(e&&e.xchgProducer),this.xchgConsumer=new u(e&&e.xchgConsumer),this.push=new l(e&&e.pushStats),this.processed=new d(e&&e.processed),this.inProgress=e&&e.inProgress||void 0,this.unit=e&&e.unit||void 0,this.intervalId=e&&e.intervalId||void 0}return p.fromValues=function(e){return new p(e)},p}(),T=function(){var e=function(){},t=r.a.msgpack;function n(e){if(!(this instanceof n))return new n(e);if(!e){var t="no options provided";throw o.a.logAction(o.a.LOG_ERROR,"Rest()",t),new Error(t)}if((e=a.a.objectifyOptions(e)).log&&o.a.setLog(e.log.level,e.log.handler),o.a.logAction(o.a.LOG_MICRO,"Rest()","initialized with clientOptions "+i.a.inspect(e)),this.options=a.a.normaliseOptions(e),e.key){var r=e.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!r)throw t="invalid key parameter",o.a.logAction(o.a.LOG_ERROR,"Rest()",t),new Error(t);e.keyName=r[1],e.keySecret=r[2]}if("clientId"in e){if("string"!=typeof e.clientId&&null!==e.clientId)throw new p.a("clientId must be either a string or null",40012,400);if("*"===e.clientId)throw new p.a('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}o.a.logAction(o.a.LOG_MINOR,"Rest()","started; version = "+a.a.libstring),this.baseUri=this.authority=function(t){return a.a.getHttpScheme(e)+t+":"+a.a.getPort(e,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.auth=new s.a(this,e),this.channels=new c(this),this.push=new m(this)}function c(e){this.rest=e,this.all=Object.create(null)}return n.prototype.stats=function(t,n){if(void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.options.promises)return i.a.promisify(this,"stats",arguments);n=e}var r=i.a.defaultGetHeaders(),o=this.options.useBinaryProtocol?"msgpack":"json",a=u.a.supportsLinkHeaders?void 0:o;this.options.headers&&i.a.mixin(r,this.options.headers),new d(this,"/stats",r,a,(function(e,t,n){for(var r=n?e:JSON.parse(e),i=0;i<r.length;i++)r[i]=O.fromValues(r[i]);return r})).get(t,n)},n.prototype.time=function(t,n){if(void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.options.promises)return i.a.promisify(this,"time",arguments);n=e}var r=i.a.defaultGetHeaders();this.options.headers&&i.a.mixin(r,this.options.headers);var o=this,a=function(e){return o.authority(e)+"/time"};u.a.get(this,a,r,t,(function(e,t,r,a){if(e)n(e);else{a||(t=JSON.parse(t));var s=t[0];if(!s)return(e=new Error("Internal error (unexpected result type from GET /time)")).statusCode=500,void n(e);o.serverTimeOffset=s-i.a.now(),n(null,s)}}))},n.prototype.request=function(n,r,o,a,s,c){var l=this.options.useBinaryProtocol,f=l?t.encode:JSON.stringify,h=l?t.decode:JSON.parse,v=l?"msgpack":"json",m=u.a.supportsLinkHeaders?void 0:v;o=o||{};var g="get"==(n=n.toLowerCase())?i.a.defaultGetHeaders(v):i.a.defaultPostHeaders(v);if(void 0===c){if(this.options.promises)return i.a.promisify(this,"request",[n,r,o,a,s]);c=e}"string"!=typeof a&&(a=f(a)),this.options.headers&&i.a.mixin(g,this.options.headers),s&&i.a.mixin(g,s);var y=new d(this,r,g,m,(function(e,t,n){return i.a.ensureArray(n?e:h(e))}),!0);if(!i.a.arrIn(u.a.methods,n))throw new p.a("Unsupported method "+n,40500,405);i.a.arrIn(u.a.methodsWithBody,n)?y[n](o,a,c):y[n](o,c)},n.prototype.setLog=function(e){o.a.setLog(e.level,e.handler)},c.prototype.get=function(e,t){e=String(e);var n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new _(this.rest,e,t),n},c.prototype.release=function(e){delete this.all[String(e)]},n}();T.Promise=function(e){return(e=a.a.objectifyOptions(e)).promises=!0,new T(e)},T.Callbacks=T;var x=T,R=n(25),A=n(21),C=function(){function e(){}function t(e,t){g.a.call(this),this.ably=e,this.connectionManager=new R.a(e,t),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.serial=void 0,this.timeSerial=void 0,this.recoveryKey=void 0,this.errorReason=null;var n=this;this.connectionManager.on("connectionstate",(function(e){var t=n.state=e.current;i.a.nextTick((function(){n.emit(t,e)}))})),this.connectionManager.on("update",(function(e){i.a.nextTick((function(){n.emit("update",e)}))}))}return i.a.inherits(t,g.a),t.prototype.whenState=function(e,t){return g.a.prototype.whenState.call(this,e,this.state,t,new A.a(void 0,e))},t.prototype.connect=function(){o.a.logAction(o.a.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(t){if(o.a.logAction(o.a.LOG_MINOR,"Connection.ping()",""),!t){if(this.ably.options.promises)return i.a.promisify(this,"ping",arguments);t=e}this.connectionManager.ping(null,t)},t.prototype.close=function(){o.a.logAction(o.a.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},t}(),I=C,N=n(8),M=n(13),P=n(22),L=function(e,t,n,r){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n),r&&(this.reason=r)},D=function(){var e=function(){};function t(e){return e.clientId+":"+e.connectionId}function n(e){var t=e.channel.realtime,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}function r(e,t,n){switch(e.state){case"attached":case"suspended":n();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach((function(e){e?t(e):n()}));break;default:t(p.a.fromValues(j.invalidStateError(e.state)))}}function a(e,t){w.call(this,e),this.syncComplete=!1,this.members=new s(this),this._myMembers=new s(this),this.subscriptions=new g.a,this.pendingPresence=[]}function s(e){g.a.call(this),this.presence=e,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null}function c(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>t.timestamp;var n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}return i.a.inherits(a,w),a.prototype.enter=function(e,t){if(n(this))throw new p.a("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,e,"enter",t)},a.prototype.update=function(e,t){if(n(this))throw new p.a("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,e,"update",t)},a.prototype.enterClient=function(e,t,n){return this._enterOrUpdateClient(e,t,"enter",n)},a.prototype.updateClient=function(e,t,n){return this._enterOrUpdateClient(e,t,"update",n)},a.prototype._enterOrUpdateClient=function(t,n,r,a){if(!a)if("function"==typeof n)a=n,n=null;else{if(this.channel.realtime.options.promises)return i.a.promisify(this,"_enterOrUpdateClient",[t,n,r]);a=e}var s=this.channel;if(s.connectionManager.activeState()){o.a.logAction(o.a.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+s.name+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var c=y.a.fromValues({action:r,data:n});t&&(c.clientId=t);var u=this;y.a.encode(c,s.channelOptions,(function(e){if(e)a(e);else switch(s.state){case"attached":s.sendPresence(c,a);break;case"initialized":case"detached":s.attach();case"attaching":u.pendingPresence.push({presence:c,callback:a});break;default:(e=new p.a("Unable to "+r+" presence channel while in "+s.state+" state",90001)).code=90001,a(e)}}))}else a(s.connectionManager.getError())},a.prototype.leave=function(e,t){if(n(this))throw new p.a("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},a.prototype.leaveClient=function(t,n,r){if(!r)if("function"==typeof n)r=n,n=null;else{if(this.channel.realtime.options.promises)return i.a.promisify(this,"leaveClient",[t,n]);r=e}var a=this.channel;if(a.connectionManager.activeState()){o.a.logAction(o.a.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+t);var s=y.a.fromValues({action:"leave",data:n});switch(t&&(s.clientId=t),a.state){case"attached":a.sendPresence(s,r);break;case"attaching":this.pendingPresence.push({presence:s,callback:r});break;case"initialized":case"failed":r(new p.a("Unable to leave presence channel (incompatible state)",90001));break;default:r(M.a.failed)}}else r(a.connectionManager.getError())},a.prototype.get=function(){var t=Array.prototype.slice.call(arguments);1==t.length&&"function"==typeof t[0]&&t.unshift(null);var n=t[0],o=t[1],a=!n||!("waitForSync"in n)||n.waitForSync;if(!o){if(this.channel.realtime.options.promises)return i.a.promisify(this,"get",t);o=e}function s(e){o(null,n?e.list(n):e.values())}if("suspended"!==this.channel.state){var c=this;r(this.channel,o,(function(){var e=c.members;a?e.waitSync((function(){s(e)})):s(e)}))}else a?o(p.a.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):s(this.members)},a.prototype.history=function(t,n){if(o.a.logAction(o.a.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===n)if("function"==typeof t)n=t,t=null;else{if(this.channel.realtime.options.promises)return i.a.promisify(this,"history",arguments);n=e}t&&t.untilAttach&&("attached"===this.channel.state?(delete t.untilAttach,t.from_serial=this.channel.properties.attachSerial):n(new p.a("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),w.prototype._history.call(this,t,n)},a.prototype.setPresence=function(e,t,n){o.a.logAction(o.a.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);var r,i,a=this.members,s=this._myMembers,c=[],u=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(i=n.match(/^[\w\-]+:(.*)$/))&&(r=i[1]));for(var l=0;l<e.length;l++)switch((f=y.a.fromValues(e[l])).action){case"leave":a.remove(f)&&c.push(f),f.connectionId!==u||f.isSynthesized()||s.remove(f);break;case"enter":case"present":case"update":a.put(f)&&c.push(f),f.connectionId===u&&s.put(f)}for(t&&!r&&(a.endSync(),this._ensureMyMembersPresent(),this.channel.setInProgress(j.progressOps.sync,!1),this.channel.syncChannelSerial=null),l=0;l<c.length;l++){var f=c[l];this.subscriptions.emit(f.action,f)}},a.prototype.onAttached=function(e){o.a.logAction(o.a.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear(),this._ensureMyMembersPresent());var t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];var r=[],i=Object(P.a)();o.a.logAction(o.a.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(var a=0;a<n;a++){var s=t[a];r.push(s.presence),i.push(s.callback)}this.channel.sendPresence(r,i)}},a.prototype.actOnChannelState=function(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}},a.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+i.a.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(e){}this.pendingPresence=[]}},a.prototype._clearMyMembers=function(){this._myMembers.clear()},a.prototype._ensureMyMembersPresent=function(){var e=this,t=this.members,n=this._myMembers,r=function(t){if(t){var n="Presence auto-re-enter failed: "+t.toString(),r=new p.a(n,91004,400);o.a.logAction(o.a.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",n);var i=new L(e.channel.state,e.channel.state,!0,r);e.channel.emit("update",i)}};for(var i in n.map)if(!(i in t.map)){var a=n.map[i];o.a.logAction(o.a.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+a.clientId+'" into the presence set'),this._enterOrUpdateClient(a.clientId,a.data,"enter",r),delete n.map[i]}},a.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;i.a.arrForEach(e,(function(e){var n=y.a.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:i.a.now()});t.emit("leave",n)}))},a.prototype.on=function(){o.a.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,arguments)},a.prototype.off=function(){o.a.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,arguments)},a.prototype.subscribe=function(){var t=j.processListenerArgs(arguments),n=t[0],r=t[1],o=t[2],a=this.channel;if(!o){if(this.channel.realtime.options.promises)return i.a.promisify(this,"subscribe",[n,r]);o=e}"failed"!==a.state?(this.subscriptions.on(n,r),a.attach(o)):o(p.a.fromValues(j.invalidStateError("failed")))},a.prototype.unsubscribe=function(){var e=j.processListenerArgs(arguments),t=e[0],n=e[1];this.subscriptions.off(t,n)},i.a.inherits(s,g.a),s.prototype.get=function(e){return this.map[e]},s.prototype.getClient=function(e){var t=this.map,n=[];for(var r in t){var i=t[r];i.clientId==e&&"absent"!=i.action&&n.push(i)}return n},s.prototype.list=function(e){var t=this.map,n=e&&e.clientId,r=e&&e.connectionId,i=[];for(var o in t){var a=t[o];"absent"!==a.action&&(n&&n!=a.clientId||r&&r!=a.connectionId||i.push(a))}return i},s.prototype.put=function(e){"enter"!==e.action&&"update"!==e.action||((e=y.a.fromValues(e)).action="present");var n=this.map,r=t(e);this.residualMembers&&delete this.residualMembers[r];var i=n[r];return!(i&&!c(e,i)||(n[r]=e,0))},s.prototype.values=function(){var e=this.map,t=[];for(var n in e){var r=e[n];"absent"!=r.action&&t.push(r)}return t},s.prototype.remove=function(e){var n=this.map,r=t(e),i=n[r];return!(i&&!c(e,i)||(this.syncInProgress?((e=y.a.fromValues(e)).action="absent",n[r]=e):delete n[r],0))},s.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;o.a.logAction(o.a.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=i.a.copy(e),this.setInProgress(!0))},s.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(o.a.logAction(o.a.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(var n in e)"absent"===e[n].action&&delete e[n];for(var n in this.presence._synthesizeLeaves(i.a.valuesArray(this.residualMembers)),this.residualMembers)delete e[n];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},s.prototype.waitSync=function(e){var t=this.syncInProgress;o.a.logAction(o.a.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()},s.prototype.clear=function(e){this.map={},this.setInProgress(!1),this.residualMembers=null},s.prototype.setInProgress=function(e){o.a.logAction(o.a.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},a}(),V=D,F=function(){var e=N.a.Action,t=function(){},n="statechange",r="sync";function a(e,t,n){o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel()","started; name = "+t),_.call(this,e,t,n),this.realtime=e,this.presence=new V(this,e.options),this.connectionManager=e.connection.connectionManager,this.state="initialized",this.subscriptions=new g.a,this.syncChannelSerial=void 0,this.properties={attachSerial:void 0},this.setOptions(n),this.errorReason=null,this._requestedFlags=null,this._mode=null,this._attachedMsgIndicator=!1,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:e.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new g.a}function s(e){if(e&&"params"in e&&!i.a.isObject(e.params))return new p.a("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!i.a.isArray(e.modes))return new p.a("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var n=e.modes[t];if(!n||"string"!=typeof n||!i.a.arrIn(N.a.channelModes,String.prototype.toUpperCase.call(n)))return new p.a("Invalid channel mode: "+n,4e4,400)}}}return i.a.inherits(a,_),a.invalidStateError=function(e){return{statusCode:400,code:90001,message:"Channel operation failed as channel state is "+e}},a.progressOps={statechange:n,sync:r},a.processListenerArgs=function(e){return"function"==typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),null==e[e.length-1]&&e.pop(),e},a.prototype.setOptions=function(e,t){if(!t){if(this.rest.options.promises)return i.a.promisify(this,"setOptions",arguments);t=function(e){e&&o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())}}var n=s(e);n?t(n):(_.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(this.attachImpl(),this._allChannelChanges.once((function(e){switch(this.event){case"update":case"attached":return void t(null);default:return void t(e.reason)}}))):t())},a.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&(e.params||e.modes)},a.prototype.publish=function(){var e=arguments.length,n=arguments[0],r=arguments[e-1];if("function"!=typeof r){if(this.realtime.options.promises)return i.a.promisify(this,"publish",arguments);r=t,++e}if(this.connectionManager.activeState()){if(2==e)if(i.a.isObject(n))n=[k.a.fromValues(n)];else{if(!i.a.isArray(n))throw new p.a("The single-argument form of publish() expects a message object or an array of message objects",40013,400);n=k.a.fromValuesArray(n)}else n=[k.a.fromValues({name:arguments[0],data:arguments[1]})];var o=this,a=this.realtime.options.maxMessageSize;k.a.encodeArray(n,this.channelOptions,(function(e){if(e)r(e);else{var t=k.a.getMessagesSize(n);t>a?r(new p.a("Maximum size of messages that can be published at once exceeded ( was "+t+" bytes; limit is "+a+" bytes)",40009,400)):o._publish(n,r)}}))}else r(this.connectionManager.getError())},a.prototype._publish=function(t,n){o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.publish()","message count = "+t.length);var r=this.state;switch(r){case"failed":case"suspended":n(p.a.fromValues(a.invalidStateError(r)));break;default:o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+r);var i=new N.a;i.action=e.MESSAGE,i.channel=this.name,i.messages=t,this.sendMessage(i,n)}},a.prototype.onEvent=function(e){o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,n=0;n<e.length;n++){var r=e[n];t.emit(r.name,r)}},a.prototype.attach=function(e,t){if("function"==typeof e&&(t=e,e=null),!t){if(this.realtime.options.promises)return i.a.promisify(this,"attach",arguments);t=function(e){e&&o.a.logAction(o.a.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(e)o.a.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=e;else if("attached"===this.state)return void t();this._attach(!1,null,t)},a.prototype._attach=function(e,t,n){n||(n=function(e){e&&o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":n();break;case"detached":case"suspended":case"failed":n(e.reason||r.getError()||new p.a("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":n(new p.a("Attach request superseded by a subsequent detach request",9e4,409))}}))):n(r.getError())},a.prototype.attachImpl=function(){o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message"),this.setInProgress(n,!0);var r=N.a.fromValues({action:e.ATTACH,channel:this.name,params:this.channelOptions.params});this._requestedFlags?r.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&r.encodeModesToFlags(i.a.allToUpperCase(this.channelOptions.modes)),this._attachResume&&r.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(r.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(r,t)},a.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return i.a.promisify(this,"detach",arguments);e=t}var n=this.connectionManager;if(n.activeState())switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new p.a("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once((function(t){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(t.reason||n.getError()||new p.a("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new p.a("Detach request superseded by a subsequent attach request",9e4,409))}}))}else e(n.getError())},a.prototype.detachImpl=function(r){o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message"),this.setInProgress(n,!0);var i=N.a.fromValues({action:e.DETACH,channel:this.name});this.sendMessage(i,r||t)},a.prototype.subscribe=function(){var e=a.processListenerArgs(arguments),n=e[0],r=e[1],o=e[2];if(!o){if(this.realtime.options.promises)return i.a.promisify(this,"subscribe",[n,r]);o=t}if("failed"!==this.state)return this.subscriptions.on(n,r),this.attach(o);o(p.a.fromValues(a.invalidStateError("failed")))},a.prototype.unsubscribe=function(){var e=a.processListenerArgs(arguments),t=e[0],n=e[1];this.subscriptions.off(t,n)},a.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new p.a("Unable to sync to channel; not attached",4e4)}var t=this.connectionManager;if(!t.activeState())throw t.getError();var n=N.a.fromValues({action:e.SYNC,channel:this.name});this.syncChannelSerial&&(n.channelSerial=this.syncChannelSerial),t.send(n)},a.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},a.prototype.sendPresence=function(t,n){var r=N.a.fromValues({action:e.PRESENCE,channel:this.name,presence:i.a.isArray(t)?y.a.fromValuesArray(t):[y.a.fromValues(t)]});this.sendMessage(r,n)},a.prototype.onMessage=function(t){var r,a=!1;switch(t.action){case e.ATTACHED:this._attachedMsgIndicator=!0,this.properties.attachSerial=t.channelSerial,this._mode=t.getMode(),this.params=t.params||{};var s=t.decodeModesFromFlags();this.modes=s&&i.a.allToLowerCase(s)||void 0;var c=t.hasFlag("RESUMED"),u=t.hasFlag("HAS_PRESENCE");if("attached"===this.state){this.setInProgress(n,!1),c||this.presence.onAttached(u);var l=new L(this.state,this.state,c,t.error);this._allChannelChanges.emit("update",l),c&&!this.channelOptions.updateOnAttached||this.emit("update",l)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",t.error,c,u);break;case e.DETACHED:var f=t.error?p.a.fromValues(t.error):new p.a("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",f):"attaching"===this.state?this.notifyState("suspended",f):this.requestState("attaching",f);break;case e.SYNC:if(a=!0,r=this.syncChannelSerial=t.channelSerial,!t.presence)break;case e.PRESENCE:for(var d=t.presence,h=t.id,v=t.connectionId,m=t.timestamp,g=this.channelOptions,b=0;b<d.length;b++){try{var w=d[b];y.a.decode(w,g)}catch(e){o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString())}w.connectionId||(w.connectionId=v),w.timestamp||(w.timestamp=m),w.id||(w.id=h+":"+b)}this.presence.setPresence(d,a,r);break;case e.MESSAGE:if("attached"!==this.state)return void o.a.logAction(o.a.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+t.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');var S=t.messages,E=S[0],_=S[S.length-1];if(h=t.id,v=t.connectionId,m=t.timestamp,E.extras&&E.extras.delta&&E.extras.delta.from!==this._lastPayload.messageId){var O='Delta message decode failure - previous message not available for message "'+t.id+'" on this channel "'+this.name+'".';o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel.onMessage()",O),this._startDecodeFailureRecovery(new p.a(O,40018,400));break}for(b=0;b<S.length;b++){O=S[b];try{k.a.decode(O,this._decodingContext)}catch(e){switch(o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString()),e.code){case 40018:return void this._startDecodeFailureRecovery(e);case 40019:case 40021:return void this.notifyState("failed",e)}}O.connectionId||(O.connectionId=v),O.timestamp||(O.timestamp=m),O.id||(O.id=h+":"+b)}this._lastPayload.messageId=_.id,this._lastPayload.protocolMessageChannelSerial=t.channelSerial,this.onEvent(S);break;case e.ERROR:(f=t.error)&&80016==f.code?this.checkPendingState():this.notifyState("failed",p.a.fromValues(f));break;default:o.a.logAction(o.a.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+t.action+")"),this.connectionManager.abort(M.a.unknownChannelErr)}},a.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(o.a.logAction(o.a.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(function(){t._lastPayload.decodeFailureRecoveryInProgress=!1})))},a.prototype.onAttached=function(){o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},a.prototype.notifyState=function(e,t,i,a){if(o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),e!==this.state){this.presence.actOnChannelState(e,a,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var s=new L(this.state,e,i,t),c="failed"===e?o.a.LOG_ERROR:o.a.LOG_MAJOR;o.a.logAction(c,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attached"===e?(this.onAttached(),this.setInProgress(r,a),this.setInProgress(n,!1)):"detached"!==e&&"failed"!==e&&"suspended"!==e||(this.setInProgress(n,!1),this.setInProgress(r,!1)),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,s),this.emit(e,s)}},a.prototype.requestState=function(e,t){o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()},a.prototype.checkPendingState=function(){var e=this.connectionManager.state;if(e.sendEvents||e.forceQueueEvents)switch(o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)},a.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new p.a("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":e=new p.a("Channel detach timed out",90007,408),this.notifyState("attached",e);break;default:this.checkPendingState()}},a.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout((function(){o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()}),this.realtime.options.timeouts.realtimeRequestTimeout))},a.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},a.prototype.startRetryTimer=function(){var e=this;this.retryTimer||(this.retryTimer=setTimeout((function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,o.a.logAction(o.a.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))}),this.realtime.options.timeouts.channelRetryTimeout))},a.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.suspendTimer=null)},a.prototype.setInProgress=function(e,t){this.rest.channels.setInProgress(this,e,t)},a.prototype.history=function(e,n){if(o.a.logAction(o.a.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===n)if("function"==typeof e)n=e,e=null;else{if(this.rest.options.promises)return i.a.promisify(this,"history",arguments);n=t}if(e&&e.untilAttach){if("attached"!==this.state)return void n(new p.a("option untilAttach requires the channel to be attached",4e4,400));if(!this.properties.attachSerial)return void n(new p.a("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));delete e.untilAttach,e.from_serial=this.properties.attachSerial}_.prototype._history.call(this,e,n)},a.prototype.whenState=function(e,t){return g.a.prototype.whenState.call(this,e,this.state,t)},a.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new p.a("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},a}(),j=F,U=n(23),B=function(){function e(n){if(!(this instanceof e))return new e(n);o.a.logAction(o.a.LOG_MINOR,"Realtime()",""),x.call(this,n),this.connection=new I(this,this.options),this.channels=new t(this),!1!==n.autoConnect&&this.connect()}function t(e){g.a.call(this),this.realtime=e,this.all=Object.create(null),this.inProgress=Object.create(null);var t=this;e.connection.connectionManager.on("transport.active",(function(){t.onTransportActive()}))}return i.a.inherits(e,x),e.prototype.connect=function(){o.a.logAction(o.a.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},e.prototype.close=function(){o.a.logAction(o.a.LOG_MINOR,"Realtime.close()",""),this.connection.close()},i.a.inherits(t,g.a),t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0!==t){var n=this.all[t];n?n.onMessage(e):o.a.logAction(o.a.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t)}else o.a.logAction(o.a.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action)},t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state&&t.attach()}},t.prototype.reattach=function(e){for(var t in this.all){var n=this.all[t];"attached"===n.state&&n.requestState("attaching",e)}},t.prototype.resetAttachedMsgIndicators=function(){for(var e in this.all){var t=this.all[e];"attached"===t.state&&(t._attachedMsgIndicator=!1)}},t.prototype.checkAttachedMsgIndicators=function(e){for(var t in this.all){var n=this.all[t];if("attached"===n.state&&!1===n._attachedMsgIndicator){var r="30s after a resume, found channel which has not received an attached; channelId = "+t+"; connectionId = "+e;o.a.logAction(o.a.LOG_ERROR,"Channels.checkAttachedMsgIndicators()",r),U.a.report("error",r,"channel-no-attached-after-resume"),n.requestState("attaching")}}},t.prototype.propogateConnectionInterruption=function(e,t){var n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var o in this.all){var a=this.all[o];i.a.arrIn(n,a.state)&&a.notifyState(r,t)}},t.prototype.get=function(e,t){e=String(e);var n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t))throw new p.a("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new j(this.realtime,e,t);return n},t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var n=t.getReleaseErr();if(n)throw n;delete this.all[e],delete this.inProgress[e]}},t.prototype.setInProgress=function(e,t,n){this.inProgress[e.name]=this.inProgress[e.name]||{},this.inProgress[e.name][t]=n,!n&&this.hasNopending()&&this.emit("nopending")},t.prototype.onceNopending=function(e){this.hasNopending()?e():this.once("nopending",e)},t.prototype.hasNopending=function(){return i.a.arrEvery(i.a.valuesArray(this.inProgress,!0),(function(e){return!i.a.containsValue(e,!0)}))},e}();B.Promise=function(e){return(e=a.a.objectifyOptions(e)).promises=!0,new B(e)},B.Callbacks=B;var q=B,z=n(24);x.Utils=i.a,x.BufferUtils=l.a,x.Crypto=S.a,x.Defaults=a.a,x.Http=u.a,x.Resource=f,x.Message=k.a,x.PresenceMessage=y.a,q.Utils=i.a,q.BufferUtils=l.a,q.Crypto=S.a,q.Defaults=a.a,q.Http=u.a,q.Message=k.a,q.PresenceMessage=y.a,q.ProtocolMessage=N.a,q.ConnectionManager=R.a,t.default={Rest:x,Realtime:q,msgpack:z.a}}]).default},e.exports=t()},182:(e,t,n)=>{"use strict";function r(e){return"string"==typeof e&&(e=-1==e.indexOf(":")?{token:e}:{key:e}),e.promises=!0,e}var i=n(351),o=function(e){return new i.Rest(r(e))};Object.assign(o,i.Rest);var a=function(e){return new i.Realtime(r(e))};Object.assign(a,i.Realtime),e.exports={Rest:o,Realtime:a}},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,c=i(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))n.call(a,l)&&(c[l]=a[l]);if(t){s=t(a);for(var f=0;f<s.length;f++)r.call(a,s[f])&&(c[s[f]]=a[s[f]])}}return c}},448:(e,t,n)=>{"use strict";var r=n(294),i=n(418),o=n(840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},v={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(v,e)||!p.call(h,e)&&(d.test(e)?v[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,E=60106,_=60107,O=60108,T=60114,x=60109,R=60110,A=60112,C=60113,I=60120,N=60115,M=60116,P=60121,L=60128,D=60129,V=60130,F=60131;if("function"==typeof Symbol&&Symbol.for){var j=Symbol.for;k=j("react.element"),E=j("react.portal"),_=j("react.fragment"),O=j("react.strict_mode"),T=j("react.profiler"),x=j("react.provider"),R=j("react.context"),A=j("react.forward_ref"),C=j("react.suspense"),I=j("react.suspense_list"),N=j("react.memo"),M=j("react.lazy"),P=j("react.block"),j("react.scope"),L=j("react.opaque.id"),D=j("react.debug_trace_mode"),V=j("react.offscreen"),F=j("react.legacy_hidden")}var U,B="function"==typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var G=!1;function H(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function Q(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return H(e.type,!1);case 11:return H(e.type.render,!1);case 22:return H(e.type._render,!1);case 1:return H(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case E:return"Portal";case T:return"Profiler";case O:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return W(e.type);case P:return W(e._render);case M:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ue(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,ve,me=(ve=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function Se(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ye).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var ke=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,xe=null,Re=null;function Ae(e){if(e=ni(e)){if("function"!=typeof Te)throw Error(a(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ce(e){xe?Re?Re.push(e):Re=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Re;if(Re=xe=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ne(e,t){return e(t)}function Me(e,t,n,r,i){return e(t,n,r,i)}function Pe(){}var Le=Ne,De=!1,Ve=!1;function Fe(){null===xe&&null===Re||(Pe(),Ie())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ve){Ue=!1}function qe(e,t,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var ze=!1,Ge=null,He=!1,Qe=null,We={onError:function(e){ze=!0,Ge=e}};function Ke(e,t,n,r,i,o,a,s,c){ze=!1,Ge=null,qe.apply(We,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ye(e){if($e(e)!==e)throw Error(a(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ye(i),e;if(o===r)return Ye(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,ot=[],at=null,st=null,ct=null,ut=new Map,lt=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ht(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&null!==(t=ni(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&gt(at)&&(at=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),ut.forEach(yt),lt.forEach(yt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function St(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&wt(at,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),ut.forEach(t),lt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},_t={},Ot={};function Tt(e){if(_t[e])return _t[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ot)return _t[e]=n[t];return e}f&&(Ot=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var xt=Tt("animationend"),Rt=Tt("animationiteration"),At=Tt("animationstart"),Ct=Tt("transitionend"),It=new Map,Nt=new Map,Mt=["abort","abort",xt,"animationEnd",Rt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ct,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Nt.set(r,t),It.set(r,i),u(i,[r])}}(0,o.unstable_now)();var Lt=8;function Dt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!=(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!=(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!=(t=4186112&e)?(Lt=6,t):0!=(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!=(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Lt=15;else if(0!=(o=134217727&n)){var c=o&~a;0!==c?(r=Dt(c),i=Lt):0!=(s&=o)&&(r=Dt(s),i=Lt)}else 0!=(o=n&~a)?(r=Dt(o),i=Lt):0!==s&&(r=Dt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Dt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?jt(10,t):e;case 10:return 0===(e=Ut(192&~t))?jt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&0===(e=Ut(4186112&~t))&&(e=512),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Ht|0)|0},Gt=Math.log,Ht=Math.LN2,Qt=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Kt=!0;function $t(e,t,n,r){De||Pe();var i=Yt,o=De;De=!0;try{Me(i,e,t,n,r)}finally{(De=o)||Fe()}}function Jt(e,t,n,r){Wt(Qt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var i;if(Kt)if((i=0==(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var o=Xt(e,t,n,r);if(null===o)i&&ht(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=vt(at,e,t,n,r,i),!0;case"dragenter":return st=vt(st,e,t,n,r,i),!0;case"mouseover":return ct=vt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,vt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,lt.set(o,vt(lt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;ht(e,r)}Pr(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Oe(r);if(null!==(i=ti(i))){var o=$e(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Je(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Pr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,un,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(fn),pn=i({},fn,{view:0,detail:0}),hn=sn(pn),vn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(cn=e.screenX-ln.screenX,un=e.screenY-ln.screenY):un=cn=0,ln=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=sn(vn),gn=sn(i({},vn,{dataTransfer:0})),yn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=sn(wn),kn=sn(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function xn(){return Tn}var Rn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Rn),Cn=sn(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Nn=sn(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Mn),Ln=[9,13,27,32],Dn=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var Fn=f&&"TextEvent"in window&&!Vn,jn=f&&(!Dn||Vn&&8<Vn&&11>=Vn),Un=String.fromCharCode(32),Bn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1,Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Dr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Jn(e){Rr(e,0)}function Yn(e){if(Y(ri(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(f){var er;if(f){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Kn&&(Kn.detachEvent("onpropertychange",ir),$n=Kn=null)}function ir(e){if("value"===e.propertyName&&Yn($n)){var t=[];if(Wn(t,$n,e,Oe(e)),e=Jn,De)e(t);else{De=!0;try{Ne(e,t)}finally{De=!1,Fe()}}}}function or(e,t,n){"focusin"===e?(rr(),$n=n,(Kn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn($n)}function sr(e,t){if("click"===e)return Yn(t)}function cr(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},lr=Object.prototype.hasOwnProperty;function fr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,wr=null,Sr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Sr||null==yr||yr!==X(r)||(r="selectionStart"in(r=yr)&&mr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Dr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Mt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<Er.length;_r++)Nt.set(Er[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,c,u){if(Ke.apply(this,arguments),ze){if(!ze)throw Error(a(198));var l=Ge;ze=!1,Ge=null,He||(He=!0,Qe=l)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;xr(i,s,u),o=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;xr(i,s,u),o=c}}}if(He)throw e=Qe,He=!1,Qe=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Cr]||(e[Cr]=!0,s.forEach((function(t){Tr.has(t)||Nr(t,!1,e,null),Nr(t,!0,e,null)})))}function Nr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=oi(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Mr(o,e,i,t),a.add(s))}function Mr(e,t,n,r){var i=Nt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ti(s)))return;if(5===(c=a.tag)||6===c){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e();Ve=!0;try{Le(e,t,n)}finally{Ve=!1,Fe()}}((function(){var r=o,i=Oe(n),a=[];e:{var s=It.get(e);if(void 0!==s){var c=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":u="focus",c=yn;break;case"focusout":u="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=In;break;case xt:case Rt:case At:c=bn;break;case Ct:c=Nn;break;case"scroll":c=hn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var l=0!=(4&t),f=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&null!=(v=je(h,d))&&l.push(Lr(h,v,p))),f)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,i),a.push({event:s,listeners:l}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Zr])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(f=$e(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=mn,v="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==c?s:ri(c),p=null==u?s:ri(u),(s=new l(v,h+"leave",c,n,i)).target=f,s.relatedTarget=p,v=null,ti(i)===r&&((l=new l(d,h+"enter",u,n,i)).target=p,l.relatedTarget=f,v=l),f=v,c&&u)e:{for(d=u,h=0,p=l=c;p;p=Vr(p))h++;for(p=0,v=d;v;v=Vr(v))p++;for(;0<h-p;)l=Vr(l),h--;for(;0<p-h;)d=Vr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Vr(l),d=Vr(d)}l=null}else l=null;null!==c&&Fr(a,s,c,l,!1),null!==u&&null!==f&&Fr(a,f,u,l,!0)}if("select"===(c=(s=r?ri(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Xn;else if(Qn(s))if(Zn)m=cr;else{m=ar;var g=or}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ri(r):window,e){case"focusin":(Qn(g)||"true"===g.contentEditable)&&(yr=g,br=r,wr=null);break;case"focusout":wr=br=yr=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,kr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":kr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Gn=!0)),0<(g=Dr(r,b)).length&&(b=new kn(b,e,null,n,i),a.push({event:b,listeners:g}),(y||null!==(y=zn(n)))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Un);case"textInput":return(e=t.data)===Un&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Dn&&qn(e,t)?(e=nn(),tn=en=Zt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Dr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y)}Rr(a,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(Lr(e,o,i)),null!=(o=je(e,t))&&r.push(Lr(e,o,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=je(n,o))&&a.unshift(Lr(n,c,s)):i||null!=(c=je(n,o))&&a.push(Lr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function jr(){}var Ur=null,Br=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"==typeof setTimeout?setTimeout:void 0,Hr="function"==typeof clearTimeout?clearTimeout:void 0;function Qr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0,Jr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Jr,Xr="__reactProps$"+Jr,Zr="__reactContainer$"+Jr,ei="__reactEvents$"+Jr;function ti(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Yr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Yr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ii(e){return e[Xr]||null}function oi(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var ai=[],si=-1;function ci(e){return{current:e}}function ui(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function li(e,t){si++,ai[si]=e.current,e.current=t}var fi={},di=ci(fi),pi=ci(!1),hi=fi;function vi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!=e.childContextTypes}function gi(){ui(pi),ui(di)}function yi(e,t,n){if(di.current!==fi)throw Error(a(168));li(di,t),li(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,W(t)||"Unknown",o));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,hi=di.current,li(di,e),li(pi,pi.current),!0}function Si(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=e,ui(pi),ui(di),li(di,e)):ui(pi),li(pi,n)}var ki=null,Ei=null,_i=o.unstable_runWithPriority,Oi=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,xi=o.unstable_shouldYield,Ri=o.unstable_requestPaint,Ai=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Pi=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Di={},Vi=void 0!==Ri?Ri:function(){},Fi=null,ji=null,Ui=!1,Bi=Ai(),qi=1e4>Bi?Ai:function(){return Ai()-Bi};function zi(){switch(Ci()){case Ii:return 99;case Ni:return 98;case Mi:return 97;case Pi:return 96;case Li:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return Ii;case 98:return Ni;case 97:return Mi;case 96:return Pi;case 95:return Li;default:throw Error(a(332))}}function Hi(e,t){return e=Gi(e),_i(e,t)}function Qi(e,t,n){return e=Gi(e),Oi(e,t,n)}function Wi(){if(null!==ji){var e=ji;ji=null,Ti(e)}Ki()}function Ki(){if(!Ui&&null!==Fi){Ui=!0;var e=0;try{var t=Fi;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(t){throw null!==Fi&&(Fi=Fi.slice(e+1)),Oi(Ii,Wi),t}finally{Ui=!1}}}var $i=S.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=ci(null),Xi=null,Zi=null,eo=null;function to(){eo=Zi=Xi=null}function no(e){var t=Yi.current;ui(Yi),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function io(e,t){Xi=e,eo=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Da=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Xi)throw Error(a(308));Zi=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var ao=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;ao=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,c=o.shared.pending;if(null!==c){o.shared.pending=null;var u=c,l=u.next;u.next=null,null===s?a=l:s.next=l,s=u;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==s&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=u)}}if(null!==a){for(d=o.baseState,s=0,f=l=u=null;;){c=a.lane;var p=a.eventTime;if((r&c)===c){null!==f&&(f=f.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,v=a;switch(c=t,p=n,v.tag){case 1:if("function"==typeof(h=v.payload)){d=h.call(p,d,c);break e}d=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(c="function"==typeof(h=v.payload)?h.call(p,d,c):h))break e;d=i({},d,c);break e;case 2:ao=!0}}null!==a.callback&&(e.flags|=32,null===(c=o.effects)?o.effects=[a]:c.push(a))}else p={eventTime:p,lane:c,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(l=f=p,u=d):f=f.next=p,s|=c;if(null===(a=a.next)){if(null===(c=o.shared.pending))break;a=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}null===f&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=f,Fs|=s,e.lanes=s,e.memoizedState=d}}function ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var vo=(new r.Component).refs;function mo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=uc(),i=lc(e),o=uo(r,i);o.payload=t,null!=n&&(o.callback=n),lo(e,o),fc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=uc(),i=lc(e),o=uo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),lo(e,o),fc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uc(),r=lc(e),i=uo(n,r);i.tag=2,null!=t&&(i.callback=t),lo(e,i),fc(e,r,n)}};function yo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&fr(n,r)&&fr(i,o))}function bo(e,t,n){var r=!1,i=fi,o=t.contextType;return"object"==typeof o&&null!==o?o=oo(o):(i=mi(t)?hi:di.current,o=(r=null!=(r=t.contextTypes))?vi(e,i):fi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function wo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function So(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vo,so(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=oo(o):(o=mi(t)?hi:di.current,i.context=vi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var ko=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function _o(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Oo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Wc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Eo(e,t,n),r.return=e,r):((r=Gc(n.type,n.key,n.props,null,e.mode,r)).ref=Eo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Hc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Wc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Gc(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case E:return(t=Kc(t,e.mode,n)).return=e,t}if(ko(t)||q(t))return(t=Hc(t,e.mode,n,null)).return=e,t;_o(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?n.type===_?f(e,t,n.props.children,r,i):u(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(ko(n)||q(n))return null!==i?null:f(e,t,n,r,null);_o(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case k:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,i,r.key):u(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);_o(t,r)}return null}function v(i,a,s,c){for(var u=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=p(i,f,s[v],c);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?u=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),u;if(null===f){for(;v<s.length;v++)null!==(f=d(i,s[v],c))&&(a=o(f,a,v),null===l?u=f:l.sibling=f,l=f);return u}for(f=r(i,f);v<s.length;v++)null!==(m=h(f,i,v,s[v],c))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?u=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),u}function m(i,s,c,u){var l=q(c);if("function"!=typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=p(i,v,y.value,u);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(i,v);!y.done;m++,y=c.next())null!==(y=h(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,c){var u="object"==typeof o&&null!==o&&o.type===_&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case k:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(o.type===_){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Eo(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===_?((r=Hc(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=Gc(o.type,o.key,o.props,null,e.mode,c)).ref=Eo(e,r,o),c.return=e,e=c)}return s(e);case E:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Kc(o,e.mode,c)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Wc(o,e.mode,c)).return=e,e=r),s(e);if(ko(o))return v(e,r,o,c);if(q(o))return m(e,r,o,c);if(l&&_o(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,W(e.type)||"Component"))}return n(e,r)}}var To=Oo(!0),xo=Oo(!1),Ro={},Ao=ci(Ro),Co=ci(Ro),Io=ci(Ro);function No(e){if(e===Ro)throw Error(a(174));return e}function Mo(e,t){switch(li(Io,t),li(Co,e),li(Ao,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Ao),li(Ao,t)}function Po(){ui(Ao),ui(Co),ui(Io)}function Lo(e){No(Io.current);var t=No(Ao.current),n=pe(t,e.type);t!==n&&(li(Co,e),li(Ao,n))}function Do(e){Co.current===e&&(ui(Ao),ui(Co))}var Vo=ci(0);function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,Uo=null,Bo=!1;function qo(e,t){var n=Bc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Go(e){if(Bo){var t=Uo;if(t){var n=t;if(!zo(e,t)){if(!(t=Wr(n.nextSibling))||!zo(e,t))return e.flags=-1025&e.flags|2,Bo=!1,void(jo=e);qo(jo,n)}jo=e,Uo=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Bo=!1,jo=e}}function Ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function Qo(e){if(e!==jo)return!1;if(!Bo)return Ho(e),Bo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=Uo;t;)qo(e,t),t=Wr(t.nextSibling);if(Ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Uo=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Uo=null}}else Uo=jo?Wr(e.stateNode.nextSibling):null;return!0}function Wo(){Uo=jo=null,Bo=!1}var Ko=[];function $o(){for(var e=0;e<Ko.length;e++)Ko[e]._workInProgressVersionPrimary=null;Ko.length=0}var Jo=S.ReactCurrentDispatcher,Yo=S.ReactCurrentBatchConfig,Xo=0,Zo=null,ea=null,ta=null,na=!1,ra=!1;function ia(){throw Error(a(321))}function oa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function aa(e,t,n,r,i,o){if(Xo=o,Zo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jo.current=null===e||null===e.memoizedState?Na:Ma,e=n(r,i),ra){o=0;do{if(ra=!1,!(25>o))throw Error(a(301));o+=1,ta=ea=null,t.updateQueue=null,Jo.current=Pa,e=n(r,i)}while(ra)}if(Jo.current=Ia,t=null!==ea&&null!==ea.next,Xo=0,ta=ea=Zo=null,na=!1,t)throw Error(a(300));return e}function sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ta?Zo.memoizedState=ta=e:ta=ta.next=e,ta}function ca(){if(null===ea){var e=Zo.alternate;e=null!==e?e.memoizedState:null}else e=ea.next;var t=null===ta?Zo.memoizedState:ta.next;if(null!==t)ta=t,ea=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ea=e).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===ta?Zo.memoizedState=ta=e:ta=ta.next=e}return ta}function ua(e,t){return"function"==typeof t?t(e):t}function la(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ea,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=s=o=null,u=i;do{var l=u.lane;if((Xo&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var f={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(s=c=f,o=r):c=c.next=f,Zo.lanes|=l,Fs|=l}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=s,ur(r,t.memoizedState)||(Da=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fa(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ur(o,t.memoizedState)||(Da=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function da(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xo&e)===e)&&(t._workInProgressVersionPrimary=r,Ko.push(t))),e)return n(t._source);throw Ko.push(t),Error(a(350))}function pa(e,t,n,r){var i=Cs;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),c=Jo.current,u=c.useState((function(){return da(i,t,n)})),l=u[1],f=u[0];u=ta;var d=e.memoizedState,p=d.refs,h=p.getSnapshot,v=d.source;d=d.subscribe;var m=Zo;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=o(t._source);if(!ur(s,e)){e=n(t._source),ur(f,e)||(l(e),e=lc(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var c=31-zt(a),u=1<<c;r[c]|=e,a&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=lc(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(h,n)&&ur(v,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:f}).dispatch=l=Ca.bind(null,Zo,e),u.queue=e,u.baseQueue=null,f=da(i,t,n),u.memoizedState=u.baseState=f),f}function ha(e,t,n){return pa(ca(),e,t,n)}function va(e){var t=sa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e}).dispatch=Ca.bind(null,Zo,e),[t.memoizedState,e]}function ma(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Zo.updateQueue)?(t={lastEffect:null},Zo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(e){return e={current:e},sa().memoizedState=e}function ya(){return ca().memoizedState}function ba(e,t,n,r){var i=sa();Zo.flags|=e,i.memoizedState=ma(1|t,n,void 0,void 0===r?null:r)}function wa(e,t,n,r){var i=ca();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&oa(r,a.deps))return void ma(t,n,o,r)}Zo.flags|=e,i.memoizedState=ma(1|t,n,o,r)}function Sa(e,t){return ba(516,4,e,t)}function ka(e,t){return wa(516,4,e,t)}function Ea(e,t){return wa(4,2,e,t)}function _a(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oa(e,t,n){return n=null!=n?n.concat([e]):null,wa(4,2,_a.bind(null,t,e),n)}function Ta(){}function xa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ra(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=zi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{e(!1),t()}finally{Yo.transition=n}}))}function Ca(e,t,n){var r=uc(),i=lc(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Zo||null!==a&&a===Zo)ra=na=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=a(s,n);if(o.eagerReducer=a,o.eagerState=c,ur(c,s))return}catch(e){}fc(e,i,r)}}var Ia={readContext:oo,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Na={readContext:oo,useCallback:function(e,t){return sa().memoizedState=[e,void 0===t?null:t],e},useContext:oo,useEffect:Sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ba(4,2,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ca.bind(null,Zo,e),[r.memoizedState,e]},useRef:ga,useState:va,useDebugValue:Ta,useDeferredValue:function(e){var t=va(e),n=t[0],r=t[1];return Sa((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=va(!1),t=e[0];return ga(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=sa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Bo){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(a(355))})),n=va(t)[1];return 0==(2&Zo.mode)&&(Zo.flags|=516,ma(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return va(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Ma={readContext:oo,useCallback:xa,useContext:oo,useEffect:ka,useImperativeHandle:Oa,useLayoutEffect:Ea,useMemo:Ra,useReducer:la,useRef:ya,useState:function(){return la(ua)},useDebugValue:Ta,useDeferredValue:function(e){var t=la(ua),n=t[0],r=t[1];return ka((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=la(ua)[0];return[ya().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return la(ua)[0]},unstable_isNewReconciler:!1},Pa={readContext:oo,useCallback:xa,useContext:oo,useEffect:ka,useImperativeHandle:Oa,useLayoutEffect:Ea,useMemo:Ra,useReducer:fa,useRef:ya,useState:function(){return fa(ua)},useDebugValue:Ta,useDeferredValue:function(e){var t=fa(ua),n=t[0],r=t[1];return ka((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=fa(ua)[0];return[ya().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return fa(ua)[0]},unstable_isNewReconciler:!1},La=S.ReactCurrentOwner,Da=!1;function Va(e,t,n,r){t.child=null===e?xo(t,null,n,r):To(t,e.child,n,r)}function Fa(e,t,n,r,i){n=n.render;var o=t.ref;return io(t,i),r=aa(e,t,n,r,o,i),null===e||Da?(t.flags|=1,Va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||qc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ua(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?ns(e,t,o):(t.flags|=1,(e=zc(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ua(e,t,n,r,i,o){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Da=!1,0==(o&i))return t.lanes=e.lanes,ns(e,t,o);0!=(16384&e.flags)&&(Da=!0)}return za(e,t,n,r,o)}function Ba(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},bc(0,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bc(0,e),null;t.memoizedState={baseLanes:0},bc(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,bc(0,r);return Va(e,t,i,n),t.child}function qa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function za(e,t,n,r,i){var o=mi(n)?hi:di.current;return o=vi(t,o),io(t,i),n=aa(e,t,n,r,o,i),null===e||Da?(t.flags|=1,Va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function Ga(e,t,n,r,i){if(mi(n)){var o=!0;wi(t)}else o=!1;if(io(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),So(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;u="object"==typeof u&&null!==u?oo(u):vi(t,u=mi(n)?hi:di.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||c!==u)&&wo(t,a,r,u),ao=!1;var d=t.memoizedState;a.state=d,po(t,r,a,i),c=t.memoizedState,s!==r||d!==c||pi.current||ao?("function"==typeof l&&(mo(t,n,l,r),c=t.memoizedState),(s=ao||yo(t,n,s,r,d,c,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,co(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ji(t.type,s),a.props=u,f=t.pendingProps,d=a.context,c="object"==typeof(c=n.contextType)&&null!==c?oo(c):vi(t,c=mi(n)?hi:di.current);var p=n.getDerivedStateFromProps;(l="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==c)&&wo(t,a,r,c),ao=!1,d=t.memoizedState,a.state=d,po(t,r,a,i);var h=t.memoizedState;s!==f||d!==h||pi.current||ao?("function"==typeof p&&(mo(t,n,p,r),h=t.memoizedState),(u=ao||yo(t,n,u,r,d,h,c))?(l||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Ha(e,t,n,r,o,i)}function Ha(e,t,n,r,i,o){qa(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&Si(t,n,!1),ns(e,t,o);r=t.stateNode,La.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=To(t,e.child,null,o),t.child=To(t,null,s,o)):Va(e,t,s,o),t.memoizedState=r.state,i&&Si(t,n,!0),t.child}function Qa(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Mo(e,t.containerInfo)}var Wa,Ka,$a,Ja={dehydrated:null,retryLane:0};function Ya(e,t,n){var r,i=t.pendingProps,o=Vo.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),li(Vo,1&o),null===e?(void 0!==i.fallback&&Go(t),e=i.children,o=i.fallback,a?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,e):"number"==typeof i.unstable_expectedLoadTime?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,t.lanes=33554432,e):((n=Qc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=function(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zc(a,s),null!==e?r=zc(e,r):(r=Hc(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ja,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=zc(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Xa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Qc(t,i,0,null),n=Hc(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Za(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ro(e.return,t)}function es(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Va(e,t,r.children,n),0!=(2&(r=Vo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,n);else if(19===e.tag)Za(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Vo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=zc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Bo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Po(),ui(pi),ui(di),$o(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Do(t);var o=No(Io.current);if(n=t.type,null!==e&&null!=t.stateNode)Ka(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=No(Ao.current),Qo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[Xr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Or.length;e++)Ar(Or[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ce(r,s),Ar("invalid",r)}for(var u in Ee(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):c.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Yr]=t,e[Xr]=r,Wa(e,t),t.stateNode=e,u=_e(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Or.length;o++)Ar(Or[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ce(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Ee(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?Se(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===s?"string"==typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"==typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Ar("scroll",e):null!=f&&w(e,s,f,u))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=jr)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$a(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=No(Io.current),No(Ao.current),Qo(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return ui(Vo),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Qo(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Vo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Cs||0==(134217727&Fs)&&0==(134217727&js)||vc(Cs,Ns))),(r||n)&&(t.flags|=4),null);case 4:return Po(),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return no(t),null;case 19:if(ui(Vo),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(u=r.rendering))if(s)rs(r,!1);else{if(0!==Ls||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fo(e))){for(t.flags|=64,rs(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Vo,1&Vo.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>zs&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Bo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>zs&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Vo.current,li(Vo,s?1&t|2:1&t),n):null;case 23:case 24:return wc(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function os(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Po(),ui(pi),ui(di),$o(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Do(e),null;case 13:return ui(Vo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Vo),null;case 4:return Po(),null;case 10:return no(e),null;case 23:case 24:return wc(),null;default:return null}}function as(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Wa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ka=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,No(Ao.current);var a,s=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=jr)}for(f in Ee(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var u=o[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(c.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(u=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==u&&(null!=l||null!=u))if("style"===f)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(c.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),s||u===l||(s=[])):"object"==typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},$a=function(e,t,n,r){n!==r&&(t.flags|=4)};var cs="function"==typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),ss(0,t)},n}function ls(e,t,n){(n=uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ss(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===$s?$s=new Set([this]):$s.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fs="function"==typeof WeakSet?WeakSet:Set;function ds(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Vc(e,t)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Qr(t.stateNode.containerInfo))}throw Error(a(163))}function hs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Pc(n,e),Mc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ho(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ho(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&St(n)))))}throw Error(a(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ms(e,t){if(Ei&&"function"==typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(ki,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Pc(t,n);else{r=t;try{i()}catch(e){Vc(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ds(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Vc(t,e)}break;case 5:ds(t);break;case 4:ks(e,t)}}function gs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ys(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ws(e,n,t):Ss(e,n,t)}function ws(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function ks(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,c=i,u=c;;)if(ms(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,c=i.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ms(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),_e(e,i),t=_e(e,r),i=0;i<o.length;i+=2){var s=o[i],c=o[i+1];"style"===s?Se(n,c):"dangerouslySetInnerHTML"===s?me(n,c):"children"===s?ge(n,c):w(n,s,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,St(n.containerInfo)));case 13:return null!==t.memoizedState&&(qs=qi(),vs(t.child,!0)),void _s(t);case 19:return void _s(t);case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(a(163))}function _s(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fs),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Os(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ts=Math.ceil,xs=S.ReactCurrentDispatcher,Rs=S.ReactCurrentOwner,As=0,Cs=null,Is=null,Ns=0,Ms=0,Ps=ci(0),Ls=0,Ds=null,Vs=0,Fs=0,js=0,Us=0,Bs=null,qs=0,zs=1/0;function Gs(){zs=qi()+500}var Hs,Qs=null,Ws=!1,Ks=null,$s=null,Js=!1,Ys=null,Xs=90,Zs=[],ec=[],tc=null,nc=0,rc=null,ic=-1,oc=0,ac=0,sc=null,cc=!1;function uc(){return 0!=(48&As)?qi():-1!==ic?ic:ic=qi()}function lc(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===zi()?1:2;if(0===oc&&(oc=Vs),0!==$i.transition){0!==ac&&(ac=null!==Bs?Bs.pendingLanes:0),e=oc;var t=4186112&~ac;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=zi(),e=jt(0!=(4&As)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),oc)}function fc(e,t,n){if(50<nc)throw nc=0,rc=null,Error(a(185));if(null===(e=dc(e,t)))return null;qt(e,t,n),e===Cs&&(js|=t,4===Ls&&vc(e,Ns));var r=zi();1===t?0!=(8&As)&&0==(48&As)?mc(e):(pc(e,n),0===As&&(Gs(),Wi())):(0==(4&As)||98!==r&&99!==r||(null===tc?tc=new Set([e]):tc.add(e)),pc(e,n)),Bs=e}function dc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-zt(s),u=1<<c,l=o[c];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Dt(u);var f=Lt;o[c]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);s&=~u}if(r=Vt(e,e===Cs?Ns:0),t=Lt,0===r)null!==n&&(n!==Di&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Di&&Ti(n)}15===t?(n=mc.bind(null,e),null===Fi?(Fi=[n],ji=Oi(Ii,Ki)):Fi.push(n),n=Di):14===t?n=Qi(99,mc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Qi(n,hc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function hc(e){if(ic=-1,ac=oc=0,0!=(48&As))throw Error(a(327));var t=e.callbackNode;if(Nc()&&e.callbackNode!==t)return null;var n=Vt(e,e===Cs?Ns:0);if(0===n)return null;var r=n,i=As;As|=16;var o=Ec();for(Cs===e&&Ns===r||(Gs(),Sc(e,r));;)try{Tc();break}catch(t){kc(e,t)}if(to(),xs.current=o,As=i,null!==Is?r=0:(Cs=null,Ns=0,r=Ls),0!=(Vs&js))Sc(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Qr(e.containerInfo)),0!==(n=Ft(e))&&(r=_c(e,n))),1===r)throw t=Ds,Sc(e,0),vc(e,n),pc(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ac(e);break;case 3:if(vc(e,n),(62914560&n)===n&&10<(r=qs+500-qi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){uc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ac.bind(null,e),r);break}Ac(e);break;case 4:if(vc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-zt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ts(n/1960))-n)){e.timeoutHandle=Gr(Ac.bind(null,e),n);break}Ac(e);break;default:throw Error(a(329))}}return pc(e,qi()),e.callbackNode===t?hc.bind(null,e):null}function vc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function mc(e){if(0!=(48&As))throw Error(a(327));if(Nc(),e===Cs&&0!=(e.expiredLanes&Ns)){var t=Ns,n=_c(e,t);0!=(Vs&js)&&(n=_c(e,t=Vt(e,t)))}else n=_c(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Qr(e.containerInfo)),0!==(t=Ft(e))&&(n=_c(e,t))),1===n)throw n=Ds,Sc(e,0),vc(e,t),pc(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ac(e),pc(e,qi()),null}function gc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Gs(),Wi())}}function yc(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Gs(),Wi())}}function bc(e,t){li(Ps,Ms),Ms|=t,Vs|=t}function wc(){Ms=Ps.current,ui(Ps)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Is)for(n=Is.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&gi();break;case 3:Po(),ui(pi),ui(di),$o();break;case 5:Do(r);break;case 4:Po();break;case 13:case 19:ui(Vo);break;case 10:no(r);break;case 23:case 24:wc()}n=n.return}Cs=e,Is=zc(e.current,null),Ns=Ms=Vs=t,Ls=0,Ds=null,Us=js=Fs=0}function kc(e,t){for(;;){var n=Is;try{if(to(),Jo.current=Ia,na){for(var r=Zo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}na=!1}if(Xo=0,ta=ea=Zo=null,ra=!1,Rs.current=null,null===n||null===n.return){Ls=1,Ds=t,Is=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=Ns,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&Vo.current),d=a;do{var p;if(p=13===d.tag){var h=d.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var v=d.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(p){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=uo(-1,1);y.tag=2,lo(s,y)}s.lanes|=1;break e}c=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new cs,c=new Set,b.set(u,c)):void 0===(c=b.get(u))&&(c=new Set,b.set(u,c)),!c.has(s)){c.add(s);var w=Fc.bind(null,o,u,s);u.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),c=as(c,s),d=a;do{switch(d.tag){case 3:o=c,d.flags|=4096,t&=-t,d.lanes|=t,fo(d,us(0,o,t));break e;case 1:o=c;var S=d.type,k=d.stateNode;if(0==(64&d.flags)&&("function"==typeof S.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===$s||!$s.has(k)))){d.flags|=4096,t&=-t,d.lanes|=t,fo(d,ls(d,o,t));break e}}d=d.return}while(null!==d)}Rc(n)}catch(e){t=e,Is===n&&null!==n&&(Is=n=n.return);continue}break}}function Ec(){var e=xs.current;return xs.current=Ia,null===e?Ia:e}function _c(e,t){var n=As;As|=16;var r=Ec();for(Cs===e&&Ns===t||Sc(e,t);;)try{Oc();break}catch(t){kc(e,t)}if(to(),As=n,xs.current=r,null!==Is)throw Error(a(261));return Cs=null,Ns=0,Ls}function Oc(){for(;null!==Is;)xc(Is)}function Tc(){for(;null!==Is&&!xi();)xc(Is)}function xc(e){var t=Hs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Rc(e):Is=t,Rs.current=null}function Rc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=is(n,t,Ms)))return void(Is=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ms)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=os(t)))return n.flags&=2047,void(Is=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Is=t);Is=t=e}while(null!==t);0===Ls&&(Ls=5)}function Ac(e){var t=zi();return Hi(99,Cc.bind(null,e,t)),null}function Cc(e,t){do{Nc()}while(null!==Ys);if(0!=(48&As))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<o;){var u=31-zt(o),l=1<<u;i[u]=0,s[u]=-1,c[u]=-1,o&=~l}if(null!==tc&&0==(24&r)&&tc.has(e)&&tc.delete(e),e===Cs&&(Is=Cs=null,Ns=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Rs.current=null,Ur=Kt,mr(s=vr())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(e){c=null;break e}var f=0,d=-1,p=-1,h=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==c||0!==o&&3!==m.nodeType||(d=f+o),m!==u||0!==l&&3!==m.nodeType||(p=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===c&&++h===o&&(d=f),g===u&&++v===l&&(p=f),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Br={focusedElem:s,selectionRange:c},Kt=!1,sc=null,cc=!1,Qs=r;do{try{Ic()}catch(e){if(null===Qs)throw Error(a(330));Vc(Qs,e),Qs=Qs.nextEffect}}while(null!==Qs);sc=null,Qs=r;do{try{for(s=e;null!==Qs;){var b=Qs.flags;if(16&b&&ge(Qs.stateNode,""),128&b){var w=Qs.alternate;if(null!==w){var S=w.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(1038&b){case 2:bs(Qs),Qs.flags&=-3;break;case 6:bs(Qs),Qs.flags&=-3,Es(Qs.alternate,Qs);break;case 1024:Qs.flags&=-1025;break;case 1028:Qs.flags&=-1025,Es(Qs.alternate,Qs);break;case 4:Es(Qs.alternate,Qs);break;case 8:ks(s,c=Qs);var k=c.alternate;gs(c),null!==k&&gs(k)}Qs=Qs.nextEffect}}catch(e){if(null===Qs)throw Error(a(330));Vc(Qs,e),Qs=Qs.nextEffect}}while(null!==Qs);if(S=Br,w=vr(),b=S.focusedElem,s=S.selectionRange,w!==b&&b&&b.ownerDocument&&hr(b.ownerDocument.documentElement,b)){null!==s&&mr(b)&&(w=s.start,void 0===(S=s.end)&&(S=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(S,b.value.length)):(S=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(S=S.getSelection(),c=b.textContent.length,k=Math.min(s.start,c),s=void 0===s.end?k:Math.min(s.end,c),!S.extend&&k>s&&(c=s,s=k,k=c),c=pr(b,k),o=pr(b,s),c&&o&&(1!==S.rangeCount||S.anchorNode!==c.node||S.anchorOffset!==c.offset||S.focusNode!==o.node||S.focusOffset!==o.offset)&&((w=w.createRange()).setStart(c.node,c.offset),S.removeAllRanges(),k>s?(S.addRange(w),S.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),S.addRange(w))))),w=[];for(S=b;S=S.parentNode;)1===S.nodeType&&w.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(S=w[b]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Kt=!!Ur,Br=Ur=null,e.current=n,Qs=r;do{try{for(b=e;null!==Qs;){var E=Qs.flags;if(36&E&&hs(b,Qs.alternate,Qs),128&E){w=void 0;var _=Qs.ref;if(null!==_){var O=Qs.stateNode;Qs.tag,w=O,"function"==typeof _?_(w):_.current=w}}Qs=Qs.nextEffect}}catch(e){if(null===Qs)throw Error(a(330));Vc(Qs,e),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,Vi(),As=i}else e.current=n;if(Js)Js=!1,Ys=e,Xs=t;else for(Qs=r;null!==Qs;)t=Qs.nextEffect,Qs.nextEffect=null,8&Qs.flags&&((E=Qs).sibling=null,E.stateNode=null),Qs=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===rc?nc++:(nc=0,rc=e):nc=0,n=n.stateNode,Ei&&"function"==typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(ki,n,void 0,64==(64&n.current.flags))}catch(e){}if(pc(e,qi()),Ws)throw Ws=!1,e=Ks,Ks=null,e;return 0!=(8&As)||Wi(),null}function Ic(){for(;null!==Qs;){var e=Qs.alternate;cc||null===sc||(0!=(8&Qs.flags)?Ze(Qs,sc)&&(cc=!0):13===Qs.tag&&Os(e,Qs)&&Ze(Qs,sc)&&(cc=!0));var t=Qs.flags;0!=(256&t)&&ps(e,Qs),0==(512&t)||Js||(Js=!0,Qi(97,(function(){return Nc(),null}))),Qs=Qs.nextEffect}}function Nc(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,Hi(e,Lc)}return!1}function Mc(e,t){Zs.push(t,e),Js||(Js=!0,Qi(97,(function(){return Nc(),null})))}function Pc(e,t){ec.push(t,e),Js||(Js=!0,Qi(97,(function(){return Nc(),null})))}function Lc(){if(null===Ys)return!1;var e=Ys;if(Ys=null,0!=(48&As))throw Error(a(331));var t=As;As|=32;var n=ec;ec=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));Vc(o,e)}}for(n=Zs,Zs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var c=i.create;i.destroy=c()}catch(e){if(null===o)throw Error(a(330));Vc(o,e)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return As=t,Wi(),!0}function Dc(e,t,n){lo(e,t=us(0,t=as(n,t),1)),t=uc(),null!==(e=dc(e,1))&&(qt(e,1,t),pc(e,t))}function Vc(e,t){if(3===e.tag)Dc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Dc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var i=ls(n,e=as(t,e),1);if(lo(n,i),i=uc(),null!==(n=dc(n,1)))qt(n,1,i),pc(n,i);else if("function"==typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=uc(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(Ns&n)===n&&(4===Ls||3===Ls&&(62914560&Ns)===Ns&&500>qi()-qs?Sc(e,0):Us|=n),pc(e,t)}function jc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===zi()?1:2:(0===oc&&(oc=Vs),0===(t=Ut(62914560&~oc))&&(t=4194304))),n=uc(),null!==(e=dc(e,t))&&(qt(e,t,n),pc(e,n))}function Uc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,n,r){return new Uc(e,t,n,r)}function qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var n=e.alternate;return null===n?((n=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gc(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)qc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case _:return Hc(n.children,i,o,t);case D:s=8,i|=16;break;case O:s=8,i|=1;break;case T:return(e=Bc(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=o,e;case C:return(e=Bc(13,n,t,i)).type=C,e.elementType=C,e.lanes=o,e;case I:return(e=Bc(19,n,t,i)).elementType=I,e.lanes=o,e;case V:return Qc(n,i,o,t);case F:return(e=Bc(24,n,t,i)).elementType=F,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case R:s=9;break e;case A:s=11;break e;case N:s=14;break e;case M:s=16,r=null;break e;case P:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Hc(e,t,n,r){return(e=Bc(7,e,r,t)).lanes=n,e}function Qc(e,t,n,r){return(e=Bc(23,e,r,t)).elementType=V,e.lanes=n,e}function Wc(e,t,n){return(e=Bc(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Yc(e,t,n,r){var i=t.current,o=uc(),s=lc(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(mi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(a(171))}if(1===n.tag){var u=n.type;if(mi(u)){n=bi(n,u,c);break e}}n=c}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=uo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(i,t),fc(i,s,o),s}function Xc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $c(e,t,null!=n&&!0===n.hydrate),t=Bc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,so(t),e[Zr]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Xc(a);s.call(e)}}Yc(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var c=i;i=function(){var e=Xc(a);c.call(e)}}yc((function(){Yc(t,a,e,i)}))}return Xc(a)}function iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(a(200));return Jc(e,t,null,n)}Hs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Da=!0;else{if(0==(n&r)){switch(Da=!1,t.tag){case 3:Qa(t),Wo();break;case 5:Lo(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Mo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ya(e,t,n):(li(Vo,1&Vo.current),null!==(t=ns(e,t,n))?t.sibling:null);li(Vo,1&Vo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Vo,Vo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ba(e,t,n)}return ns(e,t,n)}Da=0!=(16384&e.flags)}else Da=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,di.current),io(t,n),i=aa(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;wi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,so(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&mo(t,r,s,e),i.updater=go,t.stateNode=i,i._reactInternals=t,So(t,r,e,n),t=Ha(null,t,r,!0,o,n)}else t.tag=0,Va(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return qc(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===N)return 14}return 2}(i),e=Ji(i,e),o){case 0:t=za(null,t,i,e,n);break e;case 1:t=Ga(null,t,i,e,n);break e;case 11:t=Fa(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Ji(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ga(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Qa(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,co(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Wo(),t=ns(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Uo=Wr(t.stateNode.containerInfo.firstChild),jo=t,o=Bo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Ko.push(o);for(n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Va(e,t,r,n),Wo();t=t.child}return t;case 5:return Lo(t),null===e&&Go(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,zr(r,i)?s=null:null!==o&&zr(r,o)&&(t.flags|=16),qa(e,t),Va(e,t,s,n),t.child;case 6:return null===e&&Go(t),null;case 13:return Ya(e,t,n);case 4:return Mo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=To(t,null,r,n):Va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var c=t.type._context;if(li(Yi,c._currentValue),c._currentValue=o,null!==s)if(c=s.value,0==(o=ur(c,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(s.children===i.children&&!pi.current){t=ns(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===c.tag&&((l=uo(-1,n&-n)).tag=2,lo(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),ro(c.return,n),u.lanes|=n;break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(i=oo(i,o.unstable_observedBits)),t.flags|=1,Va(e,t,r,n),t.child;case 14:return o=Ji(i=t.type,t.pendingProps),ja(e,t,i,o=Ji(i.type,o),r,n);case 15:return Ua(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,io(t,n),bo(t,r,i),So(t,r,i,n),Ha(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Ba(e,t,n)}throw Error(a(156,t.tag))},tu.prototype.render=function(e){Yc(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Yc(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(fc(e,4,uc()),eu(e,4))},tt=function(e){13===e.tag&&(fc(e,67108864,uc()),eu(e,67108864))},nt=function(e){if(13===e.tag){var t=uc(),n=lc(e);fc(e,n,t),eu(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(a(90));Y(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ne=gc,Me=function(e,t,n,r,i){var o=As;As|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(As=o)&&(Gs(),Wi())}},Pe=function(){0==(49&As)&&(function(){if(null!==tc){var e=tc;tc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pc(e,qi())}))}Wi()}(),Nc())},Le=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Gs(),Wi())}};var ou={Events:[ni,ri,ii,Ce,Ie,Nc,{current:!1}]},au={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},su={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{ki=cu.inject(su),Ei=cu}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!=(48&n))return e(t);As|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{As=n,Wi()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(a(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(a(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(a(40));return!!e._reactRootContainer&&(yc((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=gc,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ru(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},408:(e,t,n)=>{"use strict";var r=n(418),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),c=f("react.forward_ref"),t.Suspense=f("react.suspense"),u=f("react.memo"),l=f("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var w={current:null},S=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,r)&&!k.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:w.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var O=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case o:c=!0}}if(c)return a=a(c=e),e=""===r?"."+T(c,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),x(a,t,n,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+T(s=e[u],u);c+=x(s,t,n,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=x(s=s.value,t,n,l=r+T(s,u++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function R(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function I(){var e=C.current;if(null===e)throw Error(p(321));return e}var N={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)S.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var f=0;f<l;f++)u[f]=arguments[f+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return I().useCallback(e,t)},t.useContext=function(e,t){return I().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return I().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return I().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return I().useLayoutEffect(e,t)},t.useMemo=function(e,t){return I().useMemo(e,t)},t.useReducer=function(e,t,n){return I().useReducer(e,t,n)},t.useRef=function(e){return I().useRef(e)},t.useState=function(e){return I().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)},53:(e,t)=>{"use strict";var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,l=null,f=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(f,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var h=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,S=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?S.postMessage(null):(v=!1,m=null)}catch(e){throw S.postMessage(null),e}}else v=!1},n=function(e){m=e,v||(v=!0,S.postMessage(null))},r=function(e,n){g=d((function(){e(t.unstable_now())}),n)},i=function(){p(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<O(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,c=e[s];if(void 0!==a&&0>O(a,n))void 0!==c&&0>O(c,a)?(e[r]=c,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==c&&0>O(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function O(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],x=[],R=1,A=null,C=3,I=!1,N=!1,M=!1;function P(e){for(var t=E(x);null!==t;){if(null===t.callback)_(x);else{if(!(t.startTime<=e))break;_(x),t.sortIndex=t.expirationTime,k(T,t)}t=E(x)}}function L(e){if(M=!1,P(e),!N)if(null!==E(T))N=!0,n(D);else{var t=E(x);null!==t&&r(L,t.startTime-e)}}function D(e,n){N=!1,M&&(M=!1,i()),I=!0;var o=C;try{for(P(n),A=E(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"==typeof a){A.callback=null,C=A.priorityLevel;var s=a(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?A.callback=s:A===E(T)&&_(T),P(n)}else _(T);A=E(T)}if(null!==A)var c=!0;else{var u=E(x);null!==u&&r(L,u.startTime-n),c=!1}return c}finally{A=null,C=o,I=!1}}var V=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||I||(N=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:R++,callback:o,priorityLevel:e,startTime:a,expirationTime:c=a+c,sortIndex:-1},a>s?(e.sortIndex=a,k(x,e),null===E(T)&&e===E(x)&&(M?i():M=!0,r(L,a-s))):(e.sortIndex=c,k(T,e),N||I||(N=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},575:(e,t,n)=>{"use strict";n(149);var r=n(294),i=n(935),o=function(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(e){}return t},a=function(e){return!!e&&"function"==typeof e.then},s=function(e,t){if(null!=e)return e;throw o(null!=t?t:"Got unexpected null or undefined")};function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u{getValue(){throw o("BaseLoadable")}toPromise(){throw o("BaseLoadable")}valueMaybe(){throw o("BaseLoadable")}valueOrThrow(){throw o(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw o("BaseLoadable")}promiseOrThrow(){throw o(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw o("BaseLoadable")}errorOrThrow(){throw o(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw o("BaseLoadable")}}class l extends u{constructor(e){super(),c(this,"state","hasValue"),c(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return a(t)?v(t):g(t)?t:p(t)}catch(t){return a(t)?v(t.next((()=>this.map(e)))):h(t)}}}class f extends u{constructor(e){super(),c(this,"state","hasError"),c(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class d extends u{constructor(e){super(),c(this,"state","loading"),c(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return v(this.contents.then((t=>{const n=e(t);if(g(n)){const e=n;switch(e.state){case"hasValue":case"loading":return e.contents;case"hasError":throw e.contents}}return n})).catch((t=>{if(a(t))return t.then((()=>this.map(e).contents));throw t})))}}function p(e){return Object.freeze(new l(e))}function h(e){return Object.freeze(new f(e))}function v(e){return Object.freeze(new d(e))}function m(e){const t=function(e){return e.every((e=>"hasValue"===e.state))?p(e.map((e=>e.contents))):e.some((e=>"hasError"===e.state))?h(s(e.find((e=>"hasError"===e.state)),"Invalid loadable passed to loadableAll").contents):v(Promise.all(e.map((e=>e.contents))))}(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t])));return Array.isArray(e)?t:t.map((t=>Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})))}function g(e){return e instanceof u}const y={of:e=>a(e)?v(e):p(e),error:e=>h(e),all:m,isLoadable:g};var b,w={loadableWithValue:p,loadableWithError:h,loadableWithPromise:v,loadableLoading:function(){return Object.freeze(new d(new Promise((()=>{}))))},loadableAll:m,isLoadable:g,RecoilLoadable:y},S=w.loadableWithValue,k=w.loadableWithError,E=w.loadableWithPromise,_=w.loadableLoading,O=w.loadableAll,T=w.isLoadable,x=w.RecoilLoadable,R=Object.freeze({__proto__:null,loadableWithValue:S,loadableWithError:k,loadableWithPromise:E,loadableLoading:_,loadableAll:O,isLoadable:T,RecoilLoadable:x});const A=null!==(b=r.useMutableSource)&&void 0!==b?b:r.unstable_useMutableSource;var C={mutableSourceExists:function(){return A&&!("undefined"!=typeof window&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)},useMutableSource:A};const{mutableSourceExists:I}=C,N=(new Map).set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function M(e){var t;return!("recoil_early_rendering_2021"===e&&!I())&&null!==(t=N.get(e))&&void 0!==t&&t}M.setPass=e=>{N.set(e,!0)},M.setFail=e=>{N.set(e,!1)};var P=M,L=function(e,t){return function*(){let n=0;for(const r of e)yield t(r,n++)}()};class D{constructor(e){c(this,"key",void 0),this.key=e}}class V extends D{}class F extends D{}var j={AbstractRecoilValue:D,RecoilState:V,RecoilValueReadOnly:F,isRecoilValue:function(e){return e instanceof V||e instanceof F}},U=j.AbstractRecoilValue,B=j.RecoilState,q=j.RecoilValueReadOnly,z=j.isRecoilValue,G=Object.freeze({__proto__:null,AbstractRecoilValue:U,RecoilState:B,RecoilValueReadOnly:q,isRecoilValue:z});class H{}const Q=new H;class W extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}}const K=new Map,$=new Map;class J extends Error{}const Y=new Map;function X(e){return Y.get(e)}var Z,ee,te={nodes:K,recoilValues:$,registerNode:function(e){if(K.has(e.key)){const t=`Duplicate atom key "${e.key}". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.`;console.warn(t)}K.set(e.key,e);const t=null==e.set?new G.RecoilValueReadOnly(e.key):new G.RecoilState(e.key);return $.set(e.key,t),t},getNode:function(e){const t=K.get(e);if(null==t)throw new J(`Missing definition for RecoilValue: "${e}""`);return t},getNodeMaybe:function(e){return K.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(!P("recoil_memory_managament_2020"))return;const n=K.get(e);var r;(null==n||null===(t=n.shouldDeleteConfigOnRelease)||void 0===t?void 0:t.call(n))&&(K.delete(e),null===(r=X(e))||void 0===r||r(),Y.delete(e))},setConfigDeletionHandler:function(e,t){P("recoil_memory_managament_2020")&&(void 0===t?Y.delete(e):Y.set(e,t))},getConfigDeletionHandler:X,recoilValuesForKeys:function(e){return L(e,(e=>s($.get(e))))},NodeMissingError:J,DefaultValue:H,DEFAULT_VALUE:Q,RecoilValueNotReady:W},ne=function(e,t){t()},re=(Z=function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),i=r-1,o=r/2,a=r/4,s={},c=function(e){return function(){return e}},u=n.hash=function(e){var n=void 0===e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,i=0,o=e.length;i<o;++i)r=(r<<5)-r+e.charCodeAt(i)|0;return r},l=function(e,t){return t>>>e&i},f=function(e){return 1<<e},d=function(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n},p=function(e,t,n,r){var i=r;if(!e){var o=r.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=r[a]}return i[t]=n,i},h=function(e,t,n){var r=n.length-1,i=0,o=0,a=n;if(e)i=o=t;else for(a=new Array(r);i<t;)a[o++]=n[i++];for(++i;i<=r;)a[o++]=n[i++];return e&&(a.length=r),a},v={__hamt_isEmpty:!0},m=function(e){return e===v||e&&e.__hamt_isEmpty},g=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:E}},y=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:_}},b=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:O}},w=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:T}},S=function e(t,n,r,i,o,a){if(r===o)return y(t,r,[a,i]);var s=l(n,r),c=l(n,o);return b(t,f(s)|f(c),s===c?[e(t,n+5,r,i,o,a)]:s<c?[i,a]:[a,i])},k=function(e,t){return e===t.edit},E=function(e,t,n,r,i,o,a){if(t(o,this.key)){var c=r(this.value);return c===this.value?this:c===s?(--a.value,v):k(e,this)?(this.value=c,this):g(e,i,o,c)}var u=r();return u===s?this:(++a.value,S(e,n,this.hash,this,i,g(e,i,o,u)))},_=function(e,t,n,r,i,o,a){if(i===this.hash){var c=function(e,t,n,r,i,o,a,c){for(var u=i.length,l=0;l<u;++l){var f=i[l];if(n(a,f.key)){var d=f.value,v=o(d);return v===d?i:v===s?(--c.value,h(e,l,i)):p(e,l,g(t,r,a,v),i)}}var m=o();return m===s?i:(++c.value,p(e,u,g(t,r,a,m),i))}(k(e,this),e,t,this.hash,this.children,r,o,a);return c===this.children?this:c.length>1?y(e,this.hash,c):c[0]}var u=r();return u===s?this:(++a.value,S(e,n,this.hash,this,i,g(e,i,o,u)))},O=function(e,t,n,r,i,a,s){var c=this.mask,u=this.children,g=l(n,i),y=f(g),S=d(c,y),E=c&y,_=E?u[S]:v,O=_._modify(e,t,n+5,r,i,a,s);if(_===O)return this;var T,x=k(e,this),R=c,A=void 0;if(E&&m(O)){if(!(R&=~y))return v;if(u.length<=2&&((T=u[1^S])===v||1===T.type||2===T.type))return u[1^S];A=h(x,S,u)}else if(E||m(O))A=p(x,S,O,u);else{if(u.length>=o)return function(e,t,n,r,i){for(var o=[],a=r,s=0,c=0;a;++c)1&a&&(o[c]=i[s++]),a>>>=1;return o[t]=n,w(e,s+1,o)}(e,g,O,c,u);R|=y,A=function(e,t,n,r){var i=r.length;if(e){for(var o=i;o>=t;)r[o--]=r[o];return r[t]=n,r}for(var a=0,s=0,c=new Array(i+1);a<t;)c[s++]=r[a++];for(c[t]=n;a<i;)c[++s]=r[a++];return c}(x,S,O,u)}return x?(this.mask=R,this.children=A,this):b(e,R,A)},T=function(e,t,n,r,i,o,s){var c=this.size,u=this.children,f=l(n,i),d=u[f],h=(d||v)._modify(e,t,n+5,r,i,o,s);if(d===h)return this;var g=k(e,this),y=void 0;if(m(d)&&!m(h))++c,y=p(g,f,h,u);else if(!m(d)&&m(h)){if(--c<=a)return function(e,t,n,r){for(var i=new Array(t-1),o=0,a=0,s=0,c=r.length;s<c;++s)if(s!==n){var u=r[s];u&&!m(u)&&(i[o++]=u,a|=1<<s)}return b(e,a,i)}(e,c,f,u);y=p(g,f,v,u)}else y=p(g,f,h,u);return g?(this.size=c,this.children=y,this):w(e,c,y)};function x(e,t,n,r,i){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=i}v._modify=function(e,t,n,r,i,o,a){var c=r();return c===s?v:(++a.value,g(e,i,o,c))},x.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new x(this._editable,this._edit,this._config,e,t)};var R=n.tryGetHash=function(e,t,n,r){for(var i=r._root,o=0,a=r._config.keyEq;;)switch(i.type){case 1:return a(n,i.key)?i.value:e;case 2:if(t===i.hash)for(var s=i.children,c=0,u=s.length;c<u;++c){var p=s[c];if(a(n,p.key))return p.value}return e;case 3:var h=l(o,t),v=f(h);if(i.mask&v){i=i.children[d(i.mask,v)],o+=5;break}return e;case 4:if(i=i.children[l(o,t)]){o+=5;break}return e;default:return e}};x.prototype.tryGetHash=function(e,t,n){return R(e,t,n,this)};var A=n.tryGet=function(e,t,n){return R(e,n._config.hash(t),t,n)};x.prototype.tryGet=function(e,t){return A(e,t,this)};var C=n.getHash=function(e,t,n){return R(void 0,e,t,n)};x.prototype.getHash=function(e,t){return C(e,t,this)},n.get=function(e,t){return R(void 0,t._config.hash(e),e,t)},x.prototype.get=function(e,t){return A(t,e,this)};var I=n.has=function(e,t,n){return R(s,e,t,n)!==s};x.prototype.hasHash=function(e,t){return I(e,t,this)};var N=n.has=function(e,t){return I(t._config.hash(e),e,t)};x.prototype.has=function(e){return N(e,this)};var M=function(e,t){return e===t};n.make=function(e){return new x(0,0,{keyEq:e&&e.keyEq||M,hash:e&&e.hash||u},v,0)},n.empty=n.make();var P=n.isEmpty=function(e){return e&&!!m(e._root)};x.prototype.isEmpty=function(){return P(this)};var L=n.modifyHash=function(e,t,n,r){var i={value:r._size},o=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,i);return r.setTree(o,i.value)};x.prototype.modifyHash=function(e,t,n){return L(n,e,t,this)};var D=n.modify=function(e,t,n){return L(e,n._config.hash(t),t,n)};x.prototype.modify=function(e,t){return D(t,e,this)};var V=n.setHash=function(e,t,n,r){return L(c(n),e,t,r)};x.prototype.setHash=function(e,t,n){return V(e,t,n,this)};var F=n.set=function(e,t,n){return V(n._config.hash(e),e,t,n)};x.prototype.set=function(e,t){return F(e,t,this)};var j=c(s),U=n.removeHash=function(e,t,n){return L(j,e,t,n)};x.prototype.removeHash=x.prototype.deleteHash=function(e,t){return U(e,t,this)};var B=n.remove=function(e,t){return U(t._config.hash(e),e,t)};x.prototype.remove=x.prototype.delete=function(e){return B(e,this)};var q=n.beginMutation=function(e){return new x(e._editable+1,e._edit+1,e._config,e._root,e._size)};x.prototype.beginMutation=function(){return q(this)};var z=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};x.prototype.endMutation=function(){return z(this)};var G=n.mutate=function(e,t){var n=q(t);return e(n),z(n)};x.prototype.mutate=function(e){return G(e,this)};var H=function(e){return e&&Q(e[0],e[1],e[2],e[3],e[4])},Q=function(e,t,n,r,i){for(;n<e;){var o=t[n++];if(o&&!m(o))return W(o,r,[e,t,n,r,i])}return H(i)},W=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return Q(r.length,r,0,t,n);default:return H(n)}},K={done:!0};function $(e){this.v=e}$.prototype.next=function(){if(!this.v)return K;var e=this.v;return this.v=H(e.rest),e},$.prototype[Symbol.iterator]=function(){return this};var J=function(e,t){return new $(W(e._root,t))},Y=function(e){return[e.key,e.value]},X=n.entries=function(e){return J(e,Y)};x.prototype.entries=x.prototype[Symbol.iterator]=function(){return X(this)};var Z=function(e){return e.key},ee=n.keys=function(e){return J(e,Z)};x.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=x.prototype.values=function(e){return J(e,te)};x.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var i=[r.children],o=void 0;o=i.pop();)for(var a=0,s=o.length;a<s;){var c=o[a++];c&&c.type&&(1===c.type?t=e(t,c.value,c.key):i.push(c.children))}return t};x.prototype.fold=function(e,t){return re(e,t,this)};var ie=n.forEach=function(e,t){return re((function(n,r,i){return e(r,i,t)}),null,t)};x.prototype.forEach=function(e){return ie(e,this)};var oe=n.count=function(e){return e._size};x.prototype.count=function(){return oe(this)},Object.defineProperty(x.prototype,"size",{get:x.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n},Z(ee={exports:{}}),ee.exports);class ie{constructor(e){c(this,"_map",void 0),this._map=new Map(null==e?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return ae(this)}toMap(){return new Map(this._map)}}class oe{constructor(e){if(c(this,"_hamt",re.empty.beginMutation()),e instanceof oe){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return ae(this)}toMap(){return new Map(this._hamt)}}function ae(e){return P("recoil_hamt_2020")?new oe(e):new ie(e)}var se=ae,ce=Object.freeze({__proto__:null,persistentMap:se}),ue=function(e,...t){const n=new Set;e:for(const r of e){for(const e of t)if(e.has(r))continue e;n.add(r)}return n},le=function(e,t){const n=new Map;return e.forEach(((e,r)=>{n.set(r,t(e,r))})),n};function fe(e,t,n){const{nodeDeps:r,nodeToNodeSubscriptions:i}=t;e.forEach(((e,t)=>{const o=r.get(t);o&&n&&o!==n.nodeDeps.get(t)||(r.set(t,new Set(e)),(null==o?e:ue(e,o)).forEach((e=>{i.has(e)||i.set(e,new Set),s(i.get(e)).add(t)})),o&&ue(o,e).forEach((e=>{if(!i.has(e))return;const n=s(i.get(e));n.delete(t),0===n.size&&i.delete(e)})))}))}var de={addToDependencyMap:function(e,t,n){n.has(e)||n.set(e,new Set),s(n.get(e)).add(t)},cloneGraph:function(e){return{nodeDeps:le(e.nodeDeps,(e=>new Set(e))),nodeToNodeSubscriptions:le(e.nodeToNodeSubscriptions,(e=>new Set(e)))}},graph:function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},mergeDepsIntoDependencyMap:function(e,t){e.forEach(((e,n)=>{t.has(n)||t.set(n,new Set);const r=s(t.get(n));e.forEach((e=>r.add(e)))}))},saveDependencyMapToStore:function(e,t,n){var r,i,o,a;const s=t.getState();n!==s.currentTree.version&&n!==(null===(r=s.nextTree)||void 0===r?void 0:r.version)&&(null===(i=s.previousTree)||void 0===i||i.version);const c=t.getGraph(n);if(fe(e,c),n===(null===(o=s.previousTree)||void 0===o?void 0:o.version)&&fe(e,t.getGraph(s.currentTree.version),c),n===(null===(a=s.previousTree)||void 0===a?void 0:a.version)||n===s.currentTree.version){var u;const n=null===(u=s.nextTree)||void 0===u?void 0:u.version;void 0!==n&&fe(e,t.getGraph(n),c)}}};const{persistentMap:pe}=ce,{graph:he}=de;let ve=0;const me=()=>ve++;function ge(){const e=me();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:pe(),nonvalidatedAtoms:pe()}}var ye={makeEmptyTreeState:ge,makeEmptyStoreState:function(){const e=ge();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,he()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:me},be=function(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t},we={setByAddingToSet:function(e,t){const n=new Set(e);return n.add(t),n},setByDeletingFromSet:function(e,t){const n=new Set(e);return n.delete(t),n},mapBySettingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n),r},mapByUpdatingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n(r.get(t))),r},mapByDeletingFromMap:function(e,t){const n=new Map(e);return n.delete(t),n},mapByDeletingMultipleFromMap:function(e,t){const n=new Map(e);return t.forEach((e=>n.delete(e))),n}},Se=function*(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)};class ke{}var Ee={RetentionZone:ke,retentionZone:function(){return new ke}};const{setByAddingToSet:_e}=we,{getNode:Oe,getNodeMaybe:Te,recoilValuesForKeys:xe}=te,{RetentionZone:Re}=Ee,Ae=Object.freeze(new Set);class Ce extends Error{}function Ie(e,t,n,r){const i=e.getState();if(i.nodeCleanupFunctions.has(n))return;const o=Oe(n),a=function(e,t,n){if(!P("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=e.getState().retention;function i(e){let n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof Re)i(n);else if(Array.isArray(n))for(const e of n)i(e);return()=>{if(!P("recoil_memory_managament_2020"))return;const r=e.getState().retention.nodesRetainedByZone;function i(e){const n=r.get(e);n&&n.delete(t),n&&0===n.size&&r.delete(e)}if(n instanceof Re)i(n);else if(Array.isArray(n))for(const e of n)i(e)}}(e,n,o.retainedBy),s=o.init(e,t,r);i.nodeCleanupFunctions.set(n,(()=>{s(),a()}))}function Ne(e,t,n){return Oe(n).peek(e,t)}function Me(e,t,n){const r=new Set,i=Array.from(n),o=e.getGraph(t.version);for(let e=i.pop();e;e=i.pop()){var a;r.add(e);const t=null!==(a=o.nodeToNodeSubscriptions.get(e))&&void 0!==a?a:Ae;for(const e of t)r.has(e)||i.push(e)}return r}var Pe={getNodeLoadable:function(e,t,n){return Ie(e,t,n,"get"),Oe(n).get(e,t)},peekNodeLoadable:Ne,setNodeValue:function(e,t,n,r){const i=Oe(n);if(null==i.set)throw new Ce(`Attempt to set read-only RecoilValue: ${n}`);const o=i.set;return Ie(e,t,n,"set"),o(e,t,r)},cleanUpNode:function(e,t){var n;const r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},setUnvalidatedAtomValue_DEPRECATED:function(e,t,n){var r;const i=Te(t);return null==i||null===(r=i.invalidate)||void 0===r||r.call(i,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:_e(e.dirtyAtoms,t)}},peekNodeInfo:function(e,t,n){var r,i,o;const a=e.getState(),s=e.getGraph(t.version),c=a.knownAtoms.has(n)?"atom":a.knownSelectors.has(n)?"selector":void 0,u=Se(Me(e,t,new Set([n])),(e=>e!==n));return{loadable:Ne(e,t,n),isActive:a.knownAtoms.has(n)||a.knownSelectors.has(n),isSet:"selector"!==c&&t.atomValues.has(n),isModified:t.dirtyAtoms.has(n),type:c,deps:xe(null!==(r=s.nodeDeps.get(n))&&void 0!==r?r:[]),subscribers:{nodes:xe(u),components:L(null!==(i=null===(o=a.nodeToComponentSubscriptions.get(n))||void 0===o?void 0:o.values())&&void 0!==i?i:[],(([e])=>({name:e})))}}},getDownstreamNodes:Me,initializeNodeIfNewToStore:Ie};const{getDownstreamNodes:Le,getNodeLoadable:De,setNodeValue:Ve}=Pe,{getNodeMaybe:Fe}=te,{DefaultValue:je,RecoilValueNotReady:Ue}=te,{AbstractRecoilValue:Be,RecoilState:qe,RecoilValueReadOnly:ze,isRecoilValue:Ge}=G;function He(e,t,n){if("set"===n.type){const{recoilValue:r,valueOrUpdater:i}=n,o=function(e,t,{key:n},r){if("function"==typeof r){const i=De(e,t,n);if("loading"===i.state)throw new Ue(n);if("hasError"===i.state)throw i.contents;return r(i.contents)}return r}(e,t,r,i),a=Ve(e,t,r.key,o);for(const[e,n]of a.entries())Qe(t,e,n)}else if("setLoadable"===n.type){const{recoilValue:{key:e},loadable:r}=n;Qe(t,e,r)}else if("markModified"===n.type){const{recoilValue:{key:e}}=n;t.dirtyAtoms.add(e)}else if("setUnvalidated"===n.type){var r;const{recoilValue:{key:e},unvalidatedValue:i}=n,o=Fe(e);null==o||null===(r=o.invalidate)||void 0===r||r.call(o,t),t.atomValues.delete(e),t.nonvalidatedAtoms.set(e,i),t.dirtyAtoms.add(e)}else n.type}function Qe(e,t,n){"hasValue"===n.state&&n.contents instanceof je?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function We(e,t){e.replaceState((n=>{const r=Je(n);for(const n of t)He(e,r,n);return Ye(e,r),r}))}function Ke(e,t){if($e.length){const n=$e[$e.length-1];let r=n.get(e);r||n.set(e,r=[]),r.push(t)}else We(e,[t])}const $e=[];function Je(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function Ye(e,t){const n=Le(e,t,t.dirtyAtoms);for(const e of n){var r,i;null===(r=Fe(e))||void 0===r||null===(i=r.invalidate)||void 0===i||i.call(r,t)}}function Xe(e,t,n){Ke(e,{type:"set",recoilValue:t,valueOrUpdater:n})}let Ze=0;var et={RecoilValueReadOnly:ze,AbstractRecoilValue:Be,RecoilState:qe,getRecoilValueAsLoadable:function(e,{key:t},n=e.getState().currentTree){var r,i;const o=e.getState();n.version!==o.currentTree.version&&n.version!==(null===(r=o.nextTree)||void 0===r?void 0:r.version)&&(n.version,null===(i=o.previousTree)||void 0===i||i.version);const a=De(e,n,t);return"loading"===a.state&&a.contents.catch((()=>{})),a},setRecoilValue:Xe,setRecoilValueLoadable:function(e,t,n){if(n instanceof je)return Xe(e,t,n);Ke(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){Ke(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){Ke(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,{key:t},n,r=null){const i=Ze++,o=e.getState();if(o.nodeToComponentSubscriptions.has(t)||o.nodeToComponentSubscriptions.set(t,new Map),s(o.nodeToComponentSubscriptions.get(t)).set(i,[null!=r?r:"<not captured>",n]),P("recoil_early_rendering_2021")){const r=e.getState().nextTree;r&&r.dirtyAtoms.has(t)&&n(r)}return{release:()=>{const n=e.getState(),r=n.nodeToComponentSubscriptions.get(t);void 0!==r&&r.has(i)&&(r.delete(i),0===r.size&&n.nodeToComponentSubscriptions.delete(t))}}},isRecoilValue:Ge,applyAtomValueWrites:function(e,t){const n=e.clone();return t.forEach(((e,t)=>{"hasValue"===e.state&&e.contents instanceof je?n.delete(t):n.set(t,e)})),n},batchStart:function(){const e=new Map;return $e.push(e),()=>{for(const[t,n]of e)We(t,n);$e.pop()}},writeLoadableToTreeState:Qe,invalidateDownstreams:Ye,copyTreeState:Je,invalidateDownstreams_FOR_TESTING:Ye},tt=function(e,t,n){const r=e.entries();let i=r.next();for(;!i.done;){const o=i.value;if(t.call(n,o[1],o[0],e))return!0;i=r.next()}return!1};const{cleanUpNode:nt}=Pe,{deleteNodeConfigIfPossible:rt,getNode:it}=te,{RetentionZone:ot}=Ee,at=new Set;function st(e,t){const n=e.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const e of t)if(e instanceof ot)for(const t of ut(n,e))i.add(t);else i.add(e);const o=function(e,t){const n=e.getState(),r=n.currentTree,i=e.getGraph(r.version),o=new Set,a=new Set;return function t(c){const u=new Set,l=function(e,t,n,r,i){const o=e.getGraph(t.version),a=[],c=new Set;for(;n.size>0;)u(s(n.values().next().value));return a;function u(e){if(r.has(e)||i.has(e))return void n.delete(e);if(c.has(e))return;const t=o.nodeToNodeSubscriptions.get(e);if(t)for(const e of t)u(e);c.add(e),n.delete(e),a.push(e)}}(e,r,c,o,a);for(const e of l){var f;if("recoilRoot"===it(e).retainedBy){a.add(e);continue}if((null!==(f=n.retention.referenceCounts.get(e))&&void 0!==f?f:0)>0){a.add(e);continue}if(lt(e).some((e=>n.retention.referenceCounts.get(e)))){a.add(e);continue}const t=i.nodeToNodeSubscriptions.get(e);t&&tt(t,(e=>a.has(e)))?a.add(e):(o.add(e),u.add(e))}const d=new Set;for(const e of u)for(const t of null!==(p=i.nodeDeps.get(e))&&void 0!==p?p:at){var p;o.has(t)||d.add(t)}d.size&&t(d)}(t),o}(e,i);for(const t of o)ct(e,r,t)}function ct(e,t,n){if(!P("recoil_memory_managament_2020"))return;nt(e,n);const r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=lt(n);for(const e of i){var o;null===(o=r.retention.nodesRetainedByZone.get(e))||void 0===o||o.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const a=r.graphsByVersion.get(t.version);if(a){const e=a.nodeDeps.get(n);if(void 0!==e){a.nodeDeps.delete(n);for(const t of e){var s;null===(s=a.nodeToNodeSubscriptions.get(t))||void 0===s||s.delete(n)}}a.nodeToNodeSubscriptions.delete(n)}rt(n)}function ut(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:at}function lt(e){const t=it(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof ot?[t]:t}function ft(e,t){P("recoil_memory_managament_2020")&&(e.getState().retention.referenceCounts.delete(t),function(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):st(e,new Set([t]))}(e,t))}var dt={SUSPENSE_TIMEOUT_MS:12e4,updateRetainCount:function(e,t,n){var r;if(!P("recoil_memory_managament_2020"))return;const i=e.getState().retention.referenceCounts,o=(null!==(r=i.get(t))&&void 0!==r?r:0)+n;0===o?ft(e,t):i.set(t,o)},updateRetainCountToZero:ft,releaseScheduledRetainablesNow:function(e){if(!P("recoil_memory_managament_2020"))return;const t=e.getState();st(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()},retainedByOptionWithDefault:function(e){return void 0===e?"recoilRoot":e}},pt={isSSR:"undefined"==typeof window,isReactNative:"undefined"!=typeof navigator&&"ReactNative"===navigator.product};const{unstable_batchedUpdates:ht}=i;var vt={unstable_batchedUpdates:ht};const{unstable_batchedUpdates:mt}=vt;var gt={unstable_batchedUpdates:mt};const{batchStart:yt}=et,{unstable_batchedUpdates:bt}=gt;let wt=bt;var St={getBatcher:()=>wt,setBatcher:e=>{wt=e},batchUpdates:e=>{wt((()=>{let t=()=>{};try{t=yt(),e()}finally{t()}}))}};const{isSSR:kt}=pt,{batchUpdates:Et}=St,{initializeNodeIfNewToStore:_t,peekNodeInfo:Ot}=Pe,{graph:Tt}=de,{DEFAULT_VALUE:xt,recoilValues:Rt,recoilValuesForKeys:At}=te,{AbstractRecoilValue:Ct,getRecoilValueAsLoadable:It,setRecoilValue:Nt,setUnvalidatedRecoilValue:Mt}=et,{updateRetainCount:Pt}=dt,{getNextTreeStateVersion:Lt,makeEmptyStoreState:Dt}=ye;class Vt{constructor(e){c(this,"_store",void 0),c(this,"_refCount",0),c(this,"getLoadable",(e=>(this.checkRefCount_INTERNAL(),It(this._store,e)))),c(this,"getPromise",(e=>(this.checkRefCount_INTERNAL(),this.getLoadable(e).toPromise()))),c(this,"getNodes_UNSTABLE",(e=>{if(this.checkRefCount_INTERNAL(),!0===(null==e?void 0:e.isModified)){if(!1===(null==e?void 0:e.isInitialized))return[];const t=this._store.getState().currentTree;return At(t.dirtyAtoms)}const t=this._store.getState().knownAtoms,n=this._store.getState().knownSelectors;return null==(null==e?void 0:e.isInitialized)?Rt.values():!0===e.isInitialized?At(function*(e){for(const t of e)for(const e of t)yield e}([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):Se(Rt.values(),(({key:e})=>!t.has(e)&&!n.has(e)))})),c(this,"getInfo_UNSTABLE",(({key:e})=>(this.checkRefCount_INTERNAL(),Ot(this._store,this._store.getState().currentTree,e)))),c(this,"map",(e=>{this.checkRefCount_INTERNAL();const t=new Ut(this,Et);return e(t),jt(t.getStore_INTERNAL())})),c(this,"asyncMap",(async e=>{this.checkRefCount_INTERNAL();const t=new Ut(this,Et);return await e(t),jt(t.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{const n=e.graphsByVersion;if(n.has(t))return s(n.get(t));const r=Tt();return n.set(t,r),r},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw o("Cannot subscribe to Snapshots")}};for(const t of this._store.getState().nodeCleanupFunctions.keys())_t(this._store,e.currentTree,t,"get"),Pt(this._store,t,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!P("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){P("recoil_memory_managament_2020")&&(kt||window.setTimeout((()=>this.release_INTERNAL()),0))}release_INTERNAL(){P("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){P("recoil_memory_managament_2020")&&this._refCount}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}}function Ft(e,t,n=!1){const r=e.getState(),i=n?Lt():t.version;return{currentTree:n?{version:i,stateID:i,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(i,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function jt(e,t="current"){const n=e.getState(),r="current"===t?n.currentTree:s(n.previousTree);return new Vt(Ft(e,r))}class Ut extends Vt{constructor(e,t){super(Ft(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),c(this,"_batch",void 0),c(this,"set",((e,t)=>{this.checkRefCount_INTERNAL();const n=this.getStore_INTERNAL();this._batch((()=>{Pt(n,e.key,1),Nt(this.getStore_INTERNAL(),e,t)}))})),c(this,"reset",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();this._batch((()=>{Pt(t,e.key,1),Nt(this.getStore_INTERNAL(),e,xt)}))})),c(this,"setUnvalidatedAtomValues_DEPRECATED",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();Et((()=>{for(const[n,r]of e.entries())Pt(t,n,1),Mt(t,new Ct(n),r)}))})),this._batch=t}}var Bt={Snapshot:Vt,MutableSnapshot:Ut,freshSnapshot:function(e){const t=new Vt(Dt());return null!=e?t.map(e):t},cloneSnapshot:jt},qt=Bt.Snapshot,zt=Bt.MutableSnapshot,Gt=Bt.freshSnapshot,Ht=Bt.cloneSnapshot,Qt=Object.freeze({__proto__:null,Snapshot:qt,MutableSnapshot:zt,freshSnapshot:Gt,cloneSnapshot:Ht});const{getNextTreeStateVersion:Wt,makeEmptyStoreState:Kt}=ye,{cleanUpNode:$t,getDownstreamNodes:Jt,setNodeValue:Yt,setUnvalidatedAtomValue_DEPRECATED:Xt}=Pe,{graph:Zt}=de,{cloneGraph:en}=de,{applyAtomValueWrites:tn}=et,{releaseScheduledRetainablesNow:nn}=dt,{freshSnapshot:rn}=Qt,{useCallback:on,useContext:an,useEffect:sn,useMemo:cn,useRef:un,useState:ln}=r;function fn(){throw o("This component must be used inside a <RecoilRoot> component.")}const dn=Object.freeze({getState:fn,replaceState:fn,getGraph:fn,subscribeToTransactions:fn,addTransactionMetadata:fn});let pn=!1;function hn(e){if(pn)throw o("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(null===t.nextTree){P("recoil_memory_managament_2020")&&P("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&nn(e);const n=t.currentTree.version,r=Wt();t.nextTree={...t.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(r,en(s(t.graphsByVersion.get(n))))}}const vn=r.createContext({current:dn}),mn=()=>an(vn),gn=r.createContext(null);function yn(e,t,n){const r=Jt(e,n,n.dirtyAtoms);for(const e of r){const r=t.nodeToComponentSubscriptions.get(e);if(r)for(const[e,[t,i]]of r)i(n)}}function bn(e){const t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){for(const[n,i]of t.nodeTransactionSubscriptions)if(r.has(n))for(const[t,n]of i)n(e);for(const[n,r]of t.transactionSubscriptions)r(e);P("recoil_early_rendering_2021")&&!t.suspendedComponentResolvers.size||(yn(e,t,n),t.suspendedComponentResolvers.forEach((e=>e())),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((e=>e(n))),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function wn({setNotifyBatcherOfChange:e}){const t=mn(),[n,r]=ln([]);return e((()=>r({}))),sn((()=>{ne("Batcher",(()=>{!function(e){const t=e.current.getState();t.commitDepth++;try{const{nextTree:n}=t;if(null===n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,bn(e.current),null!=t.previousTree&&t.graphsByVersion.delete(t.previousTree.version),t.previousTree=null,P("recoil_memory_managament_2020")&&nn(e.current)}finally{t.commitDepth--}}(t)}))})),sn((()=>()=>{e((()=>{}))}),[e]),null}let Sn=0;function kn({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:n,children:i}){var o;let a;const c=un(null),u=on((e=>{c.current=e}),[c]),l=null!==(o=r.createMutableSource)&&void 0!==o?o:r.unstable_createMutableSource,f=null!=n?n:{getState:()=>a.current,replaceState:e=>{const t=d.current.getState();hn(d.current);const n=s(t.nextTree);let r;try{pn=!0,r=e(n)}finally{pn=!1}r!==n&&(t.nextTree=r,P("recoil_early_rendering_2021")&&yn(f,t,r),s(c.current)())},getGraph:e=>{const t=a.current.graphsByVersion;if(t.has(e))return s(t.get(e));const n=Zt();return t.set(e,n),n},subscribeToTransactions:(e,t)=>{if(null==t){const{transactionSubscriptions:t}=d.current.getState(),n=Sn++;return t.set(n,e),{release:()=>{t.delete(n)}}}{const{nodeTransactionSubscriptions:n}=d.current.getState();n.has(t)||n.set(t,new Map);const r=Sn++;return s(n.get(t)).set(r,e),{release:()=>{const e=n.get(t);e&&(e.delete(r),0===e.size&&n.delete(t))}}}},addTransactionMetadata:e=>{hn(d.current);for(const t of Object.keys(e))s(d.current.getState().nextTree).transactionMetadata[t]=e[t]}},d=un(f);a=un(null!=e?function(e,t){const n=Kt();return t({set:(t,r)=>{const i=n.currentTree,o=Yt(e,i,t.key,r),a=new Set(o.keys()),s=i.nonvalidatedAtoms.clone();for(const e of a)s.delete(e);n.currentTree={...i,dirtyAtoms:be(i.dirtyAtoms,a),atomValues:tn(i.atomValues,o),nonvalidatedAtoms:s}},setUnvalidatedAtomValues:e=>{e.forEach(((e,t)=>{n.currentTree=Xt(n.currentTree,t,e)}))}}),n}(f,e):null!=t?function(e){return rn().map(e).getStore_INTERNAL().getState()}(t):Kt());const p=cn((()=>l?l(a,(()=>a.current.currentTree.version)):null),[l,a]);return sn((()=>()=>{for(const e of d.current.getState().knownAtoms)$t(d.current,e)}),[]),r.createElement(vn.Provider,{value:d},r.createElement(gn.Provider,{value:p},r.createElement(wn,{setNotifyBatcherOfChange:u}),i))}var En={useStoreRef:mn,useRecoilMutableSource:function(){const e=an(gn);return e},RecoilRoot:function(e){const{override:t,...n}=e,i=mn();return!1===t&&i.current!==dn?e.children:r.createElement(kn,n)},notifyComponents_FOR_TESTING:yn,sendEndOfBatchNotifications_FOR_TESTING:bn};const{useRef:_n}=r;var On=function(){return _n(),"<component name not available>"};const{useEffect:Tn,useRef:xn}=r;var Rn=function(e){const t=xn();return Tn((()=>{t.current=e})),t.current};const{useStoreRef:An}=En,{SUSPENSE_TIMEOUT_MS:Cn}=dt,{updateRetainCount:In}=dt,{RetentionZone:Nn}=Ee,{isSSR:Mn}=pt,{useEffect:Pn,useRef:Ln}=r;var Dn=function(e){if(P("recoil_memory_managament_2020"))return function(e){const t=(Array.isArray(e)?e:[e]).map((e=>e instanceof Nn?e:e.key)),n=An();Pn((()=>{if(!P("recoil_memory_managament_2020"))return;const e=n.current;if(r.current&&!Mn)window.clearTimeout(r.current),r.current=null;else for(const n of t)In(e,n,1);return()=>{for(const n of t)In(e,n,-1)}}),[n,...t]);const r=Ln(),i=Rn(t);if(!(Mn||void 0!==i&&function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(i,t))){const e=n.current;for(const n of t)In(e,n,1);if(i)for(const t of i)In(e,t,-1);r.current&&window.clearTimeout(r.current),r.current=window.setTimeout((()=>{r.current=null;for(const n of t)In(e,n,-1)}),Cn)}}(e)};const{batchUpdates:Vn}=St,{DEFAULT_VALUE:Fn}=te,{useRecoilMutableSource:jn,useStoreRef:Un}=En,{isRecoilValue:Bn}=G,{AbstractRecoilValue:qn,getRecoilValueAsLoadable:zn,setRecoilValue:Gn,setUnvalidatedRecoilValue:Hn,subscribeToRecoilValue:Qn}=et,{setByAddingToSet:Wn}=we,{mutableSourceExists:Kn,useMutableSource:$n}=C,{useCallback:Jn,useEffect:Yn,useMemo:Xn,useRef:Zn,useState:er}=r;function tr(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state)throw new Promise((e=>{n.current.getState().suspendedComponentResolvers.add(e)}));throw"hasError"===e.state?e.contents:o(`Invalid value of loadable atom "${t.key}"`)}function nr(e){return P("recoil_memory_managament_2020")&&Dn(e),Kn()?function(e){const t=Un(),n=Jn((()=>{var n;const r=t.current,i=r.getState(),o=P("recoil_early_rendering_2021")&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return zn(r,e,o)}),[t,e]),r=Jn((()=>n()),[n]),i=On(),o=Jn(((r,o)=>{const a=t.current;return Qn(a,e,(()=>{if(!P("recoil_suppress_rerender_in_callback"))return o();const e=n();c.current.is(e)||o(),c.current=e}),i).release}),[t,e,i,n]),a=jn(),s=$n(a,r,o),c=Zn(s);return Yn((()=>{c.current=s})),s}(e):function(e){const t=Un(),[n,r]=er([]),i=On();Yn((()=>{const n=t.current,o=n.getState(),s=Qn(n,e,(t=>{var i;if(!P("recoil_suppress_rerender_in_callback"))return r([]);const o=zn(n,e,n.getState().currentTree);(null===(i=a.current)||void 0===i?void 0:i.is(o))||r(o),a.current=o}),i);if(o.nextTree)n.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{a.current=null,r([])}));else{var c;if(!P("recoil_suppress_rerender_in_callback"))return r([]);const t=zn(n,e,n.getState().currentTree);(null===(c=a.current)||void 0===c?void 0:c.is(t))||r(t),a.current=t}return s.release}),[i,e,t]);const o=zn(t.current,e),a=Zn(o);return Yn((()=>{a.current=o})),o}(e)}function rr(e){const t=Un();return tr(nr(e),e,t)}function ir(e){const t=Un();return Jn((n=>{Gn(t.current,e,n)}),[t,e])}var or={recoilComponentGetRecoilValueCount_FOR_TESTING:{current:0},useRecoilInterface:function(){const e=Un(),[,t]=er([]),n=Zn(new Set);n.current=new Set;const r=Zn(new Set),i=Zn(new Map),o=Jn((e=>{const t=i.current.get(e);t&&(t.release(),i.current.delete(e))}),[i]),a=On();return Yn((()=>{const s=e.current;function c(e,n){i.current.has(n)&&t([])}ue(n.current,r.current).forEach((e=>{if(i.current.has(e))return;const t=Qn(s,new qn(e),(t=>{c(0,e)}),a);i.current.set(e,t),s.getState().nextTree?s.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{c(s.getState(),e)})):c(s.getState(),e)})),ue(r.current,n.current).forEach((e=>{o(e)})),r.current=n.current})),Yn((()=>{const e=i.current;return()=>e.forEach(((e,t)=>o(t)))}),[o]),Xn((()=>{function t(t){return n=>{Gn(e.current,t,n)}}function r(t){var r;n.current.has(t.key)||(n.current=Wn(n.current,t.key));const i=e.current.getState();return zn(e.current,t,P("recoil_early_rendering_2021")&&null!==(r=i.nextTree)&&void 0!==r?r:i.currentTree)}function i(t){return tr(r(t),t,e)}return{getRecoilValue:i,getRecoilValueLoadable:r,getRecoilState:function(e){return[i(e),t(e)]},getRecoilStateLoadable:function(e){return[r(e),t(e)]},getSetRecoilState:t,getResetRecoilState:function(t){return()=>Gn(e.current,t,Fn)}}}),[n,e])},useRecoilState:function(e){return[rr(e),ir(e)]},useRecoilStateLoadable:function(e){return[nr(e),ir(e)]},useRecoilValue:rr,useRecoilValueLoadable:nr,useResetRecoilState:function(e){const t=Un();return Jn((()=>{Gn(t.current,e,Fn)}),[t,e])},useSetRecoilState:ir,useSetUnvalidatedAtomValues:function(){const e=Un();return(t,n={})=>{Vn((()=>{e.current.addTransactionMetadata(n),t.forEach(((t,n)=>Hn(e.current,new qn(n),t)))}))}}};const{batchUpdates:ar}=St,{DEFAULT_VALUE:sr,getNode:cr,nodes:ur}=te,{useStoreRef:lr}=En,{AbstractRecoilValue:fr,setRecoilValueLoadable:dr}=et,{SUSPENSE_TIMEOUT_MS:pr}=dt,{Snapshot:hr,cloneSnapshot:vr}=Qt,{isSSR:mr}=pt,{useCallback:gr,useEffect:yr,useRef:br,useState:wr}=r;function Sr(e){const t=lr();yr((()=>t.current.subscribeToTransactions(e).release),[e,t])}function kr(e){const t=e.atomValues.toMap(),n=le(function(e,t){const n=new Map;for(const[r,i]of e)t(i,r)&&n.set(r,i);return n}(t,((e,t)=>{const n=cr(t).persistence_UNSTABLE;return null!=n&&"none"!==n.type&&"hasValue"===e.state})),(e=>e.contents));return function(...e){const t=new Map;for(let n=0;n<e.length;n++){const r=e[n].keys();let i;for(;!(i=r.next()).done;)t.set(i.value,e[n].get(i.value))}return t}(e.nonvalidatedAtoms.toMap(),n)}var Er={useRecoilSnapshot:function(){const e=lr(),[t,n]=wr((()=>vr(e.current))),r=Rn(t),i=br();return yr((()=>(i.current&&!mr&&window.clearTimeout(i.current),t.retain())),[t]),Sr(gr((e=>n(vr(e))),[])),r===t||mr||(i.current&&(null==r||r.release_INTERNAL(),window.clearTimeout(i.current)),t.retain(),i.current=window.setTimeout((()=>{t.release_INTERNAL(),i.current=null}),pr)),t},useGotoRecoilSnapshot:function(){const e=lr();return gr((t=>{var n;const r=e.current.getState(),i=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,o=t.getStore_INTERNAL().getState().currentTree;ar((()=>{const n=new Set;for(const e of[i.atomValues.keys(),o.atomValues.keys()])for(const t of e){var r,a;(null===(r=i.atomValues.get(t))||void 0===r?void 0:r.contents)!==(null===(a=o.atomValues.get(t))||void 0===a?void 0:a.contents)&&cr(t).shouldRestoreFromSnapshots&&n.add(t)}n.forEach((t=>{dr(e.current,new fr(t),o.atomValues.has(t)?s(o.atomValues.get(t)):sr)})),e.current.replaceState((e=>({...e,stateID:t.getID_INTERNAL()})))}))}),[e])},useRecoilTransactionObserver:function(e){Sr(gr((t=>{const n=vr(t,"current"),r=vr(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},useTransactionObservation_DEPRECATED:function(e){Sr(gr((t=>{let n=t.getState().previousTree;const r=t.getState().currentTree;n||(n=t.getState().currentTree);const i=kr(r),o=kr(n),a=le(ur,(e=>{var t,n,r,i;return{persistence_UNSTABLE:{type:null!==(t=null===(n=e.persistence_UNSTABLE)||void 0===n?void 0:n.type)&&void 0!==t?t:"none",backButton:null!==(r=null===(i=e.persistence_UNSTABLE)||void 0===i?void 0:i.backButton)&&void 0!==r&&r}}})),s=function(e,t){const n=new Set;for(const r of e)t(r)&&n.add(r);return n}(r.dirtyAtoms,(e=>i.has(e)||o.has(e)));e({atomValues:i,previousAtomValues:o,atomInfo:a,modifiedAtoms:s,transactionMetadata:{...r.transactionMetadata}})}),[e]))},useTransactionSubscription_DEPRECATED:Sr};const{peekNodeInfo:_r}=Pe,{useStoreRef:Or}=En;const{RecoilRoot:Tr,useStoreRef:xr}=En,{useMemo:Rr}=r;const{loadableWithValue:Ar}=R,{DEFAULT_VALUE:Cr,getNode:Ir}=te,{copyTreeState:Nr,getRecoilValueAsLoadable:Mr,invalidateDownstreams:Pr,writeLoadableToTreeState:Lr}=et;function Dr(e){return"atom"===Ir(e.key).nodeType}class Vr{constructor(e,t){c(this,"_store",void 0),c(this,"_treeState",void 0),c(this,"_changes",void 0),c(this,"get",(e=>{if(this._changes.has(e.key))return this._changes.get(e.key);if(!Dr(e))throw o("Reading selectors within atomicUpdate is not supported");const t=Mr(this._store,e,this._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:o(`Expected Recoil atom ${e.key} to have a value, but it is in a loading state.`)})),c(this,"set",((e,t)=>{if(!Dr(e))throw o("Setting selectors within atomicUpdate is not supported");if("function"==typeof t){const n=this.get(e);this._changes.set(e.key,t(n))}else this._changes.set(e.key,t)})),c(this,"reset",(e=>{this.set(e,Cr)})),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(0===this._changes.size)return this._treeState;const e=Nr(this._treeState);for(const[t,n]of this._changes)Lr(e,t,Ar(n));return Pr(this._store,e),e}}var Fr=function(e){return t=>{e.replaceState((n=>{const r=new Vr(e,n);return t(r),r.newTreeState_INTERNAL()}))}},jr=Object.freeze({__proto__:null,atomicUpdater:Fr}),Ur=function(e,t){if(!e)throw new Error(t)};const{atomicUpdater:Br}=jr,{batchUpdates:qr}=St,{DEFAULT_VALUE:zr}=te,{useStoreRef:Gr}=En,{setRecoilValue:Hr}=et,{Snapshot:Qr,cloneSnapshot:Wr}=Qt,{useGotoRecoilSnapshot:Kr}=Er,{useCallback:$r}=r;class Jr{}const Yr=new Jr;const{getNode:Xr}=te,{useStoreRef:Zr}=En,{useCallback:ei}=r;const{atomicUpdater:ti}=jr,{useStoreRef:ni}=En,{useMemo:ri}=r;const{isReactNative:ii,isSSR:oi}=pt;function ai(e,t,n){if("string"==typeof e&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null==t?void 0:t.allowFunctions))throw o("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(null===e)return"null";var r;if("object"!=typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(a(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map(((e,n)=>ai(e,t,n.toString())))}]`;if("function"==typeof e.toJSON)return ai(e.toJSON(n),t,n);if(e instanceof Map){const r={};for(const[n,i]of e)r["string"==typeof n?n:ai(n,t)]=i;return ai(r,t,n)}return e instanceof Set?ai(Array.from(e).sort(((e,n)=>ai(e,t).localeCompare(ai(n,t)))),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]?ai(Array.from(e),t,n):`{${Object.keys(e).filter((t=>void 0!==e[t])).sort().map((n=>`${ai(n,t)}:${ai(e[n],t,n)}`)).join(",")}}`}var si=function(e,t={allowFunctions:!1}){return ai(e,t)};const ci=(e,t,n)=>{var r;if(null==e)return;if(null==n||null===(r=n.onNodeVisit)||void 0===r||r.call(n,e),"leaf"===e.type)return e;const i=t(e.nodeKey);return ci(e.branches.get(i),t,n)},ui=(e,t,n,r,i,o,a)=>{var s;let c;if(null==e)if(0===t.length)c={type:"leaf",value:r,parent:n,branchKey:i};else{const[e,...s]=t,[u,l]=e;c={type:"branch",nodeKey:u,parent:n,branches:new Map,branchKey:i},c.branches.set(l,ui(null,s,c,r,l,o,a))}else if(c=e,t.length){const[n,...i]=t,[s,u]=n;if("branch"!==e.type||e.nodeKey!==s)return a(),c;e.branches.set(u,ui(e.branches.get(u),i,e,r,u,o,a))}return null==o||null===(s=o.onNodeVisit)||void 0===s||s.call(o,c),c},li=(e,t,n)=>n?(0===t.branches.size&&n.branches.delete(t.branchKey),li(e,n,n.parent)):e===t,fi=e=>"leaf"===e.type?1:Array.from(e.branches.values()).reduce(((e,t)=>e+fi(t)),0);var di=Object.freeze({__proto__:null,TreeCache:class{constructor(e){var t,n,r;c(this,"_numLeafs",void 0),c(this,"_root",void 0),c(this,"_onHit",void 0),c(this,"_onSet",void 0),c(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=null!==(t=null==e?void 0:e.onHit)&&void 0!==t?t:()=>{},this._onSet=null!==(n=null==e?void 0:e.onSet)&&void 0!==n?n:()=>{},this._mapNodeValue=null!==(r=null==e?void 0:e.mapNodeValue)&&void 0!==r?r:e=>e}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}getLeafNode(e,t){return ci(this.root(),(t=>this._mapNodeValue(e(t))),{onNodeVisit:e=>{null==t||t.onNodeVisit(e),"leaf"===e.type&&this._onHit(e)}})}set(e,t,n){let r,i=null;const o=()=>{i=ui(this.root(),e.map((([e,t])=>[e,this._mapNodeValue(t)])),null,t,null,{onNodeVisit:e=>{null==n||n.onNodeVisit(e),"leaf"===e.type&&(r=e)}},(()=>{this.clear(),o()}))};o(),this.root()||(this._root=i),this._numLeafs++,this._onSet(s(r))}delete(e){if(!this.root())return!1;const t=s(this.root());return!!((e,t,n)=>n?(n.branches.delete(t.branchKey),li(e,n,n.parent)):e===t)(t,e,e.parent)&&(e===t||"branch"===t.type&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=fi(e),!0))}clear(){this._numLeafs=0,this._root=null}}}),pi=Object.freeze({__proto__:null,LRUCache:class{constructor(e){var t;c(this,"_maxSize",void 0),c(this,"_size",void 0),c(this,"_head",void 0),c(this,"_tail",void 0),c(this,"_map",void 0),c(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(t=e.mapKey)&&void 0!==t?t:e=>e}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){const n=this._keyMapper(e);this._map.get(n)&&this.delete(e);const r=this.head(),i={key:e,right:r,left:null,value:t};r?r.left=i:this._tail=i,this._map.set(n,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const n=s(this._map.get(t)),r=n.right,i=n.left;r&&(r.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=i),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}});const{LRUCache:hi}=pi,{TreeCache:vi}=di;var mi=function(e,t=(e=>e)){const n=new hi({maxSize:e}),r=new vi({mapNodeValue:t,onHit:e=>{n.set(e,!0)},onSet:t=>{const i=n.tail();n.set(t,!0),i&&r.size()>e&&r.delete(i.key)}});return r};const{TreeCache:gi}=di,yi={equality:"reference",eviction:"keep-all",maxSize:1/0};const{loadableWithError:bi,loadableWithPromise:wi,loadableWithValue:Si}=R,{getNodeLoadable:ki,peekNodeLoadable:Ei,setNodeValue:_i}=Pe,{saveDependencyMapToStore:Oi}=de,{DEFAULT_VALUE:Ti,RecoilValueNotReady:xi,getConfigDeletionHandler:Ri,getNode:Ai,registerNode:Ci}=te,{isRecoilValue:Ii}=G,{AbstractRecoilValue:Ni}=G,{markRecoilValueModified:Mi,setRecoilValueLoadable:Pi}=et,{retainedByOptionWithDefault:Li}=dt,{cloneSnapshot:Di}=Qt,{startPerfBlock:Vi}={startPerfBlock:function(e){return()=>null}};class Fi{}const ji=new Fi,Ui=[],Bi=new Map,qi=(()=>{let e=0;return()=>e++})();var zi=function(e){let t=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=e,c=null!=e.set?e.set:void 0,u=new Set,l=function({equality:e=yi.equality,eviction:t=yi.eviction,maxSize:n=yi.maxSize}=yi){const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>si(e)}throw o(`Unrecognized equality policy ${e}`)}(e),i=function(e,t,n){switch(e){case"keep-all":return new gi({mapNodeValue:n});case"lru":return mi(s(t),n);case"most-recent":return mi(1,n)}throw o(`Unrecognized eviction policy ${e}`)}(t,n,r);return i}(null!=i?i:{equality:"reference",eviction:"keep-all"}),f=Li(e.retainedBy_UNSTABLE),d=new Map;let p=0;function h(){return!P("recoil_memory_managament_2020")||p>0}function v(e){return d.has(e)||d.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}),s(d.get(e))}function m(e){return p++,e.getState().knownSelectors.add(n),()=>{p--,e.getState().knownSelectors.delete(n),d.delete(e)}}function g(){return void 0!==Ri(n)&&!h()}function y(e,t,n){if("loading"===t.state){let t=Bi.get(n);null==t&&Bi.set(n,t=new Set),t.add(e)}}function b(e,t,n){const r=e.getState().knownSelectors.has(n);if(r&&t.atomValues.has(n))return s(t.atomValues.get(n));const i=ki(e,t,n);return"loading"!==i.state&&r&&t.atomValues.set(n,i),i}function w(e,t,n,r,i,o){return t.then((r=>{if(!h())throw C(e,i),ji;null!=o.loadingDepKey&&o.loadingDepPromise===t?n.atomValues.set(o.loadingDepKey,Si(r)):e.getState().knownSelectors.forEach((e=>{n.atomValues.delete(e)}));const a=_(e,n);if(a&&"hasValue"===a.state)return R(a,e),a.contents;if(!I(e,i)){var s;const e=T(n);if("loading"===(null==e||null===(s=e.latestLoadable)||void 0===s?void 0:s.state))return e.latestLoadable.contents}const[c,u]=E(e,n,i);if(I(e,i)&&A(u,e,i),"loading"!==c.state&&(M(n,O(u),c),k(e,n,new Set(u.keys()),i),S(e,c,i)),"hasError"===c.state)throw c.contents;return c.contents})).catch((t=>{if(t instanceof Fi)throw ji;if(!h())throw C(e,i),ji;const o=bi(t);throw N(),M(n,O(r),bi(t)),k(e,n,new Set(r.keys()),i),S(e,o,i),t}))}function S(e,t,r){I(e,r)&&(R(t,e),function(e,t){const r=Bi.get(t);if(void 0!==r){for(const t of r)Pi(t,new Ni(n),e);Bi.delete(t)}}(t,r))}function k(e,t,r,i){var o,a,s,c,u,l,f;(I(e,i)||t.version===(null===(o=e.getState())||void 0===o||null===(a=o.currentTree)||void 0===a?void 0:a.version)||t.version===(null===(s=e.getState())||void 0===s||null===(c=s.nextTree)||void 0===c?void 0:c.version))&&Oi(new Map([[n,r]]),e,null!==(u=null===(l=e.getState())||void 0===l||null===(f=l.nextTree)||void 0===f?void 0:f.version)&&void 0!==u?u:e.getState().currentTree.version)}function E(e,t,i){const s=Vi(n);let c,u,l=!1;const f={loadingDepKey:null,loadingDepPromise:null},d=new Map,p=new Set;function v(n){const{key:r}=n;!function(e,t,n,r,i){n.add(r),k(e,t,n,i)}(e,t,p,r,i);const a=b(e,t,r);switch(d.set(r,a),a.state){case"hasValue":return a.contents;case"hasError":throw a.contents;case"loading":throw f.loadingDepKey=r,f.loadingDepPromise=a.contents,a.contents}throw o("Invalid Loadable state")}k(e,t,p,i);let m=!1;const g=t=>(...n)=>{if(!m)throw o("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");const r=Di(e),i=t({snapshot:r});if("function"!=typeof i)throw o("getCallback() expects a function that returns a function.");return i(...n)};try{c=r({get:v,getCallback:g}),c=Ii(c)?v(c):c,m=!0,a(c)?c=function(e,t,n,r,i,o){return t.then((t=>{if(!h())throw C(e,i),ji;const o=Si(t);return N(),M(n,O(r),o),k(e,n,new Set(r.keys()),i),S(e,o,i),t})).catch((t=>{if(!h())throw C(e,i),ji;if(I(e,i)&&A(r,e,i),a(t))return w(e,t,n,r,i,o);const s=bi(t);throw N(),M(n,O(r),s),k(e,n,new Set(r.keys()),i),S(e,s,i),t}))}(e,c,t,d,i,f).finally(s):s()}catch(n){c=n,a(c)?c=w(e,c,t,d,i,f).finally(s):(l=!0,s())}return u=l?bi(c):a(c)?wi(c):Si(c),"loading"!==u.state&&N(u.contents),[u,d]}function _(e,t){const r=new Set,i=v(e);let a;try{a=l.get((n=>("string"!=typeof n&&Ur(!1),b(e,t,n).contents)),{onNodeVisit:e=>{"branch"===e.type&&e.nodeKey!==n&&"string"==typeof e.nodeKey&&(r.add(e.nodeKey),u.add(e.nodeKey))}})}catch(e){throw o(`Problem with cache lookup for selector "${n}": ${e.message}`)}return a&&k(e,t,r,i.latestExecutionId),a}function O(e){return Array.from(e.entries()).map((([e,t])=>[e,t.contents]))}function T(e){var t;const[,n]=null!==(t=Array.from(d.entries()).find((([t,n])=>null!=n.latestLoadable&&null!=n.latestExecutionId&&!function(e,t){var n,r;const i=v(e),o=null!==(n=i.depValuesDiscoveredSoFarDuringAsyncWork)&&void 0!==n?n:new Map,a=Array((null!==(r=x.get(t.version))&&void 0!==r?r:new Map).entries()),s=x.has(t.version)&&a.length===o.size&&a.every((([e,t])=>o.get(e)===t));return null!=o&&t.version!==i.stateVersion&&!s&&(x.set(t.version,new Map(o)),Array.from(o).some((([n,r])=>b(e,t,n).contents!==r.contents)))}(t,e))))&&void 0!==t?t:[];return n}const x=new Map;function R(e,t,n,r,i){const o=v(t);"loading"===e.state?(o.depValuesDiscoveredSoFarDuringAsyncWork=n,o.latestExecutionId=r,o.latestLoadable=e,o.stateVersion=null==i?void 0:i.version):(o.depValuesDiscoveredSoFarDuringAsyncWork=null,o.latestExecutionId=null,o.latestLoadable=null,o.stateVersion=null)}function A(e,t,n){const r=v(t);I(t,n)&&(r.depValuesDiscoveredSoFarDuringAsyncWork=e)}function C(e,t){I(e,t)&&d.delete(e)}function I(e,t){return t===v(e).latestExecutionId}function N(e){}function M(e,t,r){e.atomValues.set(n,r);try{l.set(t,r)}catch(e){throw o(`Problem with setting cache for selector "${n}": ${e.message}`)}}function L(e,t){return l.get((n=>{"string"!=typeof n&&Ur(!1);const r=Ei(e,t,n);return null==r?void 0:r.contents}))}function D(e,t){return function(r){if(Ui.includes(n)){const e=`Recoil selector has circular dependencies: ${Ui.slice(Ui.indexOf(n)).join(" → ")}`;return bi(o(e))}Ui.push(n);try{return function(e,t){const n=_(e,t);if(null!=n)return R(n,e),n;const r=T(t);if(r){const t=r;return y(e,s(t.latestLoadable),s(t.latestExecutionId)),s(t.latestLoadable)}return function(e,t){const n=qi(),[r,i]=E(e,t,n);return R(r,e,i,n,t),function(e,t,n){"loading"!==n.state&&M(e,t,n)}(t,O(i),r),y(e,r,n),r}(e,t)}(e,t)}finally{Ui.pop()}}()}function V(e){e.atomValues.delete(n)}function F(e,n){null==t&&Ur(!1);for(const t of u){var r;const i=Ai(t);null===(r=i.clearCache)||void 0===r||r.call(i,e,n)}V(n),l.clear(),Mi(e,t)}return t=Ci(null!=c?{key:n,nodeType:"selector",peek:L,get:D,set:(e,t,n)=>{let r=!1;const i=new Map;function s({key:n}){if(r)throw o("Recoil: Async selector sets are not currently supported.");const i=b(e,t,n);if("hasValue"===i.state)return i.contents;throw"loading"===i.state?new xi(n):i.contents}function u(n,a){if(r)throw o("Recoil: Async selector sets are not currently supported.");const c="function"==typeof a?a(s(n)):a;_i(e,t,n.key,c).forEach(((e,t)=>i.set(t,e)))}const l=c({set:u,get:s,reset:function(e){u(e,Ti)}},n);if(void 0!==l)throw a(l)?o("Recoil: Async selector sets are not currently supported."):o("Recoil: selector set should be a void function.");return r=!0,i},init:m,invalidate:V,clearCache:F,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:f}:{key:n,nodeType:"selector",peek:L,get:D,init:m,invalidate:V,clearCache:F,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:f})};const{loadableWithError:Gi,loadableWithPromise:Hi,loadableWithValue:Qi}=R,{peekNodeInfo:Wi}=Pe,{DEFAULT_VALUE:Ki,DefaultValue:$i,getConfigDeletionHandler:Ji,registerNode:Yi,setConfigDeletionHandler:Xi}=te,{isRecoilValue:Zi}=G,{getRecoilValueAsLoadable:eo,markRecoilValueModified:to,setRecoilValue:no,setRecoilValueLoadable:ro}=et,{retainedByOptionWithDefault:io}=dt;var oo=function e(t){const{default:n,...r}=t;return Zi(n)?function(t){const n=e({...t,default:Ki,persistence_UNSTABLE:void 0===t.persistence_UNSTABLE?void 0:{...t.persistence_UNSTABLE,validator:e=>e instanceof $i?e:s(t.persistence_UNSTABLE).validator(e,Ki)},effects_UNSTABLE:t.effects_UNSTABLE}),r=zi({key:`${t.key}__withFallback`,get:({get:e})=>{const r=e(n);return r instanceof $i?t.default:r},set:({set:e},t)=>e(n,t),dangerouslyAllowMutability:t.dangerouslyAllowMutability});return Xi(r.key,Ji(t.key)),r}({...r,default:n}):function(e){const{key:t,persistence_UNSTABLE:n}=e,r=io(e.retainedBy_UNSTABLE);let i,c=0,u=a(e.default)?Hi(e.default.then((e=>(u=Qi(e),e))).catch((e=>{throw u=Gi(e),e}))):Qi(e.default);e.default;const l=new Map,f=Yi({key:t,nodeType:"atom",peek:function(e,n){var r,o;return null!==(r=null!==(o=n.atomValues.get(t))&&void 0!==o?o:i)&&void 0!==r?r:u},get:function(e,r){if(r.atomValues.has(t))return s(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=i)return i;if(null==n)return u;const e=r.nonvalidatedAtoms.get(t),o=n.validator(e,Ki),a=o instanceof $i?u:Qi(o);return i=a,i}return u},set:function(e,n,r){if(n.atomValues.has(t)){const e=s(n.atomValues.get(t));if("hasValue"===e.state&&r===e.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof $i)return new Map;return i=void 0,(new Map).set(t,Qi(r))},init:function(n,r,i){c++;const s=n.getState().knownAtoms.has(t);if(n.getState().knownAtoms.add(t),"loading"===u.state){const e=()=>{var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||to(n,f)};u.contents.then(e).catch(e)}let d=Ki,p=null;if(null!=e.effects_UNSTABLE&&!s){let r=!0;function s(e){if(r&&e.key===t&&!(d instanceof $i)){const e=d;return e instanceof $i?u:a(e)?Hi(e.then((e=>e instanceof $i?u.toPromise():e))):Qi(e)}return eo(n,e)}function c(e){return s(e).toPromise()}function m(e){var i;const o=Wi(n,null!==(i=n.getState().nextTree)&&void 0!==i?i:n.getState().currentTree,e.key);return!r||e.key!==t||d instanceof $i?o:{...o,isSet:!0,loadable:s(e)}}const g=e=>t=>{if(r){const n=d instanceof $i||a(d)?"hasValue"===u.state?u.contents:Ki:d;d="function"==typeof t?t(n):t,a(d)&&(d=d.then((t=>(p={effect:e,value:t},t))))}else{if(a(t))throw o("Setting atoms to async values is not implemented.");"function"!=typeof t&&(p={effect:e,value:t}),no(n,f,"function"==typeof t?n=>{const r=t(n);return p={effect:e,value:r},r}:t)}},y=e=>()=>g(e)(Ki),b=e=>r=>{n.subscribeToTransactions((n=>{var i;let{currentTree:o,previousTree:a}=n.getState();a||(a=o);const s=null!==(i=o.atomValues.get(t))&&void 0!==i?i:u;if("hasValue"===s.state){var c,l,f,d;const n=s.contents,i=null!==(c=a.atomValues.get(t))&&void 0!==c?c:u,h="hasValue"===i.state?i.contents:Ki;(null===(l=p)||void 0===l?void 0:l.effect)!==e||(null===(f=p)||void 0===f?void 0:f.value)!==n?r(n,h,!o.atomValues.has(t)):(null===(d=p)||void 0===d?void 0:d.effect)===e&&(p=null)}}),t)};for(const t of null!==(h=e.effects_UNSTABLE)&&void 0!==h?h:[]){var h;const e=t({node:f,trigger:i,setSelf:g(t),resetSelf:y(t),onSet:b(t),getPromise:c,getLoadable:s,getInfo_UNSTABLE:m});var v;null!=e&&l.set(n,[...null!==(v=l.get(n))&&void 0!==v?v:[],e])}r=!1}if(!(d instanceof $i)){var m;const e=d,i=a(e)?Hi(function(e,n){const r=n.then((n=>{var i,o;return(null===(o=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===o?void 0:o.contents)===r&&no(e,f,n),n})).catch((n=>{var i,o;throw(null===(o=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===o?void 0:o.contents)===r&&ro(e,f,Gi(n)),n}));return r}(n,e)):Qi(e);r.atomValues.set(t,i),null===(m=n.getState().nextTree)||void 0===m||m.atomValues.set(t,i)}return()=>{var e;c--,null===(e=l.get(n))||void 0===e||e.forEach((e=>e())),l.delete(n),n.getState().knownAtoms.delete(t)}},invalidate:function(){i=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==Ji(t)&&c<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return f}({...r,default:n})},ao=Object.freeze({__proto__:null,MapCache:class{constructor(e){var t;c(this,"_map",void 0),c(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(t=null==e?void 0:e.mapKey)&&void 0!==t?t:e=>e}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}});const{LRUCache:so}=pi,{MapCache:co}=ao,uo={equality:"reference",eviction:"none",maxSize:1/0};var lo=function({equality:e=uo.equality,eviction:t=uo.eviction,maxSize:n=uo.maxSize}=uo){const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>si(e)}throw o(`Unrecognized equality policy ${e}`)}(e),i=function(e,t,n){switch(e){case"keep-all":return new co({mapKey:n});case"lru":return new so({mapKey:n,maxSize:s(t)});case"most-recent":return new so({mapKey:n,maxSize:1})}throw o(`Unrecognized eviction policy ${e}`)}(t,n,r);return i};const{setConfigDeletionHandler:fo}=te;const{setConfigDeletionHandler:po}=te;let ho=0;var vo=function(e){var t,n;const r=lo({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;const i=r.get(t);if(null!=i)return i;const o=`${e.key}__selectorFamily/${null!==(n=si(t,{allowFunctions:!0}))&&void 0!==n?n:"void"}/${ho++}`,a=n=>e.get(t)(n),s=e.cachePolicy_UNSTABLE,c="function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;let u;if(null!=e.set){const n=e.set;u=zi({key:o,get:a,set:(e,r)=>n(t)(e,r),cachePolicy_UNSTABLE:s,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else u=zi({key:o,get:a,cachePolicy_UNSTABLE:s,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(t,u),po(u.key,(()=>{r.delete(t)})),u}};const mo=vo({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});const go=vo({key:"__error",get:e=>()=>{throw o(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});const{loadableWithError:yo,loadableWithPromise:bo,loadableWithValue:wo}=R;function So(e,t){const n=Array(t.length).fill(void 0),r=Array(t.length).fill(void 0);for(const[i,o]of t.entries())try{n[i]=e(o)}catch(e){r[i]=e}return[n,r]}function ko(e){return null!=e&&!a(e)}function Eo(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))}function _o(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})}function Oo(e,t,n){return _o(e,n.map(((e,n)=>null==e?wo(t[n]):a(e)?bo(e):yo(e))))}const To=vo({key:"__waitForNone",get:e=>({get:t})=>{const n=Eo(e),[r,i]=So(t,n);return Oo(e,r,i)},dangerouslyAllowMutability:!0}),xo=vo({key:"__waitForAny",get:e=>({get:t})=>{const n=Eo(e),[r,i]=So(t,n);return i.some((e=>!a(e)))?Oo(e,r,i):new Promise((t=>{for(const[n,o]of i.entries())a(o)&&o.then((o=>{r[n]=o,i[n]=void 0,t(Oo(e,r,i))})).catch((o=>{i[n]=o,t(Oo(e,r,i))}))}))},dangerouslyAllowMutability:!0}),Ro=vo({key:"__waitForAll",get:e=>({get:t})=>{const n=Eo(e),[r,i]=So(t,n);if(i.every((e=>null==e)))return _o(e,r);const o=i.find(ko);if(null!=o)throw o;return Promise.all(i).then((t=>{return _o(e,(n=r,t.map(((e,t)=>void 0===e?n[t]:e))));var n}))},dangerouslyAllowMutability:!0}),Ao=vo({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=Eo(e),[r,i]=So(t,n);return i.every((e=>!a(e)))?Oo(e,r,i):Promise.all(i.map(((e,t)=>a(e)?e.then((e=>{r[t]=e,i[t]=void 0})).catch((e=>{r[t]=void 0,i[t]=e})):null))).then((()=>Oo(e,r,i)))},dangerouslyAllowMutability:!0}),Co=vo({key:"__noWait",get:e=>({get:t})=>{try{return wo(t(e))}catch(e){return a(e)?bo(e):yo(e)}},dangerouslyAllowMutability:!0});var Io={waitForNone:To,waitForAny:xo,waitForAll:Ro,waitForAllSettled:Ao,noWait:Co};const{RecoilLoadable:No}=R,{DefaultValue:Mo}=te,{RecoilRoot:Po}=En,{isRecoilValue:Lo}=G,{retentionZone:Do}=Ee,{freshSnapshot:Vo}=Qt,{useRecoilState:Fo,useRecoilStateLoadable:jo,useRecoilValue:Uo,useRecoilValueLoadable:Bo,useResetRecoilState:qo,useSetRecoilState:zo,useSetUnvalidatedAtomValues:Go}=or,{useGotoRecoilSnapshot:Ho,useRecoilSnapshot:Qo,useRecoilTransactionObserver:Wo,useTransactionObservation_DEPRECATED:Ko}=Er,{noWait:$o,waitForAll:Jo,waitForAllSettled:Yo,waitForAny:Xo,waitForNone:Zo}=Io;var ea={DefaultValue:Mo,isRecoilValue:Lo,RecoilLoadable:No,RecoilRoot:Po,useRecoilBridgeAcrossReactRoots_UNSTABLE:function(){const e=xr().current;return Rr((()=>function({children:t}){return r.createElement(Tr,{store_INTERNAL:e},t)}),[e])},atom:oo,selector:zi,atomFamily:function(e){var t,n;const r=lo({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;const i=r.get(t);if(null!=i)return i;const{cachePolicyForParams_UNSTABLE:o,...a}=e,s=oo({...a,key:`${e.key}__${null!==(n=si(t))&&void 0!==n?n:"void"}`,default:"function"==typeof e.default?e.default(t):e.default,retainedBy_UNSTABLE:"function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects_UNSTABLE:"function"==typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):e.effects_UNSTABLE});return r.set(t,s),fo(s.key,(()=>{r.delete(t)})),s}},selectorFamily:vo,constSelector:function(e){return mo(e)},errorSelector:function(e){return go(e)},readOnlySelector:function(e){return e},noWait:$o,waitForNone:Zo,waitForAny:Xo,waitForAll:Jo,waitForAllSettled:Yo,useRecoilValue:Uo,useRecoilValueLoadable:Bo,useRecoilState:Fo,useRecoilStateLoadable:jo,useSetRecoilState:zo,useResetRecoilState:qo,useGetRecoilValueInfo_UNSTABLE:function(){const e=Or();return({key:t})=>_r(e.current,e.current.getState().currentTree,t)},useRecoilRefresher_UNSTABLE:function(e){const t=Zr();return ei((()=>{var n;const r=t.current,{currentTree:i}=r.getState(),o=Xr(e.key);null===(n=o.clearCache)||void 0===n||n.call(o,r,i)}),[e,t])},useRecoilCallback:function(e,t){const n=Gr(),r=Kr();return $r(((...t)=>{function i(e,t){Hr(n.current,e,t)}function a(e){Hr(n.current,e,zr)}const s=Wr(n.current),c=Br(n.current);let u=Yr;return qr((()=>{const n="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!=typeof e)throw o(n);const l=e({set:i,reset:a,snapshot:s,gotoSnapshot:r,transact_UNSTABLE:c});if("function"!=typeof l)throw o(n);u=l(...t)})),u instanceof Jr&&Ur(!1),u}),null!=t?[...t,n]:void 0)},useRecoilTransaction_UNSTABLE:function(e,t){const n=ni();return ri((()=>(...t)=>{ti(n.current)((n=>{e(n)(...t)}))}),null!=t?[...t,n]:void 0)},useGotoRecoilSnapshot:Ho,useRecoilSnapshot:Qo,useRecoilTransactionObserver_UNSTABLE:Wo,useTransactionObservation_UNSTABLE:Ko,useSetUnvalidatedAtomValues_UNSTABLE:Go,snapshot_UNSTABLE:Vo,useRetain:Dn,retentionZone:Do},ta=ea.RecoilRoot,na=ea.atom,ra=ea.selector,ia=ea.useRecoilValue,oa=ea.useRecoilState,aa=ea.useSetRecoilState,sa=ea.useRecoilRefresher_UNSTABLE;function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pa(e,t,n){return t&&da(e.prototype,t),n&&da(e,n),e}function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma,ga={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},ya=r.createContext();function ba(){return ga}var wa=function(){function e(){fa(this,e),this.usedNamespaces={}}return pa(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function Sa(){return ma}var ka={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ga=va(va({},ga),e)}(e.options.react),function(e){ma=e}(e)}};function Ea(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var _a={};function Oa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&_a[t[0]]||("string"==typeof t[0]&&(_a[t[0]]=new Date),Ea.apply(void 0,t))}function Ta(e,t,n){e.loadNamespaces(t,(function(){e.isInitialized?n():e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}))}function xa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return Oa("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e)||!t.hasResourceBundle(r,e)&&t.services.backendConnector.backend&&(!a(r,e)||i&&!a(o,e)))}function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,i=(0,r.useContext)(ya)||{},o=i.i18n,a=i.defaultNS,s=n||o||Sa();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new wa),!s){Oa("You will need to pass in an i18next instance by using initReactI18next");var c=function(e){return Array.isArray(e)?e[e.length-1]:e},u=[c,{},!1];return u.t=c,u.i18n={},u.ready=!1,u}s.options.react&&void 0!==s.options.react.wait&&Oa("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=Aa(Aa(Aa({},ba()),s.options.react),t),f=l.useSuspense,d=l.keyPrefix,p=e||a||s.options&&s.options.defaultNS;p="string"==typeof p?[p]:p||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(p);var h=(s.isInitialized||s.initializedStoreOnce)&&p.every((function(e){return xa(e,s,l)}));function v(){return s.getFixedT(null,"fallback"===l.nsMode?p:p[0],d)}var m=(0,r.useState)(v),g=ua(m,2),y=g[0],b=g[1],w=(0,r.useRef)(!0);(0,r.useEffect)((function(){var e=l.bindI18n,t=l.bindI18nStore;function n(){w.current&&b(v)}return w.current=!0,h||f||Ta(s,p,(function(){w.current&&b(v)})),e&&s&&s.on(e,n),t&&s&&s.store.on(t,n),function(){w.current=!1,e&&s&&e.split(" ").forEach((function(e){return s.off(e,n)})),t&&s&&t.split(" ").forEach((function(e){return s.store.off(e,n)}))}}),[s,p.join()]);var S=(0,r.useRef)(!0);(0,r.useEffect)((function(){w.current&&!S.current&&b(v),S.current=!1}),[s]);var k=[y,s,h];if(k.t=y,k.i18n=s,k.ready=h,h)return k;if(!h&&!f)return k;throw new Promise((function(e){Ta(s,p,(function(){e()}))}))}var Ia=function(e,t){return Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ia(e,t)};function Na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ia(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ma=function(){return Ma=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ma.apply(this,arguments)};function Pa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function La(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function Da(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Va(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Fa(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;const ja=1/60*1e3,Ua="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),Ba="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(Ua())),ja);let qa=!0,za=!1,Ga=!1;const Ha={delta:0,timestamp:0},Qa=["read","update","preRender","render","postRender"],Wa=Qa.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(e,o=!1,s=!1)=>{const c=s&&i,u=c?t:n;return o&&a.add(e),-1===u.indexOf(e)&&(u.push(e),c&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:c=>{if(i)o=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(c),a.has(r)&&(s.schedule(r),e())}i=!1,o&&(o=!1,s.process(c))}}};return s}((()=>za=!0)),e)),{}),Ka=Qa.reduce(((e,t)=>{const n=Wa[t];return e[t]=(e,t=!1,r=!1)=>(za||Za(),n.schedule(e,t,r)),e}),{}),$a=Qa.reduce(((e,t)=>(e[t]=Wa[t].cancel,e)),{}),Ja=Qa.reduce(((e,t)=>(e[t]=()=>Wa[t].process(Ha),e)),{}),Ya=e=>Wa[e].process(Ha),Xa=e=>{za=!1,Ha.delta=qa?ja:Math.max(Math.min(e-Ha.timestamp,40),1),Ha.timestamp=e,Ga=!0,Qa.forEach(Ya),Ga=!1,za&&(qa=!1,Ba(Xa))},Za=()=>{za=!0,qa=!0,Ga||Ba(Xa)},es=()=>Ha,ts=Ka;function ns(e){return(0,r.useEffect)((function(){return function(){return e()}}),[])}var rs=(0,r.createContext)(null);function is(e){var t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}var os=0;function as(){var e=os;return os++,e}var ss=function(e){var t=e.children,n=e.initial,i=e.isPresent,o=e.onExitComplete,a=e.custom,s=e.presenceAffectsLayout,c=is(cs),u=is(as),l=(0,r.useMemo)((function(){return{id:u,initial:n,isPresent:i,custom:a,onExitComplete:function(e){var t,n;c.set(e,!0);try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c.values()),i=r.next();!i.done;i=r.next())if(!i.value)return}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}null==o||o()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),s?void 0:[i]);return(0,r.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[i]),r.useEffect((function(){!i&&!c.size&&(null==o||o())}),[i]),r.createElement(rs.Provider,{value:l},t)};function cs(){return new Map}var us=(0,r.createContext)({});function ls(e){return e.key||""}var fs=function(e){var t=e.children,n=e.custom,i=e.initial,o=void 0===i||i,a=e.onExitComplete,s=e.exitBeforeEnter,c=e.presenceAffectsLayout,u=void 0===c||c,l=Va(function(){var e=(0,r.useRef)(!1),t=Va((0,r.useState)(0),2),n=t[0],i=t[1];ns((function(){return e.current=!0}));var o=(0,r.useCallback)((function(){!e.current&&i(n+1)}),[n]);return[(0,r.useCallback)((function(){return ts.postRender(o)}),[o]),n]}(),1),f=l[0],d=(0,r.useContext)(us).forceRender;d&&(f=d);var p=(0,r.useRef)(!0),h=(0,r.useRef)(!0);(0,r.useEffect)((function(){return function(){h.current=!1}}),[]);var v=function(e){var t=[];return r.Children.forEach(e,(function(e){(0,r.isValidElement)(e)&&t.push(e)})),t}(t),m=(0,r.useRef)(v),g=(0,r.useRef)(new Map).current,y=(0,r.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var n=ls(e);t.set(n,e)}))}(v,g),p.current)return p.current=!1,r.createElement(r.Fragment,null,v.map((function(e){return r.createElement(ss,{key:ls(e),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:u},e)})));for(var b=Fa([],Va(v),!1),w=m.current.map(ls),S=v.map(ls),k=w.length,E=0;E<k;E++){var _=w[E];-1===S.indexOf(_)?y.add(_):y.delete(_)}return s&&y.size&&(b=[]),y.forEach((function(e){if(-1===S.indexOf(e)){var t=g.get(e);if(t){var i=w.indexOf(e);b.splice(i,0,r.createElement(ss,{key:ls(t),isPresent:!1,onExitComplete:function(){g.delete(e),y.delete(e);var t=m.current.findIndex((function(t){return t.key===e}));if(m.current.splice(t,1),!y.size){if(m.current=v,!1===h.current)return;f(),a&&a()}},custom:n,presenceAffectsLayout:u},t))}}})),b=b.map((function(e){var t=e.key;return y.has(t)?e:r.createElement(ss,{key:ls(e),isPresent:!0,presenceAffectsLayout:u},e)})),m.current=b,r.createElement(r.Fragment,null,y.size?b:b.map((function(e){return(0,r.cloneElement)(e)})))},ds=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},ps={measureLayout:ds(["layout","layoutId","drag"]),animation:ds(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:ds(["exit"]),drag:ds(["drag","dragControls"]),focus:ds(["whileFocus"]),hover:ds(["whileHover","onHoverStart","onHoverEnd"]),tap:ds(["whileTap","onTap","onTapStart","onTapCancel"]),pan:ds(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:ds(["whileInView","onViewportEnter","onViewportLeave"])},hs=(0,r.createContext)({strict:!1}),vs=Object.keys(ps),ms=vs.length,gs=(0,r.createContext)({transformPagePoint:function(e){return e},isStatic:!1}),ys=(0,r.createContext)({}),bs="undefined"!=typeof window,ws=bs?r.useLayoutEffect:r.useEffect;function Ss(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ks(e){return Array.isArray(e)}function Es(e){return"string"==typeof e||ks(e)}function _s(e,t,n,r,i){var o;return void 0===r&&(r={}),void 0===i&&(i={}),"function"==typeof t&&(t=t(null!=n?n:e.custom,r,i)),"string"==typeof t&&(t=null===(o=e.variants)||void 0===o?void 0:o[t]),"function"==typeof t&&(t=t(null!=n?n:e.custom,r,i)),t}function Os(e,t,n){var r=e.getProps();return _s(r,t,null!=n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function Ts(e){var t;return"function"==typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||Es(e.initial)||Es(e.animate)||Es(e.whileHover)||Es(e.whileDrag)||Es(e.whileTap)||Es(e.whileFocus)||Es(e.exit)}function xs(e){return Boolean(Ts(e)||e.variants)}function Rs(e){return Array.isArray(e)?e.join(" "):e}const As=(e,t,n)=>-n*e+n*t+e;function Cs(e,t){return t?e*(1e3/t):0}function Is(e,t){-1===e.indexOf(t)&&e.push(t)}function Ns(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Ms=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return Is(this.subscriptions,e),function(){return Ns(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var o=this.subscriptions[i];o&&o(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),Ps=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Ms,this.velocityUpdateSubscribers=new Ms,this.renderSubscribers=new Ms,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=es(),i=r.delta,o=r.timestamp;n.lastUpdated!==o&&(n.timeDelta=i,n.lastUpdated=o,ts.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return ts.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?Cs(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function Ls(e){return new Ps(e)}var Ds=function(e){return Boolean(null!==e&&"object"==typeof e&&e.getVelocity)};const Vs=(e,t,n)=>Math.min(Math.max(n,e),t);function Fs(e,t){return e*Math.sqrt(1-t*t)}const js=["duration","bounce"],Us=["stiffness","damping","mass"];function Bs(e,t){return t.some((t=>void 0!==e[t]))}function qs(e){var{from:t=0,to:n=1,restSpeed:r=2,restDelta:i}=e,o=Pa(e,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:s,damping:c,mass:u,velocity:l,duration:f,isResolvedFromDuration:d}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Bs(e,Us)&&Bs(e,js)){const n=function({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,a=1-t;a=Vs(.05,1,a),e=Vs(.01,10,e/1e3),a<1?(i=t=>{const r=t*a,i=r*e;return.001-(r-n)/Fs(t,a)*Math.exp(-i)},o=t=>{const r=t*a*e,o=r*n+n,s=Math.pow(a,2)*Math.pow(t,2)*e,c=Math.exp(-r),u=Fs(Math.pow(t,2),a);return(.001-i(t)>0?-1:1)*((o-s)*c)/u}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,o=t=>Math.exp(-t*e)*(e*e*(n-t)));const s=function(e,t,n){let r=n;for(let n=1;n<12;n++)r-=e(r)/t(r);return r}(i,o,5/e);if(e*=1e3,isNaN(s))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(s,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(o),p=zs,h=zs;function v(){const e=l?-l/1e3:0,r=n-t,o=c/(2*Math.sqrt(s*u)),a=Math.sqrt(s/u)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-t)/100,.4)),o<1){const t=Fs(a,o);p=i=>{const s=Math.exp(-o*a*i);return n-s*((e+o*a*r)/t*Math.sin(t*i)+r*Math.cos(t*i))},h=n=>{const i=Math.exp(-o*a*n);return o*a*i*(Math.sin(t*n)*(e+o*a*r)/t+r*Math.cos(t*n))-i*(Math.cos(t*n)*(e+o*a*r)-t*r*Math.sin(t*n))}}else if(1===o)p=t=>n-Math.exp(-a*t)*(r+(e+a*r)*t);else{const t=a*Math.sqrt(o*o-1);p=i=>{const s=Math.exp(-o*a*i),c=Math.min(t*i,300);return n-s*((e+o*a*r)*Math.sinh(c)+t*r*Math.cosh(c))/t}}}return v(),{next:e=>{const t=p(e);if(d)a.done=e>=f;else{const o=1e3*h(e),s=Math.abs(o)<=r,c=Math.abs(n-t)<=i;a.done=s&&c}return a.value=a.done?n:t,a},flipTarget:()=>{l=-l,[t,n]=[n,t],v()}}}qs.needsInterpolation=(e,t)=>"string"==typeof e||"string"==typeof t;const zs=e=>0,Gs=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Hs=(e,t)=>n=>Math.max(Math.min(n,t),e),Qs=e=>e%1?Number(e.toFixed(5)):e,Ws=/(-)?([\d]*\.?[\d])+/g,Ks=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,$s=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Js(e){return"string"==typeof e}const Ys={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Xs=Object.assign(Object.assign({},Ys),{transform:Hs(0,1)}),Zs=Object.assign(Object.assign({},Ys),{default:1}),ec=(e,t)=>n=>Boolean(Js(n)&&$s.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),tc=(e,t,n)=>r=>{if(!Js(r))return r;const[i,o,a,s]=r.match(Ws);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},nc=Hs(0,255),rc=Object.assign(Object.assign({},Ys),{transform:e=>Math.round(nc(e))}),ic={test:ec("rgb","red"),parse:tc("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+rc.transform(e)+", "+rc.transform(t)+", "+rc.transform(n)+", "+Qs(Xs.transform(r))+")"},oc={test:ec("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ic.transform},ac=e=>({test:t=>Js(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),sc=ac("deg"),cc=ac("%"),uc=ac("px"),lc=ac("vh"),fc=ac("vw"),dc=Object.assign(Object.assign({},cc),{parse:e=>cc.parse(e)/100,transform:e=>cc.transform(100*e)}),pc={test:ec("hsl","hue"),parse:tc("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+cc.transform(Qs(t))+", "+cc.transform(Qs(n))+", "+Qs(Xs.transform(r))+")"};function hc(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function vc({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,o=0,a=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=hc(s,r,e+1/3),o=hc(s,r,e),a=hc(s,r,e-1/3)}else i=o=a=n;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*a),alpha:r}}const mc=(e,t,n)=>{const r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},gc=[oc,ic,pc],yc=e=>gc.find((t=>t.test(e))),bc=e=>`'${e}' is not an animatable color. Use the equivalent color code instead.`,wc=(e,t)=>{let n=yc(e),r=yc(t);bc(e),bc(t);let i=n.parse(e),o=r.parse(t);n===pc&&(i=vc(i),n=ic),r===pc&&(o=vc(o),r=ic);const a=Object.assign({},i);return e=>{for(const t in a)"alpha"!==t&&(a[t]=mc(i[t],o[t],e));return a.alpha=As(i.alpha,o.alpha,e),n.transform(a)}},Sc={test:e=>ic.test(e)||oc.test(e)||pc.test(e),parse:e=>ic.test(e)?ic.parse(e):pc.test(e)?pc.parse(e):oc.parse(e),transform:e=>Js(e)?e:e.hasOwnProperty("red")?ic.transform(e):pc.transform(e)},kc="${c}",Ec="${n}";function _c(e){"number"==typeof e&&(e=`${e}`);const t=[];let n=0;const r=e.match(Ks);r&&(n=r.length,e=e.replace(Ks,kc),t.push(...r.map(Sc.parse)));const i=e.match(Ws);return i&&(e=e.replace(Ws,Ec),t.push(...i.map(Ys.parse))),{values:t,numColors:n,tokenised:e}}function Oc(e){return _c(e).values}function Tc(e){const{values:t,numColors:n,tokenised:r}=_c(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?kc:Ec,r<n?Sc.transform(e[r]):Qs(e[r]));return t}}const xc=e=>"number"==typeof e?0:e,Rc={test:function(e){var t,n,r,i;return isNaN(e)&&Js(e)&&(null!==(n=null===(t=e.match(Ws))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(Ks))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Oc,createTransformer:Tc,getAnimatableNone:function(e){const t=Oc(e);return Tc(e)(t.map(xc))}},Ac=e=>"number"==typeof e,Cc=(e,t)=>n=>t(e(n)),Ic=(...e)=>e.reduce(Cc);function Nc(e,t){return Ac(e)?n=>As(e,t,n):Sc.test(e)?wc(e,t):Dc(e,t)}const Mc=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>Nc(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},Pc=(e,t)=>{const n=Object.assign(Object.assign({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Nc(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}};function Lc(e){const t=Rc.parse(e),n=t.length;let r=0,i=0,o=0;for(let e=0;e<n;e++)r||"number"==typeof t[e]?r++:void 0!==t[e].hue?o++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:o}}const Dc=(e,t)=>{const n=Rc.createTransformer(t),r=Lc(e),i=Lc(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?Ic(Mc(r.parsed,i.parsed),n):n=>`${n>0?t:e}`},Vc=(e,t)=>n=>As(e,t,n);function Fc(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;t.length,!r||!Array.isArray(r)||r.length,e[0]>e[o-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const a=function(e,t,n){const r=[],i=n||("number"==typeof(o=e[0])?Vc:"string"==typeof o?Sc.test(o)?wc:Dc:Array.isArray(o)?Mc:"object"==typeof o?Pc:void 0);var o;const a=e.length-1;for(let n=0;n<a;n++){let o=i(e[n],e[n+1]);if(t){const e=Array.isArray(t)?t[n]:t;o=Ic(e,o)}r.push(o)}return r}(t,r,i),s=2===o?function([e,t],[n]){return r=>n(Gs(e,t,r))}(e,a):function(e,t){const n=e.length,r=n-1;return i=>{let o=0,a=!1;if(i<=e[0]?a=!0:i>=e[r]&&(o=r-1,a=!0),!a){let t=1;for(;t<n&&!(e[t]>i||t===r);t++);o=t-1}const s=Gs(e[o],e[o+1],i);return t[o](s)}}(e,a);return n?t=>s(Vs(e[0],e[o-1],t)):s}const jc=e=>t=>1-e(1-t),Uc=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Bc=e=>t=>t*t*((e+1)*t-e),qc=e=>e,zc=(2,e=>Math.pow(e,2));const Gc=jc(zc),Hc=Uc(zc),Qc=e=>1-Math.sin(Math.acos(e)),Wc=jc(Qc),Kc=Uc(Wc),$c=Bc(1.525),Jc=jc($c),Yc=Uc($c),Xc=(e=>{const t=Bc(1.525);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(),Zc=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},eu=jc(Zc);function tu(e,t){return e.map((()=>t||Hc)).splice(0,e.length-1)}function nu({from:e=0,to:t=1,ease:n,offset:r,duration:i=300}){const o={done:!1,value:e},a=Array.isArray(t)?t:[e,t],s=function(e,t){return e.map((e=>e*t))}(r&&r.length===a.length?r:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(a),i);function c(){return Fc(s,a,{ease:Array.isArray(n)?n:tu(a,n)})}let u=c();return{next:e=>(o.value=u(e),o.done=e>=i,o),flipTarget:()=>{a.reverse(),u=c()}}}const ru={keyframes:nu,spring:qs,decay:function({velocity:e=0,from:t=0,power:n=.8,timeConstant:r=350,restDelta:i=.5,modifyTarget:o}){const a={done:!1,value:t};let s=n*e;const c=t+s,u=void 0===o?c:o(c);return u!==c&&(s=u-t),{next:e=>{const t=-s*Math.exp(-e/r);return a.done=!(t>i||t<-i),a.value=a.done?u:u+t,a},flipTarget:()=>{}}}};function iu(e,t,n=0){return e-t-n}const ou=e=>{const t=({delta:t})=>e(t);return{start:()=>ts.update(t,!0),stop:()=>$a.update(t)}};function au(e){var t,n,{from:r,autoplay:i=!0,driver:o=ou,elapsed:a=0,repeat:s=0,repeatType:c="loop",repeatDelay:u=0,onPlay:l,onStop:f,onComplete:d,onRepeat:p,onUpdate:h}=e,v=Pa(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let m,g,y,{to:b}=v,w=0,S=v.duration,k=!1,E=!0;const _=function(e){if(Array.isArray(e.to))return nu;if(ru[e.type])return ru[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?nu:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?qs:nu}(v);(null===(n=(t=_).needsInterpolation)||void 0===n?void 0:n.call(t,r,b))&&(y=Fc([0,100],[r,b],{clamp:!1}),r=0,b=100);const O=_(Object.assign(Object.assign({},v),{from:r,to:b}));return i&&(null==l||l(),m=o((function(e){if(E||(e=-e),a+=e,!k){const e=O.next(Math.max(0,a));g=e.value,y&&(g=y(g)),k=E?e.done:a<=0}null==h||h(g),k&&(0===w&&(null!=S||(S=a)),w<s?function(e,t,n,r){return r?e>=t+n:e<=-n}(a,S,u,E)&&(w++,"reverse"===c?(E=w%2==0,a=function(e,t,n=0,r=!0){return r?iu(t+-e,t,n):t-(e-t)+n}(a,S,u,E)):(a=iu(a,S,u),"mirror"===c&&O.flipTarget()),k=!1,p&&p()):(m.stop(),d&&d()))})),m.start()),{stop:()=>{null==f||f(),m.stop()}}}var su=function(e){return 1e3*e};const cu=(e,t)=>1-3*t+3*e,uu=(e,t)=>3*t-6*e,lu=e=>3*e,fu=(e,t,n)=>((cu(t,n)*e+uu(t,n))*e+lu(t))*e,du=(e,t,n)=>3*cu(t,n)*e*e+2*uu(t,n)*e+lu(t),pu=.1;function hu(e,t,n,r){if(e===t&&n===r)return qc;const i=new Float32Array(11);for(let t=0;t<11;++t)i[t]=fu(t*pu,e,n);return o=>0===o||1===o?o:fu(function(t){let r=0,o=1;for(;10!==o&&i[o]<=t;++o)r+=pu;--o;const a=r+(t-i[o])/(i[o+1]-i[o])*pu,s=du(a,e,n);return s>=.001?function(e,t,n,r){for(let i=0;i<8;++i){const i=du(t,n,r);if(0===i)return t;t-=(fu(t,n,r)-e)/i}return t}(t,a,e,n):0===s?a:function(e,t,n,r,i){let o,a,s=0;do{a=t+(n-t)/2,o=fu(a,r,i)-e,o>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+pu,e,n)}(o),t,r)}var vu={linear:qc,easeIn:zc,easeInOut:Hc,easeOut:Gc,circIn:Qc,circInOut:Kc,circOut:Wc,backIn:$c,backInOut:Yc,backOut:Jc,anticipate:Xc,bounceIn:eu,bounceInOut:e=>e<.5?.5*(1-Zc(1-2*e)):.5*Zc(2*e-1)+.5,bounceOut:Zc},mu=function(e){if(Array.isArray(e)){e.length;var t=Va(e,4);return hu(t[0],t[1],t[2],t[3])}return"string"==typeof e?("Invalid easing type '".concat(e,"'"),vu[e]):e},gu=function(e,t){return!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!Rc.test(t)||t.startsWith("url(")))},yu=function(e){return Array.isArray(e)},bu=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},wu=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},Su=function(){return{type:"keyframes",ease:"linear",duration:.3}},ku=function(e){return{type:"keyframes",duration:.8,values:e}},Eu={x:bu,y:bu,z:bu,rotate:bu,rotateX:bu,rotateY:bu,rotateZ:bu,scaleX:wu,scaleY:wu,scale:wu,opacity:Su,backgroundColor:Su,color:Su,default:wu};const _u=new Set(["brightness","contrast","saturate","opacity"]);function Ou(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ws)||[];if(!r)return e;const i=n.replace(r,"");let o=_u.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Tu=/([a-z-]*)\(.*?\)/g,xu=Object.assign(Object.assign({},Rc),{getAnimatableNone:e=>{const t=e.match(Tu);return t?t.map(Ou).join(" "):e}});var Ru=Ma(Ma({},Ys),{transform:Math.round}),Au={borderWidth:uc,borderTopWidth:uc,borderRightWidth:uc,borderBottomWidth:uc,borderLeftWidth:uc,borderRadius:uc,radius:uc,borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomRightRadius:uc,borderBottomLeftRadius:uc,width:uc,maxWidth:uc,height:uc,maxHeight:uc,size:uc,top:uc,right:uc,bottom:uc,left:uc,padding:uc,paddingTop:uc,paddingRight:uc,paddingBottom:uc,paddingLeft:uc,margin:uc,marginTop:uc,marginRight:uc,marginBottom:uc,marginLeft:uc,rotate:sc,rotateX:sc,rotateY:sc,rotateZ:sc,scale:Zs,scaleX:Zs,scaleY:Zs,scaleZ:Zs,skew:sc,skewX:sc,skewY:sc,distance:uc,translateX:uc,translateY:uc,translateZ:uc,x:uc,y:uc,z:uc,perspective:uc,transformPerspective:uc,opacity:Xs,originX:dc,originY:dc,originZ:uc,zIndex:Ru,fillOpacity:Xs,strokeOpacity:Xs,numOctaves:Ru},Cu=Ma(Ma({},Au),{color:Sc,backgroundColor:Sc,outlineColor:Sc,fill:Sc,stroke:Sc,borderColor:Sc,borderTopColor:Sc,borderRightColor:Sc,borderBottomColor:Sc,borderLeftColor:Sc,filter:xu,WebkitFilter:xu}),Iu=function(e){return Cu[e]};function Nu(e,t){var n,r=Iu(e);return r!==xu&&(r=Rc),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var Mu=function(e){return yu(e)?e[e.length-1]||0:e};function Pu(e,t,n){var r,i,o,a;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Fa([],Va(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=Pa(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=Ma(Ma({},e),(i=n,o=t.to,a=yu(o)?ku:Eu[i]||Eu.default,Ma({to:o},a(o))))),Ma(Ma({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,o=e.loop,a=Pa(e,["ease","times","yoyo","flip","loop"]),s=Ma({},a);return n&&(s.offset=n),a.duration&&(s.duration=su(a.duration)),a.repeatDelay&&(s.repeatDelay=su(a.repeatDelay)),t&&(s.ease=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(t)?t.map(mu):mu(t)),"tween"===a.type&&(s.type="keyframes"),(r||o||i)&&(r?s.repeatType="reverse":o?s.repeatType="loop":i&&(s.repeatType="mirror"),s.repeat=o||r||i||a.repeat),"spring"!==a.type&&(s.type="keyframes"),s}(e))}function Lu(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function Du(e){return"number"==typeof e?0:Nu("",e)}function Vu(e,t){return e[t]||e.default||e}function Fu(e,t,n,r){return void 0===r&&(r={}),t.start((function(i){var o,a,s=function(e,t,n,r,i){var o,a=Vu(r,e),s=null!==(o=a.from)&&void 0!==o?o:t.get(),c=gu(e,n);"none"===s&&c&&"string"==typeof n?s=Nu(e,n):Lu(s)&&"string"==typeof n?s=Du(n):!Array.isArray(n)&&Lu(n)&&"string"==typeof s&&(n=Du(s));var u=gu(e,s);return"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(n,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(n," via the `style` property."),u&&c&&!1!==a.type?function(){var r={from:s,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===a.type||"decay"===a.type?function({from:e=0,velocity:t=0,min:n,max:r,power:i=.8,timeConstant:o=750,bounceStiffness:a=500,bounceDamping:s=10,restDelta:c=1,modifyTarget:u,driver:l,onUpdate:f,onComplete:d,onStop:p}){let h;function v(e){return void 0!==n&&e<n||void 0!==r&&e>r}function m(e){return void 0===n?r:void 0===r||Math.abs(n-e)<Math.abs(r-e)?n:r}function g(e){null==h||h.stop(),h=au(Object.assign(Object.assign({},e),{driver:l,onUpdate:t=>{var n;null==f||f(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:d,onStop:p}))}function y(e){g(Object.assign({type:"spring",stiffness:a,damping:s,restDelta:c},e))}if(v(e))y({from:e,velocity:t,to:m(e)});else{let r=i*t+e;void 0!==u&&(r=u(r));const a=m(r),s=a===n?-1:1;let l,f;const d=e=>{l=f,f=e,t=Cs(e-l,es().delta),(1===s&&e>a||-1===s&&e<a)&&y({from:e,to:a,velocity:t})};g({type:"decay",from:e,velocity:t,timeConstant:o,power:i,restDelta:c,modifyTarget:u,onUpdate:v(r)?d:void 0})}return{stop:()=>null==h?void 0:h.stop()}}(Ma(Ma({},r),a)):au(Ma(Ma({},Pu(a,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=a.onUpdate)||void 0===t||t.call(a,e)},onComplete:function(){var e;r.onComplete(),null===(e=a.onComplete)||void 0===e||e.call(a)}}))}:function(){var e,r,o=Mu(n);return t.set(o),i(),null===(e=null==a?void 0:a.onUpdate)||void 0===e||e.call(a,o),null===(r=null==a?void 0:a.onComplete)||void 0===r||r.call(a),{stop:function(){}}}}(e,t,n,r,i),c=function(e,t){var n,r;return null!==(r=null!==(n=(Vu(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),u=function(){return a=s()};return c?o=setTimeout(u,su(c)):u(),function(){clearTimeout(o),null==a||a.stop()}}))}var ju=["TopLeft","TopRight","BottomLeft","BottomRight"],Uu=ju.length;function Bu(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var qu=Gu(0,.5,Wc),zu=Gu(.5,.95,qc);function Gu(e,t,n){return function(r){return r<e?0:r>t?1:n(Gs(e,t,r))}}function Hu(e,t){e.min=t.min,e.max=t.max}function Qu(e,t){Hu(e.x,t.x),Hu(e.y,t.y)}function Wu(e){return void 0===e||1===e}function Ku(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!Wu(t)||!Wu(n)||!Wu(r)}function $u(e){return Ku(e)||Ju(e.x)||Ju(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function Ju(e){return e&&"0%"!==e}function Yu(e,t,n){return n+t*(e-n)}function Xu(e,t,n,r,i){return void 0!==i&&(e=Yu(e,i,r)),Yu(e,n,r)+t}function Zu(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=Xu(e.min,t,n,r,i),e.max=Xu(e.max,t,n,r,i)}function el(e,t){var n=t.x,r=t.y;Zu(e.x,n.translate,n.scale,n.originPoint),Zu(e.y,r.translate,r.scale,r.originPoint)}function tl(e,t){e.min=e.min+t,e.max=e.max+t}function nl(e,t,n){var r=Va(n,3),i=r[0],o=r[1],a=r[2],s=void 0!==t[a]?t[a]:.5,c=As(e.min,e.max,s);Zu(e,t[i],t[o],c,t.scale)}var rl=["x","scaleX","originX"],il=["y","scaleY","originY"];function ol(e,t){nl(e.x,t,rl),nl(e.y,t,il)}const al=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),sl=e=>al(e)&&e.hasOwnProperty("z"),cl=(e,t)=>Math.abs(e-t);function ul(e,t){if(Ac(e)&&Ac(t))return cl(e,t);if(al(e)&&al(t)){const n=cl(e.x,t.x),r=cl(e.y,t.y),i=sl(e)&&sl(t)?cl(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}function ll(e){return e.max-e.min}function fl(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),ul(e,t)<n}function dl(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=As(t.min,t.max,e.origin),e.scale=ll(n)/ll(t),(fl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=As(n.min,n.max,e.origin)-e.originPoint,(fl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function pl(e,t,n,r){dl(e.x,t.x,n.x,null==r?void 0:r.originX),dl(e.y,t.y,n.y,null==r?void 0:r.originY)}function hl(e,t,n){e.min=n.min+t.min,e.max=e.min+ll(t)}function vl(e,t,n){e.min=t.min-n.min,e.max=e.min+ll(t)}function ml(e,t,n){vl(e.x,t.x,n.x),vl(e.y,t.y,n.y)}function gl(e,t,n,r,i){return e=Yu(e-=t,1/n,r),void 0!==i&&(e=Yu(e,1/i,r)),e}function yl(e,t,n,r,i){var o=Va(n,3),a=o[0],s=o[1],c=o[2];!function(e,t,n,r,i,o,a){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===o&&(o=e),void 0===a&&(a=e),cc.test(t)&&(t=parseFloat(t),t=As(a.min,a.max,t/100)-a.min),"number"==typeof t){var s=As(o.min,o.max,r);e===o&&(s-=t),e.min=gl(e.min,t,n,s,i),e.max=gl(e.max,t,n,s,i)}}(e,t[a],t[s],t[c],t.scale,r,i)}var bl=["x","scaleX","originX"],wl=["y","scaleY","originY"];function Sl(e,t,n,r){yl(e.x,t,bl,null==n?void 0:n.x,null==r?void 0:r.x),yl(e.y,t,wl,null==n?void 0:n.y,null==r?void 0:r.y)}function kl(e){return 0===e.translate&&1===e.scale}function El(e){return kl(e.x)&&kl(e.y)}function _l(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var Ol=function(){function e(){this.members=[]}return e.prototype.add=function(e){Is(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(Ns(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,i,o;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(o=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===o||o.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),Tl={};function xl(e,t,n){var r=e.x.translate/t.x,i=e.y.translate/t.y,o="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(n){var a=n.rotate,s=n.rotateX,c=n.rotateY;a&&(o+="rotate(".concat(a,"deg) ")),s&&(o+="rotateX(".concat(s,"deg) ")),c&&(o+="rotateY(".concat(c,"deg) "))}return"translate3d(0px, 0px, 0) scale(1, 1)"===(o+="scale(".concat(e.x.scale,", ").concat(e.y.scale,")"))?"none":o}function Rl(e){return[e("x"),e("y")]}var Al=["","X","Y","Z"],Cl=["transformPerspective","x","y","z"];function Il(e,t){return Cl.indexOf(e)-Cl.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return Al.forEach((function(t){return Cl.push(e+t)}))}));var Nl=new Set(Cl);function Ml(e){return Nl.has(e)}var Pl=new Set(["originX","originY","originZ"]);function Ll(e){return Pl.has(e)}var Dl=function(e,t){return e.depth-t.depth},Vl=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){Is(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){Ns(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(Dl),this.isDirty=!1,this.children.forEach(e)},e}();function Fl(e){var t,n=Ds(e)?e.get():e;return t=n,Boolean(t&&"object"==typeof t&&t.mix&&t.toValue)?n.toValue():n}var jl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ul(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.resetTransform;return function(){function e(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=null==n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(Wl),i.nodes.forEach(Kl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?Fa(Fa([],Va(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new Vl)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ms),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null==r||r.notify.apply(r,Fa([],Va(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,i=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var o=this.options,a=o.layoutId,s=o.layout,c=o.visualElement;if(c&&!c.getInstance()&&c.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(s||a)&&(this.isLayoutDirty=!0),t){var u,l=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(u),u=setTimeout(l,250),jl.hasAnimatedSinceResize&&(jl.hasAnimatedSinceResize=!1,i.nodes.forEach(Ql))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&c&&(a||s)&&this.addEventListener("didUpdate",(function(e){var t,n,r,o,a,s=e.delta,u=e.hasLayoutChanged,l=e.hasRelativeTargetChanged,f=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var d=null!==(n=null!==(t=i.options.transition)&&void 0!==t?t:c.getDefaultTransition())&&void 0!==n?n:ef,p=c.getProps().onLayoutAnimationComplete,h=!i.targetLayout||!_l(i.targetLayout,f)||l,v=!u&&l;(null===(r=i.resumeFrom)||void 0===r?void 0:r.instance)||v||u&&(h||!i.currentAnimation)?(i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(s,v),i.startAnimation(Ma(Ma({},Vu(d,"layout")),{onComplete:p}))):i.isLead()&&(null===(a=(o=i.options).onExitComplete)||void 0===a||a.call(o)),i.targetLayout=f}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,$a.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach($l))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var o=this.path[i];o.shouldResetTransform=!0,o.updateScroll()}var a=this.options,s=a.layoutId,c=a.layout;if(void 0!==s||c){var u=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null==u?void 0:u(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Gl);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(tf),this.potentialNodes.clear()),this.nodes.forEach(Hl),this.nodes.forEach(Bl),this.nodes.forEach(ql),this.clearAllSnapshots(),Ja.update(),Ja.preRender(),Ja.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(zl),this.sharedNodes.forEach(Jl)},e.prototype.scheduleUpdateProjection=function(){ts.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;ts.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));rf(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++)this.path[t].updateScroll();var n=this.measure();rf(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null==r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(i){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!El(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,o=null==r?void 0:r(this.latestValues,""),a=o!==this.prevTransformTemplateValue;t&&(n||$u(this.latestValues)||a)&&(i(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(tl(t.x,n.x),tl(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};Qu(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,o=r.options;r!==this.root&&i&&o.layoutScroll&&(tl(t.x,i.x),tl(t.y,i.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n={x:{min:0,max:0},y:{min:0,max:0}};Qu(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ol(n,{x:-i.scroll.x,y:-i.scroll.y}),$u(i.latestValues)&&ol(n,i.latestValues)}return $u(this.latestValues)&&ol(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};Qu(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&$u(i.latestValues)){Ku(i.latestValues)&&i.updateSnapshot();var o={x:{min:0,max:0},y:{min:0,max:0}};Qu(o,i.measure()),Sl(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,o)}}return $u(this.latestValues)&&Sl(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=Ma(Ma(Ma({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,i=this.options,o=i.layout,a=i.layoutId;this.layout&&(o||a)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ml(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),Qu(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,hl(t.x,n.x,r.x),hl(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):Qu(this.target,this.layout.actual),el(this.target,this.targetDelta)):Qu(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ml(this.relativeTargetOrigin,this.target,this.relativeParent.target),Qu(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!$u(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var i=this.getLead();Qu(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var i,o;void 0===r&&(r=!1);var a=n.length;if(a){var s,c;t.x=t.y=1;for(var u=0;u<a;u++)c=(s=n[u]).projectionDelta,"contents"!==(null===(o=null===(i=s.instance)||void 0===i?void 0:i.style)||void 0===o?void 0:o.display)&&(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ol(e,{x:-s.scroll.x,y:-s.scroll.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,el(e,c)),r&&$u(s.latestValues)&&ol(e,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var o=i.target;if(o){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var a=this.treeScale.x,s=this.treeScale.y,c=this.projectionTransform;pl(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.projectionTransform=xl(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var i=this.snapshot,o=(null==i?void 0:i.latestValues)||{},a=Ma({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var c={x:{min:0,max:0},y:{min:0,max:0}},u=null==i?void 0:i.isShared,l=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,f=Boolean(u&&!l&&!0===this.options.crossfade&&!this.path.some(Zl));this.mixTargetDelta=function(t){var n,i,d,p,h,v=t/1e3;Yl(s.x,e.x,v),Yl(s.y,e.y,v),r.setTargetDelta(s),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(ml(c,r.layout.actual,r.relativeParent.layout.actual),i=r.relativeTarget,d=r.relativeTargetOrigin,p=c,h=v,Xl(i.x,d.x,p.x,h),Xl(i.y,d.y,p.y,h)),u&&(r.animationValues=a,function(e,t,n,r,i,o){var a,s,c,u;i?(e.opacity=As(0,null!==(a=n.opacity)&&void 0!==a?a:1,qu(r)),e.opacityExit=As(null!==(s=t.opacity)&&void 0!==s?s:1,0,zu(r))):o&&(e.opacity=As(null!==(c=t.opacity)&&void 0!==c?c:1,null!==(u=n.opacity)&&void 0!==u?u:1,r));for(var l=0;l<Uu;l++){var f="border".concat(ju[l],"Radius"),d=Bu(t,f),p=Bu(n,f);if((void 0!==d||void 0!==p)&&(d||(d=0),p||(p=0),"number"==typeof d&&"number"==typeof p)){var h=Math.max(As(d,p,r),0);e[f]=h}}(t.rotate||n.rotate)&&(e.rotate=As(t.rotate||0,n.rotate||0,r))}(a,o,r.latestValues,v,f,l)),r.root.scheduleUpdateProjection(),r.scheduleRender()},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&($a.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ts.update((function(){jl.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=Ds(0)?0:Ls(0);return Fu("",r,1e3,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,0,Ma(Ma({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;t&&n&&r&&(Qu(t,n),ol(t,i),pl(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ol),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,i=t.preserveFollowOpacity,o=this.getStack();o&&o.promote(this,i),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<Al.length;r++){var i="rotate"+Al[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null==e||e.syncRender(),n)e.setStaticValue(i,n[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,i,o,a;void 0===e&&(e={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var c=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=Fl(e.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none",s;var u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){var l={};return this.options.layoutId&&(l.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,l.pointerEvents=Fl(e.pointerEvents)||""),this.hasProjected&&!$u(this.latestValues)&&(l.transform=c?c({},""):"none",this.hasProjected=!1),l}var f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),s.transform=xl(this.projectionDeltaWithTransform,this.treeScale,f),c&&(s.transform=c(f,s.transform));var d=this.projectionDelta,p=d.x,h=d.y;for(var v in s.transformOrigin="".concat(100*p.origin,"% ").concat(100*h.origin,"% 0"),u.animationValues?s.opacity=u===this?null!==(i=null!==(r=f.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?null!==(o=f.opacity)&&void 0!==o?o:"":null!==(a=f.opacityExit)&&void 0!==a?a:0,Tl)if(void 0!==f[v]){var m=Tl[v],g=m.correct,y=m.applyTo,b=g(f[v],u);if(y)for(var w=y.length,S=0;S<w;S++)s[y[S]]=b;else s[v]=b}return this.options.layoutId&&(s.pointerEvents=u===this?Fl(e.pointerEvents)||"":"none"),s},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Gl),this.root.sharedNodes.clear()},e}()}function Bl(e){e.updateLayout()}function ql(e){var t,n,r,i,o=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&o&&e.hasListeners("didUpdate")){var a=e.layout,s=a.actual,c=a.measured;"size"===e.options.animationType?Rl((function(e){var t=o.isShared?o.measured[e]:o.layout[e],n=ll(t);t.min=s[e].min,t.max=t.min+n})):"position"===e.options.animationType&&Rl((function(e){var t=o.isShared?o.measured[e]:o.layout[e],n=ll(s[e]);t.max=t.min+n}));var u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};pl(u,s,o.layout);var l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o.isShared?pl(l,e.applyTransform(c,!0),o.measured):pl(l,s,o.layout);var f=!El(u),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var p=e.relativeParent,h=p.snapshot,v=p.layout;if(h&&v){var m={x:{min:0,max:0},y:{min:0,max:0}};ml(m,o.layout,h.layout);var g={x:{min:0,max:0},y:{min:0,max:0}};ml(g,s,v.actual),_l(m,g)||(d=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:o,delta:l,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(i=(r=e.options).onExitComplete)||void 0===i||i.call(r));e.options.transition=void 0}function zl(e){e.clearSnapshot()}function Gl(e){e.clearMeasurements()}function Hl(e){e.resetTransform()}function Ql(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function Wl(e){e.resolveTargetDelta()}function Kl(e){e.calcProjection()}function $l(e){e.resetRotation()}function Jl(e){e.removeLeadSnapshot()}function Yl(e,t,n){e.translate=As(t.translate,0,n),e.scale=As(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Xl(e,t,n,r){e.min=As(t.min,n.min,r),e.max=As(t.max,n.max,r)}function Zl(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var ef={duration:.45,ease:[.4,0,.1,1]};function tf(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function nf(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function rf(e){nf(e.x),nf(e.y)}var of=1,af=(0,r.createContext)({}),sf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Na(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(r.Component);function cf(e){var t=e.preloadedFeatures,n=e.createVisualElement,i=e.projectionNodeConstructor,o=e.useRender,a=e.useVisualState,s=e.Component;return t&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?ps.projectionNodeConstructor=e[t]:ps[t].Component=e[t])}(t),(0,r.forwardRef)((function(e,t){var c=function(e){var t,n=e.layoutId,i=null===(t=(0,r.useContext)(us))||void 0===t?void 0:t.id;return i&&void 0!==n?i+"-"+n:n}(e);e=Ma(Ma({},e),{layoutId:c});var u=(0,r.useContext)(gs),l=null,f=function(e){var t=function(e,t){if(Ts(e)){var n=e.initial,r=e.animate;return{initial:!1===n||Es(n)?n:void 0,animate:Es(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(ys)),n=t.initial,i=t.animate;return(0,r.useMemo)((function(){return{initial:n,animate:i}}),[Rs(n),Rs(i)])}(e),d=u.isStatic?void 0:is((function(){if(jl.hasEverUpdated)return of++})),p=a(e,u.isStatic);return!u.isStatic&&bs&&(f.visualElement=function(e,t,n,i){var o=(0,r.useContext)(hs),a=(0,r.useContext)(ys).visualElement,s=(0,r.useContext)(rs),c=(0,r.useRef)(void 0);i||(i=o.renderer),!c.current&&i&&(c.current=i(e,{visualState:t,parent:a,props:n,presenceId:null==s?void 0:s.id,blockInitialAnimation:!1===(null==s?void 0:s.initial)}));var u=c.current;return ws((function(){null==u||u.syncRender()})),(0,r.useEffect)((function(){var e;null===(e=null==u?void 0:u.animationState)||void 0===e||e.animateChanges()})),ws((function(){return function(){return null==u?void 0:u.notifyUnmount()}}),[]),u}(s,p,Ma(Ma({},u),e),n),function(e,t,n,i){var o,a=t.layoutId,s=t.layout,c=t.drag,u=t.dragConstraints,l=t.layoutScroll,f=(0,r.useContext)(af);i&&n&&!(null==n?void 0:n.projection)&&(n.projection=new i(e,n.getLatestValues(),null===(o=n.parent)||void 0===o?void 0:o.projection),n.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:Boolean(c)||u&&Ss(u),visualElement:n,scheduleRender:function(){return n.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:f,layoutScroll:l}))}(d,e,f.visualElement,i||ps.projectionNodeConstructor),l=function(e,t,n){var i=[];if((0,r.useContext)(hs),!t)return null;for(var o=0;o<ms;o++){var a=vs[o],s=ps[a],c=s.isEnabled,u=s.Component;c(e)&&u&&i.push(r.createElement(u,Ma({key:a},e,{visualElement:t})))}return i}(e,f.visualElement)),r.createElement(sf,{visualElement:f.visualElement,props:Ma(Ma({},u),e)},l,r.createElement(ys.Provider,{value:f},o(s,e,d,function(e,t,n){return(0,r.useCallback)((function(r){var i;r&&(null===(i=e.mount)||void 0===i||i.call(e,r)),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):Ss(n)&&(n.current=r))}),[t])}(p,f.visualElement,t),p,u.isStatic,f.visualElement)))}))}function uf(e){function t(t,n){return void 0===n&&(n={}),cf(e(t,n))}if("undefined"==typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var lf=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function ff(e){return"string"==typeof e&&!e.includes("-")&&!!(lf.indexOf(e)>-1||/[A-Z]/.test(e))}function df(e,t){var n=t.layout,r=t.layoutId;return Ml(e)||Ll(e)||(n||void 0!==r)&&(!!Tl[e]||"opacity"===e)}var pf={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function hf(e){return e.startsWith("--")}var vf=function(e,t){return t&&"number"==typeof e?t.transform(e):e};function mf(e,t,n,r){var i,o=e.style,a=e.vars,s=e.transform,c=e.transformKeys,u=e.transformOrigin;c.length=0;var l=!1,f=!1,d=!0;for(var p in t){var h=t[p];if(hf(p))a[p]=h;else{var v=Au[p],m=vf(h,v);if(Ml(p)){if(l=!0,s[p]=m,c.push(p),!d)continue;h!==(null!==(i=v.default)&&void 0!==i?i:0)&&(d=!1)}else Ll(p)?(u[p]=m,f=!0):o[p]=m}}l?o.transform=function(e,t,n,r){var i=e.transform,o=e.transformKeys,a=t.enableHardwareAcceleration,s=void 0===a||a,c=t.allowTransformNone,u=void 0===c||c,l="";o.sort(Il);for(var f=!1,d=o.length,p=0;p<d;p++){var h=o[p];l+="".concat(pf[h]||h,"(").concat(i[h],") "),"z"===h&&(f=!0)}return!f&&s?l+="translateZ(0)":l=l.trim(),r?l=r(i,n?"":l):u&&n&&(l="none"),l}(e,n,d,r):r&&(o.transform=r({},"")),f&&(o.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,o=e.originZ,a=void 0===o?0:o;return"".concat(n," ").concat(i," ").concat(a)}(u))}function gf(e,t,n){for(var r in t)Ds(t[r])||df(r,n)||(e[r]=t[r])}function yf(e,t,n){var i={},o=function(e,t,n){var i={};return gf(i,e.style||{},e),Object.assign(i,function(e,t,n){var i=e.transformTemplate;return(0,r.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};mf(e,t,{enableHardwareAcceleration:!n},i);var r=e.style;return Ma(Ma({},e.vars),r)}),[t])}(e,t,n)),e.transformValues&&(i=e.transformValues(i)),i}(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),i.style=o,i}var bf=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function wf(e){return bf.has(e)}var Sf=function(e){return!wf(e)};try{var kf=require("@emotion/is-prop-valid").default;Sf=function(e){return e.startsWith("on")?!wf(e):kf(e)}}catch(Qp){}function Ef(e,t,n){return"string"==typeof e?e:uc.transform(t+n*e)}var _f={offset:"stroke-dashoffset",array:"stroke-dasharray"},Of={offset:"strokeDashoffset",array:"strokeDasharray"};function Tf(e,t,n,r){var i=t.attrX,o=t.attrY,a=t.originX,s=t.originY,c=t.pathLength,u=t.pathSpacing,l=void 0===u?1:u,f=t.pathOffset,d=void 0===f?0:f;mf(e,Pa(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var p=e.attrs,h=e.style,v=e.dimensions;p.transform&&(v&&(h.transform=p.transform),delete p.transform),v&&(void 0!==a||void 0!==s||h.transform)&&(h.transformOrigin=function(e,t,n){var r=Ef(t,e.x,e.width),i=Ef(n,e.y,e.height);return"".concat(r," ").concat(i)}(v,void 0!==a?a:.5,void 0!==s?s:.5)),void 0!==i&&(p.x=i),void 0!==o&&(p.y=o),void 0!==c&&function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),e.pathLength=1;var o=i?_f:Of;e[o.offset]=uc.transform(-r);var a=uc.transform(t),s=uc.transform(n);e[o.array]="".concat(a," ").concat(s)}(p,c,l,d,!1)}var xf=function(){return Ma(Ma({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Rf(e,t){var n=(0,r.useMemo)((function(){var n=xf();return Tf(n,t,{enableHardwareAcceleration:!1},e.transformTemplate),Ma(Ma({},n.attrs),{style:Ma({},n.style)})}),[t]);if(e.style){var i={};gf(i,e.style,e),n.style=Ma(Ma({},i),n.style)}return n}function Af(e){return void 0===e&&(e=!1),function(t,n,i,o,a,s){var c=a.latestValues,u=(ff(t)?Rf:yf)(n,c,s),l=function(e,t,n){var r={};for(var i in e)(Sf(i)||!0===n&&wf(i)||!t&&!wf(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"==typeof t,e),f=Ma(Ma(Ma({},l),u),{ref:o});return i&&(f["data-projection-id"]=i),(0,r.createElement)(t,f)}}var Cf=/([a-z])([A-Z])/g,If=function(e){return e.replace(Cf,"$1-$2").toLowerCase()};function Nf(e,t,n,r){var i=t.style,o=t.vars;for(var a in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),o)e.style.setProperty(a,o[a])}var Mf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function Pf(e,t){for(var n in Nf(e,t),t.attrs)e.setAttribute(Mf.has(n)?n:If(n),t.attrs[n])}function Lf(e){var t=e.style,n={};for(var r in t)(Ds(t[r])||df(r,e))&&(n[r]=t[r]);return n}function Df(e){var t=Lf(e);for(var n in e)Ds(e[n])&&(t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]);return t}function Vf(e){return"object"==typeof e&&"function"==typeof e.start}function Ff(e,t,n,r){var i=e.scrapeMotionValuesFromProps,o=e.createRenderState,a=e.onMount,s={latestValues:Uf(t,n,r,i),renderState:o()};return a&&(s.mount=function(e){return a(t,e,s)}),s}var jf=function(e){return function(t,n){var i=(0,r.useContext)(ys),o=(0,r.useContext)(rs);return n?Ff(e,t,i,o):is((function(){return Ff(e,t,i,o)}))}};function Uf(e,t,n,r){var i={},o=!1===(null==n?void 0:n.initial),a=r(e);for(var s in a)i[s]=Fl(a[s]);var c=e.initial,u=e.animate,l=Ts(e),f=xs(e);t&&f&&!l&&!1!==e.inherit&&(null!=c||(c=t.initial),null!=u||(u=t.animate));var d=o||!1===c,p=d?u:c;return p&&"boolean"!=typeof p&&!Vf(p)&&(Array.isArray(p)?p:[p]).forEach((function(t){var n=_s(e,t);if(n){var r=n.transitionEnd;n.transition;var o=Pa(n,["transitionEnd","transition"]);for(var a in o){var s=o[a];Array.isArray(s)&&(s=s[d?s.length-1:0]),null!==s&&(i[a]=s)}for(var a in r)i[a]=r[a]}})),i}var Bf,qf={useVisualState:jf({scrapeMotionValuesFromProps:Df,createRenderState:xf,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}Tf(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),Pf(t,r)}})},zf={useVisualState:jf({scrapeMotionValuesFromProps:Lf,createRenderState:function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}}})};function Gf(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function Hf(e,t,n,i){(0,r.useEffect)((function(){var r=e.current;if(n&&r)return Gf(r,t,n,i)}),[e,t,n,i])}function Qf(e){return"undefined"!=typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function Wf(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(Bf||(Bf={}));var Kf={pageX:0,pageY:0};function $f(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||Kf;return{x:n[t+"X"],y:n[t+"Y"]}}function Jf(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function Yf(e,t){return void 0===t&&(t="page"),{point:Wf(e)?$f(e,t):Jf(e,t)}}var Xf=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,Yf(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},Zf={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},ed={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function td(e){return bs&&null===window.onpointerdown?e:bs&&null===window.ontouchstart?ed[e]:bs&&null===window.onmousedown?Zf[e]:e}function nd(e,t,n,r){return Gf(e,td(t),Xf(n,"pointerdown"===t),r)}function rd(e,t,n,r){return Hf(e,td(t),n&&Xf(n,"pointerdown"===t),r)}function id(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var od=id("dragHorizontal"),ad=id("dragVertical");function sd(e){var t=!1;if("y"===e)t=ad();else if("x"===e)t=od();else{var n=od(),r=ad();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function cd(){var e=sd(!0);return!e||(e(),!1)}function ud(e,t,n){return function(r,i){var o;Qf(r)&&!cd()&&(null===(o=e.animationState)||void 0===o||o.setActive(Bf.Hover,t),null==n||n(r,i))}}var ld=function(e,t){return!!t&&(e===t||ld(e,t.parentElement))},fd=new WeakMap,dd=new WeakMap,pd=function(e){var t;null===(t=fd.get(e.target))||void 0===t||t(e)},hd=function(e){e.forEach(pd)};var vd={some:0,all:1};function md(e,t,n,i){var o=i.root,a=i.margin,s=i.amount,c=void 0===s?"some":s,u=i.once;(0,r.useEffect)((function(){if(e){var r={root:null==o?void 0:o.current,rootMargin:a,threshold:"number"==typeof c?c:vd[c]};return function(e,t,n){var r=function(e){var t=e.root,n=Pa(e,["root"]),r=t||document;dd.has(r)||dd.set(r,{});var i=dd.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(hd,Ma({root:t},n))),i[o]}(t);return fd.set(e,n),r.observe(e),function(){fd.delete(e),r.unobserve(e)}}(n.getInstance(),r,(function(e){var r,i=e.isIntersecting;if(t.isInView!==i&&(t.isInView=i,!u||i||!t.hasEnteredView)){i&&(t.hasEnteredView=!0),null===(r=n.animationState)||void 0===r||r.setActive(Bf.InView,i);var o=n.getProps(),a=i?o.onViewportEnter:o.onViewportLeave;null==a||a(e)}}))}}),[e,o,a,c])}function gd(e,t,n){(0,r.useEffect)((function(){e&&requestAnimationFrame((function(){var e;t.hasEnteredView=!0;var r=n.getProps().onViewportEnter;null==r||r(null),null===(e=n.animationState)||void 0===e||e.setActive(Bf.InView,!0)}))}),[e])}var yd=function(e){return function(t){return e(t),null}},bd={inView:yd((function(e){var t=e.visualElement,n=e.whileInView,i=e.onViewportEnter,o=e.onViewportLeave,a=e.viewport,s=void 0===a?{}:a,c=(0,r.useRef)({hasEnteredView:!1,isInView:!1}),u=Boolean(n||i||o);s.once&&c.current.hasEnteredView&&(u=!1),("undefined"==typeof IntersectionObserver?gd:md)(u,c.current,t,s)})),tap:yd((function(e){var t=e.onTap,n=e.onTapStart,i=e.onTapCancel,o=e.whileTap,a=e.visualElement,s=t||n||i||o,c=(0,r.useRef)(!1),u=(0,r.useRef)(null);function l(){var e;null===(e=u.current)||void 0===e||e.call(u),u.current=null}function f(){var e;return l(),c.current=!1,null===(e=a.animationState)||void 0===e||e.setActive(Bf.Tap,!1),!cd()}function d(e,n){f()&&(ld(a.getInstance(),e.target)?null==t||t(e,n):null==i||i(e,n))}function p(e,t){f()&&(null==i||i(e,t))}rd(a,"pointerdown",s?function(e,t){var r;l(),c.current||(c.current=!0,u.current=Ic(nd(window,"pointerup",d),nd(window,"pointercancel",p)),null===(r=a.animationState)||void 0===r||r.setActive(Bf.Tap,!0),null==n||n(e,t))}:void 0),ns(l)})),focus:yd((function(e){var t=e.whileFocus,n=e.visualElement;Hf(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(Bf.Focus,!0)}:void 0),Hf(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(Bf.Focus,!1)}:void 0)})),hover:yd((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;rd(i,"pointerenter",t||r?ud(i,!0,t):void 0),rd(i,"pointerleave",n||r?ud(i,!1,n):void 0)}))};function wd(){var e=(0,r.useContext)(rs);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,i=e.register,o=Ed();return(0,r.useEffect)((function(){return i(o)}),[]),!t&&n?[!1,function(){return null==n?void 0:n(o)}]:[!0]}var Sd=0,kd=function(){return Sd++},Ed=function(){return is(kd)};function _d(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var Od=function(e){return function(t){return t.test(e)}},Td=[Ys,uc,cc,sc,fc,lc,{test:function(e){return"auto"===e},parse:function(e){return e}}],xd=function(e){return Td.find(Od(e))},Rd=Fa(Fa([],Va(Td),!1),[Sc,Rc],!1),Ad=function(e){return Rd.find(Od(e))};function Cd(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ls(n))}function Id(e,t){if(t)return(t[e]||t.default||t).from}function Nd(e,t,n){var r;void 0===n&&(n={});var i=Os(e,t,n.custom),o=(i||{}).transition,a=void 0===o?e.getDefaultTransition()||{}:o;n.transitionOverride&&(a=n.transitionOverride);var s=i?function(){return Md(e,i,n)}:function(){return Promise.resolve()},c=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=a.delayChildren,o=void 0===i?0:i,s=a.staggerChildren,c=a.staggerDirection;return function(e,t,n,r,i,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1);var a=[],s=(e.variantChildren.size-1)*r,c=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),s-e*r};return Array.from(e.variantChildren).sort(Pd).forEach((function(e,r){a.push(Nd(e,t,Ma(Ma({},o),{delay:n+c(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(a)}(e,t,o+r,s,c,n)}:function(){return Promise.resolve()},u=a.when;if(u){var l=Va("beforeChildren"===u?[s,c]:[c,s],2),f=l[0],d=l[1];return f().then(d)}return Promise.all([s(),c(n.delay)])}function Md(e,t,n){var r,i=void 0===n?{}:n,o=i.delay,a=void 0===o?0:o,s=i.transitionOverride,c=i.type,u=e.makeTargetAnimatable(t),l=u.transition,f=void 0===l?e.getDefaultTransition():l,d=u.transitionEnd,p=Pa(u,["transition","transitionEnd"]);s&&(f=s);var h=[],v=c&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[c]);for(var m in p){var g=e.getValue(m),y=p[m];if(!(!g||void 0===y||v&&Ld(v,m))){var b=Fu(m,g,y,Ma({delay:a},f));h.push(b)}}return Promise.all(h).then((function(){d&&function(e,t){var n=Os(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,o=void 0===i?{}:i;r.transition;var a=Pa(r,["transitionEnd","transition"]);for(var s in a=Ma(Ma({},a),o))Cd(e,s,Mu(a[s]))}(e,d)}))}function Pd(e,t){return e.sortNodePosition(t)}function Ld(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var Dd=[Bf.Animate,Bf.InView,Bf.Focus,Bf.Hover,Bf.Tap,Bf.Drag,Bf.Exit],Vd=Fa([],Va(Dd),!1).reverse(),Fd=Dd.length;function jd(e){var t=function(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return Nd(e,t,n)}));r=Promise.all(i)}else if("string"==typeof t)r=Nd(e,t,n);else{var o="function"==typeof t?Os(e,t,n.custom):t;r=Md(e,o,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}(e),n=function(){var e;return(e={})[Bf.Animate]=Ud(!0),e[Bf.InView]=Ud(),e[Bf.Hover]=Ud(),e[Bf.Tap]=Ud(),e[Bf.Drag]=Ud(),e[Bf.Focus]=Ud(),e[Bf.Exit]=Ud(),e}(),r={},i=!0,o=function(t,n){var r=Os(e,n);if(r){r.transition;var i=r.transitionEnd,o=Pa(r,["transition","transitionEnd"]);t=Ma(Ma(Ma({},t),o),i)}return t};function a(a,s){for(var c,u=e.getProps(),l=e.getVariantContext(!0)||{},f=[],d=new Set,p={},h=1/0,v=function(t){var r=Vd[t],v=n[r],m=null!==(c=u[r])&&void 0!==c?c:l[r],g=Es(m),y=r===s?v.isActive:null;!1===y&&(h=t);var b=m===l[r]&&m!==u[r]&&g;if(b&&i&&e.manuallyAnimateOnMount&&(b=!1),v.protectedKeys=Ma({},p),!v.isActive&&null===y||!m&&!v.prevProp||Vf(m)||"boolean"==typeof m)return"continue";var w=function(e,t){return"string"==typeof t?t!==e:!!ks(t)&&!_d(t,e)}(v.prevProp,m),S=w||r===s&&v.isActive&&!b&&g||t>h&&g,k=Array.isArray(m)?m:[m],E=k.reduce(o,{});!1===y&&(E={});var _=v.prevResolvedValues,O=void 0===_?{}:_,T=Ma(Ma({},O),E),x=function(e){S=!0,d.delete(e),v.needsAnimating[e]=!0};for(var R in T){var A=E[R],C=O[R];p.hasOwnProperty(R)||(A!==C?yu(A)&&yu(C)?!_d(A,C)||w?x(R):v.protectedKeys[R]=!0:void 0!==A?x(R):d.add(R):void 0!==A&&d.has(R)?x(R):v.protectedKeys[R]=!0)}v.prevProp=m,v.prevResolvedValues=E,v.isActive&&(p=Ma(Ma({},p),E)),i&&e.blockInitialAnimation&&(S=!1),S&&!b&&f.push.apply(f,Fa([],Va(k.map((function(e){return{animation:e,options:Ma({type:r},a)}}))),!1))},m=0;m<Fd;m++)v(m);if(r=Ma({},p),d.size){var g={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(g[t]=n)})),f.push({animation:g})}var y=Boolean(f.length);return i&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(f):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:a,setActive:function(t,r,i){var o;return n[t].isActive===r?Promise.resolve():(null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,a(i,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Ud(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Bd={animation:yd((function(e){var t=e.visualElement,n=e.animate;t.animationState||(t.animationState=jd(t)),Vf(n)&&(0,r.useEffect)((function(){return n.subscribe(t)}),[n])})),exit:yd((function(e){var t=e.custom,n=e.visualElement,i=Va(wd(),2),o=i[0],a=i[1],s=(0,r.useContext)(rs);(0,r.useEffect)((function(){var e,r;n.isPresent=o;var i=null===(e=n.animationState)||void 0===e?void 0:e.setActive(Bf.Exit,!o,{custom:null!==(r=null==s?void 0:s.custom)&&void 0!==r?r:t});!o&&(null==i||i.then(a))}),[o])}))},qd=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=Hd(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=ul(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,o=es().timestamp;r.history.push(Ma(Ma({},i),{timestamp:o}));var a=r.handlers,s=a.onStart,c=a.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),c&&c(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=zd(t,r.transformPagePoint),Qf(e)&&0===e.buttons?r.handlePointerUp(e,t):ts.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,o=n.onSessionEnd,a=Hd(zd(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,a),o&&o(e,a)},!(Wf(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var o=zd(Yf(e),this.transformPagePoint),a=o.point,s=es().timestamp;this.history=[Ma(Ma({},a),{timestamp:s})];var c=t.onSessionStart;c&&c(e,Hd(o,this.history)),this.removeListeners=Ic(nd(window,"pointermove",this.handlePointerMove),nd(window,"pointerup",this.handlePointerUp),nd(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),$a.update(this.updatePoint)},e}();function zd(e,t){return t?{point:t(e.point)}:e}function Gd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Hd(e,t){var n=e.point;return{point:n,delta:Gd(n,Wd(t)),offset:Gd(n,Qd(t)),velocity:Kd(t,.1)}}function Qd(e){return e[0]}function Wd(e){return e[e.length-1]}function Kd(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=Wd(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>su(t)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function $d(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Jd(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=Va([i,r],2))[0],i=n[1]),{min:r,max:i}}var Yd=.35;function Xd(e,t,n){return{min:Zd(e,t),max:Zd(e,n)}}function Zd(e,t){var n;return"number"==typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function ep(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function tp(e,t){return ep(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var np=new WeakMap,rp=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,i=void 0!==r&&r;!1!==this.visualElement.isPresent&&(this.panSession=new qd(e,{onSessionStart:function(e){n.stopAnimation(),i&&n.snapToCursor(Yf(e,"page").point)},onStart:function(e,t){var r,i=n.getProps(),o=i.drag,a=i.dragPropagation,s=i.onDragStart;(!o||a||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=sd(o),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),Rl((function(e){var t,r,i=n.getAxisMotionValue(e).get()||0;if(cc.test(i)){var o=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];o&&(i=ll(o)*(parseFloat(i)/100))}n.originPoint[e]=i})),null==s||s(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive(Bf.Drag,!0))},onMove:function(e,t){var r=n.getProps(),i=r.dragPropagation,o=r.dragDirectionLock,a=r.onDirectionLock,s=r.onDrag;if(i||n.openGlobalLock){var c=t.offset;if(o&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(c),void(null!==n.currentDirection&&(null==a||a(n.currentDirection)));n.updateAxis("x",t.point,c),n.updateAxis("y",t.point,c),n.visualElement.syncRender(),null==s||s(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()}))},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null==i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(Bf.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&ip(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?As(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?As(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,o=this.constraints;n&&Ss(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,o=t.right;return{x:$d(e.x,r,o),y:$d(e.y,n,i)}}(i.actual,n),this.elastic=function(e){return void 0===e&&(e=Yd),!1===e?e=0:!0===e&&(e=Yd),{x:Xd(e,"left","right"),y:Xd(e,"top","bottom")}}(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rl((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!Ss(t))return!1;var r=t.current,i=this.visualElement.projection;if(!i||!i.layout)return!1;var o=function(e,t,n){var r=tp(e,n),i=t.scroll;return i&&(tl(r.x,i.x),tl(r.y,i.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),a=function(e,t){return{x:Jd(e.x,t.x),y:Jd(e.y,t.y)}}(i.layout.actual,o);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!s,s&&(a=ep(s))}return a},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,o=n.dragElastic,a=n.dragTransition,s=n.dragSnapToOrigin,c=n.onDragTransitionEnd,u=this.constraints||{},l=Rl((function(n){var c;if(ip(n,r,t.currentDirection)){var l=null!==(c=null==u?void 0:u[n])&&void 0!==c?c:{};s&&(l={min:0,max:0});var f=o?200:1e6,d=o?40:1e7,p=Ma(Ma({type:"inertia",velocity:i?e[n]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),l);return t.startAxisValueAnimation(n,p)}}));return Promise.all(l).then(c)},e.prototype.startAxisValueAnimation=function(e,t){return Fu(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;Rl((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase();return this.visualElement.getProps()[r]||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;Rl((function(n){if(ip(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var o=r.layout.actual[n],a=o.min,s=o.max;i.set(e[n]-As(a,s,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,i=n.dragConstraints,o=this.visualElement.projection;if(Ss(i)&&o&&this.constraints){this.stopAnimation();var a={x:0,y:0};Rl((function(e){var n,r,i,o,s,c=t.getAxisMotionValue(e);if(c){var u=c.get();a[e]=(n={min:u,max:u},r=t.constraints[e],i=.5,o=ll(n),(s=ll(r))>o?i=Gs(r.min,r.max-o,n.min):o>s&&(i=Gs(n.min,n.max-s,r.min)),Vs(0,1,i))}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(e=o.root)||void 0===e||e.updateScroll(),o.updateLayout(),this.resolveConstraints(),Rl((function(e){if(ip(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],o=i.min,s=i.max;n.set(As(o,s,a[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;np.set(this.visualElement,this);var n=nd(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){Ss(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,o=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var a=Gf(window,"resize",(function(){t.scalePositionWithinConstraints()}));return i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(Rl((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){a(),n(),o()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,o=e.dragPropagation,a=void 0!==o&&o,s=e.dragConstraints,c=void 0!==s&&s,u=e.dragElastic,l=void 0===u?Yd:u,f=e.dragMomentum,d=void 0===f||f;return Ma(Ma({},e),{drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:l,dragMomentum:d})},e}();function ip(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}var op={pan:yd((function(e){var t=e.onPan,n=e.onPanStart,i=e.onPanEnd,o=e.onPanSessionStart,a=e.visualElement,s=t||n||i||o,c=(0,r.useRef)(null),u=(0,r.useContext)(gs).transformPagePoint,l={onSessionStart:o,onStart:n,onMove:t,onEnd:function(e,t){c.current=null,i&&i(e,t)}};(0,r.useEffect)((function(){null!==c.current&&c.current.updateHandlers(l)})),rd(a,"pointerdown",s&&function(e){c.current=new qd(e,l,{transformPagePoint:u})}),ns((function(){return c.current&&c.current.end()}))})),drag:yd((function(e){var t=e.dragControls,n=e.visualElement,i=is((function(){return new rp(n)}));(0,r.useEffect)((function(){return t&&t.subscribe(i)}),[i,t]),(0,r.useEffect)((function(){return i.addListeners()}),[i])}))},ap=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"],sp=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,o=e.makeTargetAnimatable,a=e.measureViewportBox,s=e.render,c=e.readValueFromInstance,u=e.removeValueFromRenderState,l=e.sortNodePosition,f=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,p=e.props,h=e.presenceId,v=e.blockInitialAnimation,m=e.visualState;void 0===t&&(t={});var g,y,b=!1,w=m.latestValues,S=m.renderState,k=function(){var e=ap.map((function(){return new Ms})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){ap.forEach((function(r){var i,o="on"+r,a=e[o];null===(i=t[r])||void 0===i||i.call(t),a&&(t[r]=n[o](a))}))}};return e.forEach((function(e,t){n["on"+ap[t]]=function(t){return e.add(t)},n["notify"+ap[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.notify.apply(e,Fa([],Va(t),!1))}})),n}(),E=new Map,_=new Map,O={},T=Ma({},w);function x(){g&&b&&(R(),s(g,S,p.style,L.projection))}function R(){r(L,S,w,t,p)}function A(){k.notifyUpdate(w)}var C=f(p);for(var I in C){var N=C[I];void 0!==w[I]&&Ds(N)&&N.set(w[I],!1)}var M=Ts(p),P=xs(p),L=Ma(Ma({treeType:n,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:h,variantChildren:P?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==d?void 0:d.isMounted()),blockInitialAnimation:v,isMounted:function(){return Boolean(g)},mount:function(e){b=!0,g=L.current=e,L.projection&&L.projection.mount(e),P&&d&&!M&&(y=null==d?void 0:d.addVariantChild(L)),null==d||d.children.add(L),L.setProps(p)},unmount:function(){var e;null===(e=L.projection)||void 0===e||e.unmount(),$a.update(A),$a.render(x),_.forEach((function(e){return e()})),null==y||y(),null==d||d.children.delete(L),k.clearAllListeners(),g=void 0,b=!1},addVariantChild:function(e){var t,n=L.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return l&&n===e.treeType?l(L.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return P?L:null==d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return p.layoutId},getInstance:function(){return g},getStaticValue:function(e){return w[e]},setStaticValue:function(e,t){return w[e]=t},getLatestValues:function(){return w},setVisibility:function(e){L.isVisible!==e&&(L.isVisible=e,L.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),o(L,e,p,t)},measureViewportBox:function(){return a(g,p)},addValue:function(e,t){L.hasValue(e)&&L.removeValue(e),E.set(e,t),w[e]=t.get(),function(e,t){var n=t.onChange((function(t){w[e]=t,p.onUpdate&&ts.update(A,!1,!0)})),r=t.onRenderRequest(L.scheduleRender);_.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;E.delete(e),null===(t=_.get(e))||void 0===t||t(),_.delete(e),delete w[e],u(e,S)},hasValue:function(e){return E.has(e)},getValue:function(e,t){var n=E.get(e);return void 0===n&&void 0!==t&&(n=Ls(t),L.addValue(e,n)),n},forEachValue:function(e){return E.forEach(e)},readValue:function(e){var n;return null!==(n=w[e])&&void 0!==n?n:c(g,e,t)},setBaseTarget:function(e,t){T[e]=t},getBaseTarget:function(e){if(i){var t=i(p,e);if(void 0!==t&&!Ds(t))return t}return T[e]}},k),{build:function(){return R(),S},scheduleRender:function(){ts.render(x,!1,!0)},syncRender:x,setProps:function(e){p=e,k.updatePropListeners(e),O=function(e,t,n){var r;for(var i in t){var o=t[i],a=n[i];if(Ds(o))e.addValue(i,o);else if(Ds(a))e.addValue(i,Ls(o));else if(a!==o)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(o)}else e.addValue(i,Ls(null!==(r=e.getStaticValue(i))&&void 0!==r?r:o))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(L,f(p),O)},getProps:function(){return p},getVariant:function(e){var t;return null===(t=p.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return p.transition},getTransformPagePoint:function(){return p.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null==d?void 0:d.getVariantContext();if(!M){var t=(null==d?void 0:d.getVariantContext())||{};return void 0!==p.initial&&(t.initial=p.initial),t}for(var n={},r=0;r<up;r++){var i=cp[r],o=p[i];(Es(o)||!1===o)&&(n[i]=o)}return n}});return L}},cp=Fa(["initial"],Va(Dd),!1),up=cp.length;function lp(e){return"string"==typeof e&&e.startsWith("var(--")}var fp=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function dp(e,t,n){void 0===n&&(n=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var r=Va(function(e){var t=fp.exec(e);if(!t)return[,];var n=Va(t,3);return[n[1],n[2]]}(e),2),i=r[0],o=r[1];if(i){var a=window.getComputedStyle(t).getPropertyValue(i);return a?a.trim():lp(o)?dp(o,t,n+1):o}}var pp,hp=new Set(["width","height","top","left","right","bottom","x","y"]),vp=function(e){return hp.has(e)},mp=function(e,t){e.set(t,!1),e.set(t)},gp=function(e){return e===Ys||e===uc};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(pp||(pp={}));var yp=function(e,t){return parseFloat(e.split(", ")[t])},bp=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var o=i.match(/^matrix3d\((.+)\)$/);if(o)return yp(o[1],t);var a=i.match(/^matrix\((.+)\)$/);return a?yp(a[1],e):0}},wp=new Set(["x","y","z"]),Sp=Cl.filter((function(e){return!wp.has(e)})),kp={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,o=t.paddingRight,a=void 0===o?"0":o;return n.max-n.min-parseFloat(i)-parseFloat(a)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,o=t.paddingBottom,a=void 0===o?"0":o;return n.max-n.min-parseFloat(i)-parseFloat(a)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:bp(4,13),y:bp(5,14)};function Ep(e,t,n,r){return function(e){return Object.keys(e).some(vp)}(t)?function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=Ma({},t),r=Ma({},r);var i=Object.keys(t).filter(vp),o=[],a=!1,s=[];if(i.forEach((function(i){var c=e.getValue(i);if(e.hasValue(i)){var u,l=n[i],f=xd(l),d=t[i];if(yu(d)){var p=d.length,h=null===d[0]?1:0;l=d[h],f=xd(l);for(var v=h;v<p;v++)u?xd(d[v]):(u=xd(d[v]))===f||gp(f)&&gp(u)}else u=xd(d);if(f!==u)if(gp(f)&&gp(u)){var m=c.get();"string"==typeof m&&c.set(parseFloat(m)),"string"==typeof d?t[i]=parseFloat(d):Array.isArray(d)&&u===uc&&(t[i]=d.map(parseFloat))}else(null==f?void 0:f.transform)&&(null==u?void 0:u.transform)&&(0===l||0===d)?0===l?c.set(u.transform(l)):t[i]=f.transform(d):(a||(o=function(e){var t=[];return Sp.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),a=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],mp(c,d))}})),s.length){var c=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),o=getComputedStyle(i),a=o.display,s={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=kp[e](r,o)})),t.syncRender();var c=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);mp(r,s[n]),e[n]=kp[n](c,o)})),e}(t,e,s);return o.length&&o.forEach((function(t){var n=Va(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:c,transitionEnd:r}}return{target:t,transitionEnd:r}}(e,t,n,r):{target:t,transitionEnd:r}}var _p={treeType:"dom",readValueFromInstance:function(e,t){if(Ml(t)){var n=Iu(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(hf(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return tp(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var o=t.transition,a=t.transitionEnd,s=Pa(t,["transition","transitionEnd"]),c=function(e,t,n){var r,i,o={};for(var a in e)o[a]=null!==(r=Id(a,t))&&void 0!==r?r:null===(i=n.getValue(a))||void 0===i?void 0:i.get();return o}(s,o||{},e);if(i&&(a&&(a=i(a)),s&&(s=i(s)),c&&(c=i(c))),r){!function(e,t,n){var r,i,o,a,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),c=s.length;if(c)for(var u=0;u<c;u++){var l=s[u],f=t[l],d=null;Array.isArray(f)&&(d=f[0]),null===d&&(d=null!==(i=null!==(r=n[l])&&void 0!==r?r:e.readValue(l))&&void 0!==i?i:t[l]),null!=d&&("string"==typeof d&&(/^\-?\d*\.?\d+$/.test(d)||/^0[^.\s]+$/.test(d))?d=parseFloat(d):!Ad(d)&&Rc.test(f)&&(d=Nu(l,f)),e.addValue(l,Ls(d)),null!==(o=(a=n)[l])&&void 0!==o||(a[l]=d),e.setBaseTarget(l,d))}}(e,s,c);var u=function(e,t,n,r){var i=function(e,t,n){var r,i=Pa(t,[]),o=e.getInstance();if(!(o instanceof Element))return{target:i,transitionEnd:n};for(var a in n&&(n=Ma({},n)),e.forEachValue((function(e){var t=e.get();if(lp(t)){var n=dp(t,o);n&&e.set(n)}})),i){var s=i[a];if(lp(s)){var c=dp(s,o);c&&(i[a]=c,n&&(null!==(r=n[a])&&void 0!==r||(n[a]=s)))}}return{target:i,transitionEnd:n}}(e,t,r);return Ep(e,t=i.target,n,r=i.transitionEnd)}(e,s,c,a);a=u.transitionEnd,s=u.target}return Ma({transition:o,transitionEnd:a},s)},scrapeMotionValuesFromProps:Lf,build:function(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),mf(t,n,r,i.transformTemplate)},render:Nf},Op=sp(_p),Tp=sp(Ma(Ma({},_p),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Ml(t)?(null===(n=Iu(t))||void 0===n?void 0:n.default)||0:(t=Mf.has(t)?t:If(t),e.getAttribute(t))},scrapeMotionValuesFromProps:Df,build:function(e,t,n,r,i){Tf(t,n,r,i.transformTemplate)},render:Pf})),xp=function(e,t){return ff(e)?Tp(t,{enableHardwareAcceleration:!1}):Op(t,{enableHardwareAcceleration:!0})};function Rp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Ap={correct:function(e,t){if(!t.target)return e;if("string"==typeof e){if(!uc.test(e))return e;e=parseFloat(e)}var n=Rp(e,t.target.x),r=Rp(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Cp="_$css",Ip={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,o=e.includes("var("),a=[];o&&(e=e.replace(fp,(function(e){return a.push(e),Cp})));var s=Rc.parse(e);if(s.length>5)return i;var c=Rc.createTransformer(e),u="number"!=typeof s[0]?1:0,l=r.x.scale*n.x,f=r.y.scale*n.y;s[0+u]/=l,s[1+u]/=f;var d=As(l,f,.5);"number"==typeof s[2+u]&&(s[2+u]/=d),"number"==typeof s[3+u]&&(s[3+u]/=d);var p=c(s);if(o){var h=0;p=p.replace(Cp,(function(){var e=a[h];return h++,e}))}return p}},Np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Na(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,o=n.switchLayoutGroup,a=n.layoutId,s=r.projection;e=Mp,Object.assign(Tl,e),s&&((null==i?void 0:i.group)&&i.group.add(s),(null==o?void 0:o.register)&&a&&o.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(Ma(Ma({},s.options),{onExitComplete:function(){return t.safeToRemove()}}))),jl.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,o=n.drag,a=n.isPresent,s=i.projection;return s?(s.isPresent=a,o||e.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ts.postRender((function(){var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null==n?void 0:n.group)&&n.group.remove(i),(null==r?void 0:r.deregister)&&r.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null==e||e()},t.prototype.render=function(){return null},t}(r.Component),Mp={borderRadius:Ma(Ma({},Ap),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ap,borderTopRightRadius:Ap,borderBottomLeftRadius:Ap,borderBottomRightRadius:Ap,boxShadow:Ip},Pp={measureLayout:function(e){var t=Va(wd(),2),n=t[0],i=t[1],o=(0,r.useContext)(us);return r.createElement(Np,Ma({},e,{layoutGroup:o,switchLayoutGroup:(0,r.useContext)(af),isPresent:n,safeToRemove:i}))}},Lp=Ul({attachResizeListener:function(e,t){return e.addEventListener("resize",t,{passive:!0}),function(){return e.removeEventListener("resize",t)}},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),Dp={current:void 0},Vp=Ul({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!Dp.current){var e=new Lp(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),Dp.current=e}return Dp.current},resetTransform:function(e,t){e.style.transform=null!=t?t:"none"}}),Fp=Ma(Ma(Ma(Ma({},Bd),bd),op),Pp),jp=uf((function(e,t){return function(e,t,n,r,i){var o=t.forwardMotionProps,a=void 0!==o&&o,s=ff(e)?qf:zf;return Ma(Ma({},s),{preloadedFeatures:n,useRender:Af(a),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,Fp,xp,Vp)}));const Up=({animateDelay:e,character:t,position:n,hide:i,onClick:o})=>{const{name:a}=t,s=["character--box"];let c;n&&(c={...n,position:"absolute"});const u={hidden:{zIndex:n?.zIndex},visible:{zIndex:n?.zIndex}},l={hidden:{y:"65%"},visible:e=>({y:0,transition:{delay:.07*(e??1)}})};return i&&s.push("character--box__hiden"),r.createElement(fs,null,r.createElement(jp.div,{className:"character",style:c,transition:{delay:i?.3:0},initial:"visible",animate:i?"hidden":"visible",variants:u,exit:u.hidden},r.createElement(jp.div,{custom:e,className:s.join(" "),transition:{duration:.5},initial:"hidden",animate:i?"hidden":"visible",variants:l,exit:l.hidden,onClick:()=>o&&o(t,i)},r.createElement("div",{className:"character--box__background"},r.createElement("img",{src:"assets/case-background.webp"})),r.createElement("div",{className:"character--box__image"},r.createElement("img",{src:t.image,alt:a})),r.createElement("div",{className:"character--box__front"},r.createElement("img",{src:"assets/case-front.webp"})),r.createElement("div",{className:"character--box__name"},a))))},Bp={width:2400,height:1840},qp=({characters:e,charactersHidden:t,onClick:n})=>{const i=[{y:173,x:364,width:1670,height:340,padding:[32,32,0,32]},{y:444,x:320,width:1777,height:354,padding:[32,32,0,32]},{y:800,x:236,width:1946,height:430,padding:[32,32,0,32]}],o=[32,21,11],[a]=(0,r.useState)(new Map),s=(e,t)=>{let n={...e};if(n.padding){const[e,t,r,i]=n.padding;n.x-=i,n.y-=e,n.width=n.width+i+t,n.height=n.height+e+r}let r={...t};if(r.padding){const[e,t,i,o]=r.padding;r.width=r.width+o+t,r.height=r.height+e+i,n.x+=o,n.y+=e}const{x:i,y:o,width:a,height:s}=n;return{height:s/r.height*100+"%",left:i/r.width*100+"%",top:o/r.height*100+"%",width:a/r.width*100+"%"}},c=(n,r,a)=>{const c=(i[n].width-7*o[n])/8,u={x:c*r+o[n]*r,y:0,width:c,height:i[n].height},l=t&&t.includes(a);return{...s(u,i[n]),zIndex:l?e.length-10*n+r:100+10*n+r}},u=(e,t,n)=>a.get(n)?1:e%2==1?8*e+(7-t):8*e+t,l=e.reduce(((e,t,n)=>{const r=Math.floor(n/8);return e[r]=e[r]||[],e[r].push(t),e}),[]);return r.createElement("div",{className:"plateau"},r.createElement("img",{src:"assets/plateau-front.webp",alt:"Plateau"}),l.map(((e,o)=>r.createElement("div",{className:"plateau--row",key:o,style:{...s(i[o],Bp)}},e.map(((e,i)=>r.createElement(Up,{key:i,animateDelay:u(o,i,e),character:e,position:c(o,i,e),hide:t&&t.includes(e),onClick:a.set(e,!0)&&n})))))))};var zp=n(182),Gp=n.n(zp),Hp="Invariant Violation",Qp=Object.setPrototypeOf,Wp=void 0===Qp?function(e,t){return e.__proto__=t,e}:Qp,Kp=function(e){function t(n){void 0===n&&(n=Hp);var r=e.call(this,"number"==typeof n?Hp+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=Hp,Wp(r,t.prototype),r}return Na(t,e),t}(Error);function $p(e,t){if(!e)throw new Kp(t)}var Jp,Yp=["debug","log","warn","error","silent"],Xp=Yp.indexOf("log");function Zp(e){return function(){if(Yp.indexOf(e)>=Xp){var t=console[e]||console.log;return t.apply(console,arguments)}}}function eh(e){try{return e()}catch(e){}}(Jp=$p||($p={})).debug=Zp("debug"),Jp.log=Zp("log"),Jp.warn=Zp("warn"),Jp.error=Zp("error");const th=eh((function(){return globalThis}))||eh((function(){return window}))||eh((function(){return self}))||eh((function(){return global}))||eh((function(){return eh.constructor("return this")()}));var nh="__",rh=[nh,nh].join("DEV");const ih=function(){try{return Boolean(__DEV__)}catch(e){return Object.defineProperty(th,rh,{value:"production"!==eh((function(){return"production"})),enumerable:!1,configurable:!0,writable:!0}),th[rh]}}();function oh(e){try{return e()}catch(e){}}var ah=oh((function(){return globalThis}))||oh((function(){return window}))||oh((function(){return self}))||oh((function(){return n.g}))||oh((function(){return oh.constructor("return this")()})),sh=!1;function ch(e){return uh(e,[])}function uh(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(function(e){return"function"==typeof e.toJSON}(e)){const t=e.toJSON();if(t!==e)return"string"==typeof t?t:uh(t,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";const n=Math.min(10,e.length),r=e.length-n,i=[];for(let r=0;r<n;++r)i.push(uh(e[r],t));return 1===r?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}(e,n);return function(e,t){const n=Object.entries(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){const t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]";const r=n.map((([e,n])=>e+": "+uh(n,t)));return"{ "+r.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function lh(e,t){if(!Boolean(e))throw new Error(t)}!ah||oh((function(){return"production"}))||oh((function(){return process}))||(Object.defineProperty(ah,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),sh=!0);class fh{constructor(e,t="GraphQL request",n={line:1,column:1}){"string"==typeof e||lh(!1,`Body must be a string. Received: ${ch(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||lh(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||lh(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function dh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hh(e,t,n){return t&&ph(e.prototype,t),n&&ph(e,n),e}sh&&(delete ah.process,sh=!1),__DEV__?$p("boolean"==typeof ih,ih):$p("boolean"==typeof ih,36);var vh=function(){return"function"==typeof Symbol},mh=function(e){return vh()&&Boolean(Symbol[e])},gh=function(e){return mh(e)?Symbol[e]:"@@"+e};vh()&&!mh("observable")&&(Symbol.observable=Symbol("observable"));var yh=gh("iterator"),bh=gh("observable"),wh=gh("species");function Sh(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function kh(e){var t=e.constructor;return void 0!==t&&null===(t=t[wh])&&(t=void 0),void 0!==t?t:Nh}function Eh(e){return e instanceof Nh}function _h(e){_h.log?_h.log(e):setTimeout((function(){throw e}))}function Oh(e){Promise.resolve().then((function(){try{e()}catch(e){_h(e)}}))}function Th(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=Sh(t,"unsubscribe");n&&n.call(t)}}catch(e){_h(e)}}function xh(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Rh(e,t,n){e._state="running";var r=e._observer;try{var i=Sh(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(xh(e),!i)throw n;i.call(r,n);break;case"complete":xh(e),i&&i.call(r)}}catch(e){_h(e)}"closed"===e._state?Th(e):"running"===e._state&&(e._state="ready")}function Ah(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void Oh((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(Rh(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void Rh(e,t,n);e._queue.push({type:t,value:n})}}var Ch=function(){function e(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var n=new Ih(this);try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}return e.prototype.unsubscribe=function(){"closed"!==this._state&&(xh(this),Th(this))},hh(e,[{key:"closed",get:function(){return"closed"===this._state}}]),e}(),Ih=function(){function e(e){this._subscription=e}var t=e.prototype;return t.next=function(e){Ah(this._subscription,"next",e)},t.error=function(e){Ah(this._subscription,"error",e)},t.complete=function(){Ah(this._subscription,"complete")},hh(e,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),Nh=function(){function e(t){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var t=e.prototype;return t.subscribe=function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new Ch(e,this._subscriber)},t.forEach=function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))},t.map=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(kh(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.filter=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(kh(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.reduce=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=kh(this),r=arguments.length>1,i=!1,o=arguments[1],a=o;return new n((function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{a=e(a,t)}catch(e){return n.error(e)}else a=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(a),n.complete()}})}))},t.concat=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=kh(this);return new i((function(t){var r,o=0;return function e(a){r=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))},t.flatMap=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=kh(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),a()}});i.push(o)},error:function(e){r.error(e)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))},t[bh]=function(){return this},e.from=function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=Sh(t,bh);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return Eh(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(mh("iterator")&&(r=Sh(t,yh)))return new n((function(e){Oh((function(){if(!e.closed){for(var n,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.call(t));!(n=i()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){Oh((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")},e.of=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i((function(e){Oh((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))},hh(e,null,[{key:wh,get:function(){return this}}]),e}();function Mh(e){return null!==e&&"object"==typeof e}function Ph(e,t){var n=t,r=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw __DEV__?new Kp("Found a ".concat(e.operation," operation").concat(e.name?" named '".concat(e.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new Kp(41);"FragmentDefinition"===e.kind&&r.push(e)})),void 0===n&&(__DEV__?$p(1===r.length,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):$p(1===r.length,42),n=r[0].name.value),Ma(Ma({},e),{definitions:Fa([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)})}function Lh(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function Dh(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=t&&t[e.name.value];return __DEV__?$p(n,"No fragment named ".concat(e.name.value,".")):$p(n,43),n;default:return null}}function Vh(e){return{__ref:String(e)}}function Fh(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function jh(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var i={};n.fields.map((function(e){return jh(i,e.name,e.value,r)})),e[t.value]=i}else if(function(e){return"Variable"===e.kind}(n)){var o=(r||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return jh(n,t,e,r),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw __DEV__?new Kp('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new Kp(52);e[t.value]=null}}vh()&&Object.defineProperty(Nh,Symbol("extensions"),{value:{symbol:bh,hostReportError:_h},configurable:!0});var Uh=["connection","include","skip","client","rest","export"],Bh=Object.assign((function(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i={};return r.forEach((function(e){i[e]=t[e]})),"".concat(n.connection.key,"(").concat(qh(i),")")}return n.connection.key}var o=e;if(t){var a=qh(t);o+="(".concat(a,")")}return n&&Object.keys(n).forEach((function(e){-1===Uh.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?o+="@".concat(e,"(").concat(qh(n[e]),")"):o+="@".concat(e))})),o}),{setStringify:function(e){var t=qh;return qh=e,t}}),qh=function(e){return JSON.stringify(e,zh)};function zh(e,t){return Mh(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})),t}function Gh(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var r=e.name,i=e.value;return jh(n,r,i,t)})),n}return null}function Hh(e){return e.alias?e.alias.value:e.name.value}function Qh(e,t,n){if("string"==typeof e.__typename)return e.__typename;for(var r=0,i=t.selections;r<i.length;r++){var o=i[r];if(Wh(o)){if("__typename"===o.name.value)return e[Hh(o)]}else{var a=Qh(e,Dh(o,n).selectionSet,n);if("string"==typeof a)return a}}}function Wh(e){return"Field"===e.kind}function Kh(e){return"InlineFragment"===e.kind}function $h(e){__DEV__?$p(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):$p(e&&"Document"===e.kind,44);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw __DEV__?new Kp('Schema type definitions not allowed in queries. Found: "'.concat(e.kind,'"')):new Kp(45);return e}));return __DEV__?$p(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):$p(t.length<=1,46),e}function Jh(e){return $h(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function Yh(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function Xh(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function Zh(e){var t=Jh(e);return __DEV__?$p(t&&"query"===t.operation,"Must contain a query definition."):$p(t&&"query"===t.operation,47),t}function ev(e){var t;$h(e);for(var n=0,r=e.definitions;n<r.length;n++){var i=r[n];if("OperationDefinition"===i.kind){var o=i.operation;if("query"===o||"mutation"===o||"subscription"===o)return i}"FragmentDefinition"!==i.kind||t||(t=i)}if(t)return t;throw __DEV__?new Kp("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new Kp(51)}function tv(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&jh(t,e.variable.name,e.defaultValue)})),t}function nv(e,t){return t?t(e):Nh.of()}function rv(e){return"function"==typeof e?new av(e):e}function iv(e){return e.request.length<=1}var ov=function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}return Na(t,e),t}(Error),av=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return Nh.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(rv).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,r){var i=rv(n),o=rv(r||new e(nv));return iv(i)&&iv(o)?new e((function(e){return t(e)?i.request(e)||Nh.of():o.request(e)||Nh.of()})):new e((function(e,n){return t(e)?i.request(e,n)||Nh.of():o.request(e,n)||Nh.of()}))},e.execute=function(e,t){return e.request(function(e,t){var n=Ma({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n=Ma(Ma({},n),"function"==typeof e?e(n):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Ma({},n)}}),t}(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Yh(t.query)||void 0:""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t.indexOf(i)<0)throw __DEV__?new Kp("illegal argument: ".concat(i)):new Kp(24)}return e}(t))))||Nh.of()},e.concat=function(t,n){var r=rv(t);if(iv(r))return __DEV__&&$p.warn(new ov("You are calling concat on a terminating link, which will have no effect",r)),r;var i=rv(n);return iv(i)?new e((function(e){return r.request(e,(function(e){return i.request(e)||Nh.of()}))||Nh.of()})):new e((function(e,t){return r.request(e,(function(e){return i.request(e,t)||Nh.of()}))||Nh.of()}))},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(nv)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw __DEV__?new Kp("request is not implemented"):new Kp(19)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}(),sv=av.execute;function cv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)}))})),n}class uv{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class lv{constructor(e,t,n,r,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const fv={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},dv=new Set(Object.keys(fv));function pv(e){const t=null==e?void 0:e.kind;return"string"==typeof t&&dv.has(t)}let hv,vv;var mv;!function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(hv||(hv={})),(mv=vv||(vv={})).NAME="Name",mv.DOCUMENT="Document",mv.OPERATION_DEFINITION="OperationDefinition",mv.VARIABLE_DEFINITION="VariableDefinition",mv.SELECTION_SET="SelectionSet",mv.FIELD="Field",mv.ARGUMENT="Argument",mv.FRAGMENT_SPREAD="FragmentSpread",mv.INLINE_FRAGMENT="InlineFragment",mv.FRAGMENT_DEFINITION="FragmentDefinition",mv.VARIABLE="Variable",mv.INT="IntValue",mv.FLOAT="FloatValue",mv.STRING="StringValue",mv.BOOLEAN="BooleanValue",mv.NULL="NullValue",mv.ENUM="EnumValue",mv.LIST="ListValue",mv.OBJECT="ObjectValue",mv.OBJECT_FIELD="ObjectField",mv.DIRECTIVE="Directive",mv.NAMED_TYPE="NamedType",mv.LIST_TYPE="ListType",mv.NON_NULL_TYPE="NonNullType",mv.SCHEMA_DEFINITION="SchemaDefinition",mv.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",mv.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",mv.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",mv.FIELD_DEFINITION="FieldDefinition",mv.INPUT_VALUE_DEFINITION="InputValueDefinition",mv.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",mv.UNION_TYPE_DEFINITION="UnionTypeDefinition",mv.ENUM_TYPE_DEFINITION="EnumTypeDefinition",mv.ENUM_VALUE_DEFINITION="EnumValueDefinition",mv.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",mv.DIRECTIVE_DEFINITION="DirectiveDefinition",mv.SCHEMA_EXTENSION="SchemaExtension",mv.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",mv.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",mv.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",mv.UNION_TYPE_EXTENSION="UnionTypeExtension",mv.ENUM_TYPE_EXTENSION="EnumTypeExtension",mv.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension";const gv=Object.freeze({});function yv(e,t,n=fv){const r=new Map;for(const e of Object.values(vv))r.set(e,bv(t,e));let i,o,a,s,c=Array.isArray(e),u=[e],l=-1,f=[];const d=[],p=[];let h=e;do{l++;const e=l===u.length,y=e&&0!==f.length;if(e){if(a=0===p.length?void 0:d[d.length-1],o=s,s=p.pop(),y)if(c){o=o.slice();let e=0;for(const[t,n]of f){const r=t-e;null===n?(o.splice(r,1),e++):o[r]=n}}else{o=Object.defineProperties({},Object.getOwnPropertyDescriptors(o));for(const[e,t]of f)o[e]=t}l=i.index,u=i.keys,f=i.edits,c=i.inArray,i=i.prev}else{if(a=s?c?l:u[l]:void 0,o=s?s[a]:h,null==o)continue;s&&d.push(a)}let b;if(!Array.isArray(o)){var v,m;pv(o)||lh(!1,`Invalid AST Node: ${ch(o)}.`);const n=e?null===(v=r.get(o.kind))||void 0===v?void 0:v.leave:null===(m=r.get(o.kind))||void 0===m?void 0:m.enter;if(b=null==n?void 0:n.call(t,o,a,s,d,p),b===gv)break;if(!1===b){if(!e){d.pop();continue}}else if(void 0!==b&&(f.push([a,b]),!e)){if(!pv(b)){d.pop();continue}o=b}}var g;void 0===b&&y&&f.push([a,o]),e?d.pop():(i={inArray:c,index:l,keys:u,edits:f,prev:i},c=Array.isArray(o),u=c?o:null!==(g=n[o.kind])&&void 0!==g?g:[],l=-1,f=[],s&&p.push(s),s=o)}while(void 0!==i);return 0!==f.length&&(h=f[f.length-1][1]),h}function bv(e,t){const n=e[t];return"object"==typeof n?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}var wv=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var r=__DEV__?new Kp("Network request failed. ".concat(t," is not serializable: ").concat(e.message)):new Kp(21);throw r.parseError=e,r}return n},Sv=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r},kv=Object.prototype.hasOwnProperty;function Ev(e){return 9===e||32===e}function _v(e){return e>=48&&e<=57}function Ov(e){return e>=97&&e<=122||e>=65&&e<=90}function Tv(e){return Ov(e)||95===e}function xv(e){var t;let n=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let t=0;t<e.length;++t){var o;const a=e[t],s=Rv(a);s!==a.length&&(r=null!==(o=r)&&void 0!==o?o:t,i=t,0!==t&&s<n&&(n=s))}return e.map(((e,t)=>0===t?e:e.slice(n))).slice(null!==(t=r)&&void 0!==t?t:0,i+1)}function Rv(e){let t=0;for(;t<e.length&&Ev(e.charCodeAt(t));)++t;return t}const Av=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Cv(e){return Iv[e.charCodeAt(0)]}const Iv=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];function Nv(e){return yv(e,Mv)}const Mv={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>Pv(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=Dv("(",Pv(e.variableDefinitions,", "),")"),n=Pv([e.operation,Pv([e.name,t]),Pv(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r})=>e+": "+t+Dv(" = ",n)+Dv(" ",Pv(r," "))},SelectionSet:{leave:({selections:e})=>Lv(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:i}){const o=Dv("",e,": ")+t;let a=o+Dv("(",Pv(n,", "),")");return a.length>80&&(a=o+Dv("(\n",Vv(Pv(n,"\n")),"\n)")),Pv([a,Pv(r," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Dv(" ",Pv(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>Pv(["...",Dv("on ",e),Pv(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:i})=>`fragment ${e}${Dv("(",Pv(n,", "),")")} on ${t} ${Dv("",Pv(r," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t){const n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),i=1===r.length,o=r.length>1&&r.slice(1).every((e=>0===e.length||Ev(e.charCodeAt(0)))),a=n.endsWith('\\"""'),s=e.endsWith('"')&&!a,c=e.endsWith("\\"),u=s||c,l=!i||e.length>70||u||o||a;let f="";const d=i&&Ev(e.charCodeAt(0));return(l&&!d||o)&&(f+="\n"),f+=n,(l||u)&&(f+="\n"),'"""'+f+'"""'}(e):`"${e.replace(Av,Cv)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Pv(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+Pv(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Dv("(",Pv(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>Dv("",e,"\n")+Pv(["schema",Pv(t," "),Lv(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>Dv("",e,"\n")+Pv(["scalar",t,Pv(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Dv("",e,"\n")+Pv(["type",t,Dv("implements ",Pv(n," & ")),Pv(r," "),Lv(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:r,directives:i})=>Dv("",e,"\n")+t+(Fv(n)?Dv("(\n",Vv(Pv(n,"\n")),"\n)"):Dv("(",Pv(n,", "),")"))+": "+r+Dv(" ",Pv(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:r,directives:i})=>Dv("",e,"\n")+Pv([t+": "+n,Dv("= ",r),Pv(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Dv("",e,"\n")+Pv(["interface",t,Dv("implements ",Pv(n," & ")),Pv(r," "),Lv(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:r})=>Dv("",e,"\n")+Pv(["union",t,Pv(n," "),Dv("= ",Pv(r," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:r})=>Dv("",e,"\n")+Pv(["enum",t,Pv(n," "),Lv(r)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>Dv("",e,"\n")+Pv([t,Pv(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:r})=>Dv("",e,"\n")+Pv(["input",t,Pv(n," "),Lv(r)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:r,locations:i})=>Dv("",e,"\n")+"directive @"+t+(Fv(n)?Dv("(\n",Vv(Pv(n,"\n")),"\n)"):Dv("(",Pv(n,", "),")"))+(r?" repeatable":"")+" on "+Pv(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>Pv(["extend schema",Pv(e," "),Lv(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>Pv(["extend scalar",e,Pv(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>Pv(["extend type",e,Dv("implements ",Pv(t," & ")),Pv(n," "),Lv(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>Pv(["extend interface",e,Dv("implements ",Pv(t," & ")),Pv(n," "),Lv(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>Pv(["extend union",e,Pv(t," "),Dv("= ",Pv(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>Pv(["extend enum",e,Pv(t," "),Lv(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>Pv(["extend input",e,Pv(t," "),Lv(n)]," ")}};function Pv(e,t=""){var n;return null!==(n=null==e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function Lv(e){return Dv("{\n",Vv(Pv(e,"\n")),"\n}")}function Dv(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function Vv(e){return Dv("  ",e.replace(/\n/g,"\n  "))}function Fv(e){var t;return null!==(t=null==e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}var jv={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},Uv=function(e,t){return t(e)};function Bv(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={},o={};n.forEach((function(e){i=Ma(Ma(Ma({},i),e.options),{headers:Ma(Ma({},i.headers),qv(e.headers))}),e.credentials&&(i.credentials=e.credentials),o=Ma(Ma({},o),e.http)}));var a=e.operationName,s=e.extensions,c=e.variables,u=e.query,l={operationName:a,variables:c};return o.includeExtensions&&(l.extensions=s),o.includeQuery&&(l.query=t(u,Nv)),{options:i,body:l}}function qv(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach((function(n){t[n.toLowerCase()]=e[n]})),t}return e}function zv(e){return new Nh((function(t){t.error(e)}))}var Gv=eh((function(){return fetch})),Hv=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,r=e.fetch,i=e.print,o=void 0===i?Uv:i,a=e.includeExtensions,s=e.useGETForQueries,c=e.includeUnusedVariables,u=void 0!==c&&c,l=Pa(e,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);__DEV__&&function(e){if(!e&&"undefined"==typeof fetch)throw __DEV__?new Kp("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new Kp(20)}(r||Gv);var f={http:{includeExtensions:a},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new av((function(e){var t=function(e,t){return e.getContext().uri||("function"==typeof t?t(e):t||"/graphql")}(e,n),i=e.getContext(),a={};if(i.clientAwareness){var c=i.clientAwareness,l=c.name,d=c.version;l&&(a["apollographql-client-name"]=l),d&&(a["apollographql-client-version"]=d)}var p,h=Ma(Ma({},a),i.headers),v={http:i.http,options:i.fetchOptions,credentials:i.credentials,headers:h},m=Bv(e,o,jv,f,v),g=m.options,y=m.body;if(y.variables&&!u){var b=new Set(Object.keys(y.variables));yv(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&b.delete(e.name.value)}}),b.size&&(y.variables=Ma({},y.variables),b.forEach((function(e){delete y.variables[e]})))}if(!g.signal){var w=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),S=w.controller,k=w.signal;(p=S)&&(g.signal=k)}if(s&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(g.method="GET"),"GET"===g.method){var E=function(e,t){var n=[],r=function(e,t){n.push("".concat(e,"=").concat(encodeURIComponent(t)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var i=void 0;try{i=wv(t.variables,"Variables map")}catch(e){return{parseError:e}}r("variables",i)}if(t.extensions){var o=void 0;try{o=wv(t.extensions,"Extensions map")}catch(e){return{parseError:e}}r("extensions",o)}var a="",s=e,c=e.indexOf("#");-1!==c&&(a=e.substr(c),s=e.substr(0,c));var u=-1===s.indexOf("?")?"?":"&";return{newURI:s+u+n.join("&")+a}}(t,y),_=E.newURI,O=E.parseError;if(O)return zv(O);t=_}else try{g.body=wv(y,"Payload")}catch(O){return zv(O)}return new Nh((function(n){var i;return(r||eh((function(){return fetch}))||Gv)(t,g).then((function(t){return e.setContext({response:t}),t})).then((i=e,function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(r){var n=r;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}})).then((function(t){return e.status>=300&&Sv(e,t,"Response not successful: Received status code ".concat(e.status)),Array.isArray(t)||kv.call(t,"data")||kv.call(t,"errors")||Sv(e,t,"Server response was missing for query '".concat(Array.isArray(i)?i.map((function(e){return e.operationName})):i.operationName,"'.")),t}))})).then((function(e){return n.next(e),n.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))})),function(){p&&p.abort()}}))}))}(t).request)||this;return n.options=t,n}return Na(t,e),t}(av),Qv=Object.prototype,Wv=Qv.toString,Kv=Qv.hasOwnProperty,$v=Function.prototype.toString,Jv=new Map;function Yv(e,t){try{return Xv(e,t)}finally{Jv.clear()}}function Xv(e,t){if(e===t)return!0;var n,r,i,o=Wv.call(e);if(o!==Wv.call(t))return!1;switch(o){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(nm(e,t))return!0;var a=Zv(e),s=Zv(t),c=a.length;if(c!==s.length)return!1;for(var u=0;u<c;++u)if(!Kv.call(t,a[u]))return!1;for(u=0;u<c;++u){var l=a[u];if(!Xv(e[l],t[l]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(nm(e,t))return!0;for(var f=e.entries(),d="[object Map]"===o;;){var p=f.next();if(p.done)break;var h=p.value,v=h[0],m=h[1];if(!t.has(v))return!1;if(d&&!Xv(m,t.get(v)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":var g=e.byteLength;if(g===t.byteLength)for(;g--&&e[g]===t[g];);return-1===g;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var y=$v.call(e);return y===$v.call(t)&&(r=tm,!((i=(n=y).length-r.length)>=0&&n.indexOf(r,i)===i))}return!1}function Zv(e){return Object.keys(e).filter(em,e)}function em(e){return void 0!==this[e]}var tm="{ [native code] }";function nm(e,t){var n=Jv.get(e);if(n){if(n.has(t))return!0}else Jv.set(e,n=new Set);return n.add(t),!1}var rm,im,om=function(){return Object.create(null)},am=Array.prototype,sm=am.forEach,cm=am.slice,um=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=om),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return sm.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(cm.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}(),lm="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),fm="function"==typeof WeakSet,dm="function"==typeof Symbol&&"function"==typeof Symbol.for,pm=function(){function e(){this.known=new(fm?WeakSet:Set),this.pool=new um(lm),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(e){return Mh(e)&&this.known.has(e)},e.prototype.pass=function(e){if(Mh(e)){var t=function(e){return Mh(e)?Array.isArray(e)?e.slice(0):Ma({__proto__:Object.getPrototypeOf(e)},e):e}(e);return this.passes.set(t,e),t}return e},e.prototype.admit=function(e){var t=this;if(Mh(e)){var n=this.passes.get(e);if(n)return n;switch(Object.getPrototypeOf(e)){case Array.prototype:if(this.known.has(e))return e;var r=e.map(this.admit,this);return(s=this.pool.lookupArray(r)).array||(this.known.add(s.array=r),__DEV__&&Object.freeze(r)),s.array;case null:case Object.prototype:if(this.known.has(e))return e;var i=Object.getPrototypeOf(e),o=[i],a=this.sortedKeys(e);o.push(a.json);var s,c=o.length;if(a.sorted.forEach((function(n){o.push(t.admit(e[n]))})),!(s=this.pool.lookupArray(o)).object){var u=s.object=Object.create(i);this.known.add(u),a.sorted.forEach((function(e,t){u[e]=o[c+t]})),__DEV__&&Object.freeze(u)}return s.object}}return e},e.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var r=JSON.stringify(t);(n.keys=this.keysByJSON.get(r))||this.keysByJSON.set(r,n.keys={sorted:t,json:r})}return n.keys},e}(),hm=Object.assign((function(e){if(Mh(e)){void 0===rm&&vm();var t=rm.admit(e),n=im.get(t);return void 0===n&&im.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)}),{reset:vm});function vm(){rm=new pm,im=new(lm?WeakMap:Map)}function mm(e,t,n){return new Nh((function(r){var i=r.next,o=r.error,a=r.complete,s=0,c=!1,u={then:function(e){return new Promise((function(t){return t(e())}))}};function l(e,t){return e?function(t){++s;var n=function(){return e(t)};u=u.then(n,n).then((function(e){--s,i&&i.call(r,e),c&&f.complete()}),(function(e){throw--s,e})).catch((function(e){o&&o.call(r,e)}))}:function(e){return t&&t.call(r,e)}}var f={next:l(t,i),error:l(n,o),complete:function(){c=!0,s||a&&a.call(r)}},d=e.subscribe(f);return function(){return d.unsubscribe()}}))}function gm(e){return e.errors&&e.errors.length>0||!1}function ym(e,t,n){var r=0;return e.forEach((function(n,i){t.call(this,n,i,e)&&(e[r++]=n)}),n),e.length=r,e}var bm={kind:"Field",name:{kind:"Name",value:"__typename"}};function wm(e,t){return e.selectionSet.selections.every((function(e){return"FragmentSpread"===e.kind&&wm(t[e.name.value],t)}))}function Sm(e){return wm(Jh(e)||function(e){__DEV__?$p("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):$p("Document"===e.kind,48),__DEV__?$p(e.definitions.length<=1,"Fragment must have exactly one definition."):$p(e.definitions.length<=1,49);var t=e.definitions[0];return __DEV__?$p("FragmentDefinition"===t.kind,"Must be a fragment definition."):$p("FragmentDefinition"===t.kind,50),t}(e),Lh(Xh(e)))?null:e}function km(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function Em(e,t){var n=Object.create(null),r=[],i=Object.create(null),o=[],a=Sm(yv(t,{Variable:{enter:function(e,t,r){"VariableDefinition"!==r.kind&&(n[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&e.some((function(e){return e.remove}))&&t.directives&&t.directives.some(km(e)))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&r.push({name:e.value.name.value})})),t.selectionSet&&Tm(t.selectionSet).forEach((function(e){o.push({name:e.name.value})})),null}},FragmentSpread:{enter:function(e){i[e.name.value]=!0}},Directive:{enter:function(t){if(km(e)(t))return null}}}));return a&&ym(r,(function(e){return!!e.name&&!n[e.name]})).length&&(a=function(e,t){var n=function(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}(e);return Sm(yv(t,{OperationDefinition:{enter:function(t){return Ma(Ma({},t),{variableDefinitions:t.variableDefinitions?t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))})):[]})}},Field:{enter:function(t){if(e.some((function(e){return e.remove}))){var r=0;if(t.arguments&&t.arguments.forEach((function(e){n(e)&&(r+=1)})),1===r)return null}}},Argument:{enter:function(e){if(n(e))return null}}}))}(r,a)),a&&ym(o,(function(e){return!!e.name&&!i[e.name]})).length&&(a=function(e,t){function n(t){if(e.some((function(e){return e.name===t.name.value})))return null}return Sm(yv(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}(o,a)),a}var _m=Object.assign((function(e){return yv($h(e),{SelectionSet:{enter:function(e,t,n){if(!n||"OperationDefinition"!==n.kind){var r=e.selections;if(r&&!r.some((function(e){return Wh(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var i=n;if(!(Wh(i)&&i.directives&&i.directives.some((function(e){return"export"===e.name.value}))))return Ma(Ma({},e),{selections:Fa(Fa([],r,!0),[bm],!1)})}}}}})}),{added:function(e){return e===bm}}),Om={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some((function(e){return"key"===e.name.value}))||__DEV__&&$p.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function Tm(e){var t=[];return e.selections.forEach((function(e){(Wh(e)||Kh(e))&&e.selectionSet?Tm(e.selectionSet).forEach((function(e){return t.push(e)})):"FragmentSpread"===e.kind&&t.push(e)})),t}function xm(e){return"query"===ev(e).operation?e:yv(e,{OperationDefinition:{enter:function(e){return Ma(Ma({},e),{operation:"query"})}}})}function Rm(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];return e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var n=e.arguments,r=e.name.value;__DEV__?$p(n&&1===n.length,"Incorrect number of arguments for the @".concat(r," directive.")):$p(n&&1===n.length,38);var i=n[0];__DEV__?$p(i.name&&"if"===i.name.value,"Invalid argument for the @".concat(r," directive.")):$p(i.name&&"if"===i.name.value,39);var o=i.value;__DEV__?$p(o&&("Variable"===o.kind||"BooleanValue"===o.kind),"Argument for the @".concat(r," directive must be a variable or a boolean value.")):$p(o&&("Variable"===o.kind||"BooleanValue"===o.kind),40),t.push({directive:e,ifArgument:i})}})),t}(n).every((function(e){var n=e.directive,r=e.ifArgument,i=!1;return"Variable"===r.value.kind?(i=t&&t[r.value.name.value],__DEV__?$p(void 0!==i,"Invalid variable referenced in @".concat(n.name.value," directive.")):$p(void 0!==i,37)):i=r.value.value,"skip"===n.name.value?!i:i}))}function Am(e,t){return function(e){var t=[];return yv(e,{Directive:function(e){t.push(e.name.value)}}),t}(t).some((function(t){return e.indexOf(t)>-1}))}function Cm(e){return e&&Am(["client"],e)&&Am(["export"],e)}var Im=new Map;function Nm(e){var t=Im.get(e)||1;return Im.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function Mm(e,t,n){var r=[];e.forEach((function(e){return e[t]&&r.push(e)})),r.forEach((function(e){return e[t](n)}))}function Pm(e){function t(t){Object.defineProperty(e,t,{value:Nh})}return dm&&Symbol.species&&t(Symbol.species),t("@@species"),e}function Lm(e){return e&&"function"==typeof e.then}var Dm=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.addCount=0,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],Mm(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),Mm(n.observers,"error",e))},complete:function(){if(null!==n.sub){var e=n.sources.shift();e?Lm(e)?e.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=e.subscribe(n.handlers):(n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),Mm(n.observers,"complete"))}}},n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"==typeof t&&(t=[new Nh(t)]),Lm(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return Na(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e),++this.addCount)},t.prototype.removeObserver=function(e,t){this.observers.delete(e)&&--this.addCount<1&&!t&&this.handlers.error(new Error("Observable cancelled prematurely"))},t.prototype.cleanup=function(e){var t=this,n=!1,r=function(){n||(n=!0,t.observers.delete(i),e())},i={next:r,error:r,complete:r},o=this.addCount;this.addObserver(i),this.addCount=o},t}(Nh);function Vm(e){return Array.isArray(e)&&e.length>0}Pm(Dm);var Fm,jm=function(e){function t(n){var r,i,o=n.graphQLErrors,a=n.clientErrors,s=n.networkError,c=n.errorMessage,u=n.extraInfo,l=e.call(this,c)||this;return l.graphQLErrors=o||[],l.clientErrors=a||[],l.networkError=s||null,l.message=c||(i="",(Vm((r=l).graphQLErrors)||Vm(r.clientErrors))&&(r.graphQLErrors||[]).concat(r.clientErrors||[]).forEach((function(e){var t=e?e.message:"Error message not found.";i+="".concat(t,"\n")})),r.networkError&&(i+="".concat(r.networkError.message,"\n")),i=i.replace(/\n$/,"")),l.extraInfo=u,l.__proto__=t.prototype,l}return Na(t,e),t}(Error);function Um(e){return!!e&&e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(Fm||(Fm={}));var Bm=Object.prototype.toString;function qm(e){return zm(e)}function zm(e,t){switch(Bm.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,r){n[r]=zm(e,t)})),n;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach((function(n){r[n]=zm(e[n],t)})),r;default:return e}}var Gm=Object.assign,Hm=Object.hasOwnProperty,Qm=!1,Wm=function(e){function t(t){var n=t.queryManager,r=t.queryInfo,i=t.options,o=e.call(this,(function(e){try{var t=e._subscription._observer;t&&!t.error&&(t.error=Km)}catch(e){}var n=!o.observers.size;o.observers.add(e);var r=o.last;return r&&r.error?e.error&&e.error(r.error):r&&r.result&&e.next&&e.next(r.result),n&&o.reobserve().catch((function(){})),function(){o.observers.delete(e)&&!o.observers.size&&o.tearDownQuery()}}))||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=i,o.queryId=r.queryId||n.generateQueryId();var a=Jh(i.query);return o.queryName=a&&a.name&&a.name.value,o.initialFetchPolicy=i.fetchPolicy||"cache-first",o.queryManager=n,o.queryInfo=r,o}return Na(t,e),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var r={next:function(n){t(n),e.observers.delete(r),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:n},i=e.subscribe(r)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.getLastResult(!0),n=this.queryInfo.networkStatus||t&&t.networkStatus||Fm.ready,r=Ma(Ma({},t),{loading:Um(n),networkStatus:n}),i=this.options.fetchPolicy,o=void 0===i?"cache-first":i;if("network-only"===o||"no-cache"===o||"standby"===o||this.queryManager.transform(this.options.query).hasForcedResolvers);else{var a=this.queryInfo.getDiff();(a.complete||this.options.returnPartialData)&&(r.data=a.result),Yv(r.data,{})&&(r.data=void 0),a.complete?(delete r.partial,!a.complete||r.networkStatus!==Fm.loading||"cache-first"!==o&&"cache-only"!==o||(r.networkStatus=Fm.ready,r.loading=!1)):r.partial=!0,!__DEV__||a.complete||this.options.partialRefetch||r.loading||r.data||r.error||$m(a.missing)}return e&&this.updateLastResult(r),r},t.prototype.isDifferentFromLastResult=function(e){return!this.last||!Yv(this.last.result,e)},t.prototype.getLast=function(e,t){var n=this.last;if(n&&n[e]&&(!t||Yv(n.variables,this.variables)))return n[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t,n={pollInterval:0},r=this.options.fetchPolicy;if(n.fetchPolicy="standby"===r||"cache-and-network"===r?r:"no-cache"===r?"no-cache":"network-only",__DEV__&&e&&Hm.call(e,"variables")){var i=Zh(this.options.query),o=i.variableDefinitions;o&&o.some((function(e){return"variables"===e.variable.name.value}))||__DEV__&&$p.warn("Called refetch(".concat(JSON.stringify(e),") for query ").concat((null===(t=i.name)||void 0===t?void 0:t.value)||JSON.stringify(i),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}return e&&!Yv(this.options.variables,e)&&(n.variables=this.options.variables=Ma(Ma({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(n,Fm.refetch)},t.prototype.fetchMore=function(e){var t=this,n=Ma(Ma({},e.query?e:Ma(Ma(Ma({},this.options),e),{variables:Ma(Ma({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),r=this.queryManager.generateQueryId();return n.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=Fm.fetchMore,this.observe()),this.queryManager.fetchQuery(r,n,Fm.fetchMore).then((function(r){var i=r.data,o=e.updateQuery;return o?(__DEV__&&!Qm&&(__DEV__&&$p.warn("The updateQuery callback for fetchMore is deprecated, and will be removed\nin the next major version of Apollo Client.\n\nPlease convert updateQuery functions to field policies with appropriate\nread and merge functions, or use/adapt a helper function (such as\nconcatPagination, offsetLimitPagination, or relayStylePagination) from\n@apollo/client/utilities.\n\nThe field policy system handles pagination more effectively than a\nhand-written updateQuery function, and you only need to define the policy\nonce, rather than every time you call fetchMore."),Qm=!0),t.updateQuery((function(e){return o(e,{fetchMoreResult:i,variables:n.variables})}))):t.queryManager.cache.writeQuery({query:n.query,variables:n.variables,data:i}),r})).finally((function(){t.queryManager.stopQuery(r),t.reobserve()}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var r=e.updateQuery;r&&t.updateQuery((function(e,t){var i=t.variables;return r(e,{subscriptionData:n,variables:i})}))},error:function(t){e.onError?e.onError(t):__DEV__&&$p.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){return Yv(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.initialFetchPolicy,variables:e},Fm.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,n=e(t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});n&&(t.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),t.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.fetch=function(e,t){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,e,t)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var t=this.pollingInfo,n=this.options.pollInterval;if(n){if(!t||t.interval!==n){__DEV__?$p(n,"Attempted to start a polling query without a polling interval."):$p(n,10),(t||(this.pollingInfo={})).interval=n;var r=function(){e.pollingInfo&&(Um(e.queryInfo.networkStatus)?i():e.reobserve({fetchPolicy:"network-only"},Fm.poll).then(i,i))},i=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(r,t.interval))};i()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)}},t.prototype.updateLastResult=function(e,t){return void 0===t&&(t=this.variables),this.last=Ma(Ma({},this.last),{result:this.queryManager.assumeImmutableResults?e:qm(e),variables:t}),Vm(e.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(e,t){var n=this;this.isTornDown=!1;var r=t===Fm.refetch||t===Fm.fetchMore||t===Fm.poll,i=this.options.variables,o=r?cv(this.options,e):Gm(this.options,cv(e));r||(this.updatePolling(),e&&e.variables&&!e.fetchPolicy&&!Yv(e.variables,i)&&(o.fetchPolicy=this.initialFetchPolicy,void 0===t&&(t=Fm.setVariables)));var a=o.variables&&Ma({},o.variables),s=this.fetch(o,t),c={next:function(e){n.reportResult(e,a)},error:function(e){n.reportError(e,a)}};return r||(this.concast&&this.observer&&this.concast.removeObserver(this.observer,!0),this.concast=s,this.observer=c),s.addObserver(c),s.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,t){(this.getLastError()||this.isDifferentFromLastResult(e))&&(this.updateLastResult(e,t),Mm(this.observers,"next",e))},t.prototype.reportError=function(e,t){var n=Ma(Ma({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:Fm.error,loading:!1});this.updateLastResult(n,t),Mm(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Nh);function Km(e){__DEV__&&$p.error("Unhandled error",e.message,e.stack)}function $m(e){__DEV__&&e&&__DEV__&&$p.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}Pm(Wm);var Jm=Object.prototype.hasOwnProperty;function Ym(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Xm(e)}function Xm(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new eg,i=1;i<n;++i)t=r.merge(t,e[i]);return t}var Zm=function(e,t,n){return this.merge(e[n],t[n])},eg=function(){function e(e){void 0===e&&(e=Zm),this.reconciler=e,this.isObject=Mh,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return Mh(t)&&Mh(e)?(Object.keys(t).forEach((function(i){if(Jm.call(e,i)){var o=e[i];if(t[i]!==o){var a=n.reconciler.apply(n,Fa([e,t,i],r,!1));a!==o&&((e=n.shallowCopyForMerge(e))[i]=a)}}else(e=n.shallowCopyForMerge(e))[i]=t[i]})),e):t},e.prototype.shallowCopyForMerge=function(e){if(Mh(e)){if(this.pastCopies.has(e)){if(!Object.isFrozen(e))return e;this.pastCopies.delete(e)}e=Array.isArray(e)?e.slice(0):Ma({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)}return e},e}(),tg=null,ng={},rg=1,ig="@wry/context:Slot",og=Array,ag=og[ig]||function(){var e=function(){function e(){this.id=["slot",rg++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=tg;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===ng)break;return e!==tg&&(tg.slots[this.id]=t),!0}return tg&&(tg.slots[this.id]=ng),!1},e.prototype.getValue=function(){if(this.hasValue())return tg.slots[this.id]},e.prototype.withValue=function(e,t,n,r){var i,o=((i={__proto__:null})[this.id]=e,i),a=tg;tg={parent:a,slots:o};try{return t.apply(r,n)}finally{tg=a}},e.bind=function(e){var t=tg;return function(){var n=tg;try{return tg=t,e.apply(this,arguments)}finally{tg=n}}},e.noContext=function(e,t,n){if(!tg)return e.apply(n,t);var r=tg;try{return tg=null,e.apply(n,t)}finally{tg=r}},e}();try{Object.defineProperty(og,ig,{value:og[ig]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();function sg(){}ag.bind,ag.noContext;var cg,ug=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=sg),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,r=t.newer;r&&(r.older=n),n&&(n.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t},e.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),lg=new ag,fg=Object.prototype.hasOwnProperty,dg=void 0===(cg=Array.from)?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:cg;function pg(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var hg=[];function vg(e,t){if(!e)throw new Error(t||"assertion failure")}function mg(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var gg=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!wg(this))return yg(this),this.value[0]},e.prototype.recompute=function(e){return vg(!this.recomputing,"already recomputing"),yg(this),wg(this)?function(e,t){return xg(e),lg.withValue(e,bg,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{pg(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){e.dirty=!1,wg(e)||kg(e)}(e),mg(e.value)}(this,e):mg(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Sg(this),pg(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),xg(this),Eg(this,(function(t,n){t.setDirty(),Rg(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=hg.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(dg(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),hg.push(this.deps),this.deps=null)},e.count=0,e}();function yg(e){var t=lg.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),wg(e)?_g(t,e):Og(t,e),t}function bg(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(t){e.value[1]=t}e.recomputing=!1}function wg(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function Sg(e){Eg(e,_g)}function kg(e){Eg(e,Og)}function Eg(e,t){var n=e.parents.size;if(n)for(var r=dg(e.parents),i=0;i<n;++i)t(r[i],e)}function _g(e,t){vg(e.childValues.has(t)),vg(wg(t));var n=!wg(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=hg.pop()||new Set;e.dirtyChildren.add(t),n&&Sg(e)}function Og(e,t){vg(e.childValues.has(t)),vg(!wg(t));var n=e.childValues.get(t);0===n.length?e.childValues.set(t,t.value.slice(0)):function(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}(n,t.value)||e.setDirty(),Tg(e,t),wg(e)||kg(e)}function Tg(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(hg.length<100&&hg.push(n),e.dirtyChildren=null))}function xg(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){Rg(e,n)})),e.forgetDeps(),vg(null===e.dirtyChildren)}function Rg(e,t){t.parents.delete(e),e.childValues.delete(t),Tg(e,t)}var Ag={setDirty:!0,dispose:!0,forget:!0};function Cg(e){var t=new Map,n=e&&e.subscribe;function r(e){var r=lg.getValue();if(r){var i=t.get(e);i||t.set(e,i=new Set),r.dependOn(i),"function"==typeof n&&(pg(i),i.unsubscribe=n(e))}}return r.dirty=function(e,n){var r=t.get(e);if(r){var i=n&&fg.call(Ag,n)?n:"setDirty";dg(r).forEach((function(e){return e[i]()})),t.delete(e),pg(r)}},r}function Ig(){var e=new um("function"==typeof WeakMap);return function(){return e.lookupArray(arguments)}}Ig();var Ng=new Set;function Mg(e,t){void 0===t&&(t=Object.create(null));var n=new ug(t.max||Math.pow(2,16),(function(e){return e.dispose()})),r=t.keyArgs,i=t.makeCacheKey||Ig(),o=function(){var o=i.apply(null,r?r.apply(null,arguments):arguments);if(void 0===o)return e.apply(null,arguments);var a=n.get(o);a||(n.set(o,a=new gg(e)),a.subscribe=t.subscribe,a.forget=function(){return n.delete(o)});var s=a.recompute(Array.prototype.slice.call(arguments));return n.set(o,a),Ng.add(n),lg.hasValue()||(Ng.forEach((function(e){return e.clean()})),Ng.clear()),s};function a(e){var t=n.get(e);t&&t.setDirty()}function s(e){var t=n.get(e);if(t)return t.peek()}function c(e){return n.delete(e)}return Object.defineProperty(o,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1}),o.dirtyKey=a,o.dirty=function(){a(i.apply(null,arguments))},o.peekKey=s,o.peek=function(){return s(i.apply(null,arguments))},o.forgetKey=c,o.forget=function(){return c(i.apply(null,arguments))},o.makeCacheKey=i,o.getKey=r?function(){return i.apply(null,r.apply(null,arguments))}:i,Object.freeze(o)}var Pg=new ag,Lg=new WeakMap;function Dg(e){var t=Lg.get(e);return t||Lg.set(e,t={vars:new Set,dep:Cg()}),t}function Vg(e){Dg(e).vars.forEach((function(t){return t.forgetCache(e)}))}function Fg(e){var t=new Set,n=new Set,r=function(o){if(arguments.length>0){if(e!==o){e=o,t.forEach((function(e){Dg(e).dep.dirty(r),jg(e)}));var a=Array.from(n);n.clear(),a.forEach((function(t){return t(e)}))}}else{var s=Pg.getValue();s&&(i(s),Dg(s).dep(r))}return e};r.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var i=r.attachCache=function(e){return t.add(e),Dg(e).vars.add(r),r};return r.forgetCache=function(e){return t.delete(e)},r}function jg(e){e.broadcastWatches&&e.broadcastWatches()}var Ug=function(){function e(e){var t=e.cache,n=e.client,r=e.resolvers,i=e.fragmentMatcher;this.cache=t,n&&(this.client=n),r&&this.addResolvers(r),i&&this.setFragmentMatcher(i)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=Ym(t.resolvers,e)})):this.resolvers=Ym(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,r=e.context,i=e.variables,o=e.onlyRunForcedResolvers,a=void 0!==o&&o;return La(this,void 0,void 0,(function(){return Da(this,(function(e){return t?[2,this.resolveDocument(t,n.data,r,i,this.fragmentMatcher,a).then((function(e){return Ma(Ma({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return Am(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return function(e){$h(e);var t=Em([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=yv(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every((function(e){return Wh(e)&&"__typename"===e.name.value})))return null}}})),t}(e)},e.prototype.prepareContext=function(e){var t=this.cache;return Ma(Ma({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),La(this,void 0,void 0,(function(){return Da(this,(function(r){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return Ma(Ma({},t),e.exportedVariables)}))]:[2,Ma({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return yv(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return gv}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:xm(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,r,i,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i=function(){return!0}),void 0===o&&(o=!1),La(this,void 0,void 0,(function(){var a,s,c,u,l,f,d,p,h;return Da(this,(function(v){return a=ev(e),s=Xh(e),c=Lh(s),u=a.operation,l=u?u.charAt(0).toUpperCase()+u.slice(1):"Query",d=(f=this).cache,p=f.client,h={fragmentMap:c,context:Ma(Ma({},n),{cache:d,client:p}),variables:r,fragmentMatcher:i,defaultOperationType:l,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(a.selectionSet,t,h).then((function(e){return{result:e,exportedVariables:h.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n){return La(this,void 0,void 0,(function(){var r,i,o,a,s,c=this;return Da(this,(function(u){return r=n.fragmentMap,i=n.context,o=n.variables,a=[t],s=function(e){return La(c,void 0,void 0,(function(){var s,c;return Da(this,(function(u){return Rm(e,o)?Wh(e)?[2,this.resolveField(e,t,n).then((function(t){var n;void 0!==t&&a.push(((n={})[Hh(e)]=t,n))}))]:(Kh(e)?s=e:(s=r[e.name.value],__DEV__?$p(s,"No fragment named ".concat(e.name.value)):$p(s,9)),s&&s.typeCondition&&(c=s.typeCondition.name.value,n.fragmentMatcher(t,c,i))?[2,this.resolveSelectionSet(s.selectionSet,t,n).then((function(e){a.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(s)).then((function(){return Xm(a)}))]}))}))},e.prototype.resolveField=function(e,t,n){return La(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,l,f,d=this;return Da(this,(function(p){return r=n.variables,i=e.name.value,o=Hh(e),a=i!==o,s=t[o]||t[i],c=Promise.resolve(s),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(u=t.__typename||n.defaultOperationType,(l=this.resolvers&&this.resolvers[u])&&(f=l[a?i:o])&&(c=Promise.resolve(Pg.withValue(this.cache,f,[t,Gh(e,r),n.context,{field:e,fragmentMap:n.fragmentMap}])))),[2,c.then((function(t){return void 0===t&&(t=s),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(n.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?d.resolveSubSelectedArray(e,t,n):e.selectionSet?d.resolveSelectionSet(e.selectionSet,t,n):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n){var r=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?r.resolveSubSelectedArray(e,t,n):e.selectionSet?r.resolveSelectionSet(e.selectionSet,t,n):void 0})))},e}(),Bg=new(lm?WeakMap:Map);function qg(e,t){var n=e[t];"function"==typeof n&&(e[t]=function(){return Bg.set(e,(Bg.get(e)+1)%1e15),n.apply(this,arguments)})}function zg(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var Gg=function(){function e(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;Bg.has(n)||(Bg.set(n,0),qg(n,"evict"),qg(n,"modify"),qg(n,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||Fm.loading;return this.variables&&this.networkStatus!==Fm.loading&&!Yv(this.variables,e.variables)&&(t=Fm.setVariables),Yv(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){zg(this),this.lastDiff=void 0,this.dirty=!1},e.prototype.getDiff=function(e){void 0===e&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&Yv(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var n=this.observableQuery;if(n&&"no-cache"===n.options.fetchPolicy)return{complete:!1};var r=this.cache.diff(t);return this.updateLastDiff(r,t),r},e.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},e.prototype.setDiff=function(e){var t=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),this.dirty||Yv(n&&n.result,e&&e.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},e.prototype.notify=function(){var e=this;zg(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Um(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;if(!n||"no-cache"!==n.options.fetchPolicy){var r=Ma(Ma({},this.getDiffOptions(e)),{watcher:this,callback:function(e){return t.setDiff(e)}});this.lastWatch&&Yv(r,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=r))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===Bg.get(this.cache)&&Yv(t,n.variables)&&Yv(e.data,n.result.data))},e.prototype.markResult=function(e,t,n){var r=this;this.graphQLErrors=Vm(e.errors)?e.errors:[],this.reset(),"no-cache"===t.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(t.variables)):0!==n&&(Hg(e,t.errorPolicy)?this.cache.performTransaction((function(i){if(r.shouldWrite(e,t.variables))i.writeQuery({query:r.document,data:e.data,variables:t.variables,overwrite:1===n}),r.lastWrite={result:e,variables:t.variables,dmCount:Bg.get(r.cache)};else if(r.lastDiff&&r.lastDiff.diff.complete)return void(e.data=r.lastDiff.diff.result);var o=r.getDiffOptions(t.variables),a=i.diff(o);r.stopped||r.updateWatch(t.variables),r.updateLastDiff(a,o),a.complete&&(e.data=a.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Fm.ready},e.prototype.markError=function(e){return this.networkStatus=Fm.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function Hg(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,r=!gm(e);return!r&&n&&e.data&&(r=!0),r}var Qg=Object.prototype.hasOwnProperty,Wg=function(){function e(e){var t=e.cache,n=e.link,r=e.queryDeduplication,i=void 0!==r&&r,o=e.onBroadcast,a=e.ssrMode,s=void 0!==a&&a,c=e.clientAwareness,u=void 0===c?{}:c,l=e.localState,f=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(lm?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.queryDeduplication=i,this.clientAwareness=u,this.localState=l||new Ug({cache:t}),this.ssrMode=s,this.assumeImmutableResults=!!f,(this.onBroadcast=o)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(__DEV__?new Kp("QueryManager stopped while query was in flight"):new Kp(11))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t=e.mutation,n=e.variables,r=e.optimisticResponse,i=e.updateQueries,o=e.refetchQueries,a=void 0===o?[]:o,s=e.awaitRefetchQueries,c=void 0!==s&&s,u=e.update,l=e.onQueryUpdated,f=e.errorPolicy,d=void 0===f?"none":f,p=e.fetchPolicy,h=void 0===p?"network-only":p,v=e.keepRootFields,m=e.context;return La(this,void 0,void 0,(function(){var e,o,s;return Da(this,(function(f){switch(f.label){case 0:return __DEV__?$p(t,"mutation option is required. You must specify your GraphQL document in the mutation option."):$p(t,12),__DEV__?$p("network-only"===h||"no-cache"===h,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):$p("network-only"===h||"no-cache"===h,13),e=this.generateMutationId(),t=this.transform(t).document,n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,m)]:[3,2];case 1:n=f.sent(),f.label=2;case 2:return o=this.mutationStore&&(this.mutationStore[e]={mutation:t,variables:n,loading:!0,error:null}),r&&this.markMutationOptimistic(r,{mutationId:e,document:t,variables:n,fetchPolicy:h,errorPolicy:d,context:m,updateQueries:i,update:u,keepRootFields:v}),this.broadcastQueries(),s=this,[2,new Promise((function(f,p){return mm(s.getObservableFromLink(t,Ma(Ma({},m),{optimisticResponse:r}),n,!1),(function(f){if(gm(f)&&"none"===d)throw new jm({graphQLErrors:f.errors});o&&(o.loading=!1,o.error=null);var p=Ma({},f);return"function"==typeof a&&(a=a(p)),"ignore"===d&&gm(p)&&delete p.errors,s.markMutationResult({mutationId:e,result:p,document:t,variables:n,fetchPolicy:h,errorPolicy:d,context:m,update:u,updateQueries:i,awaitRefetchQueries:c,refetchQueries:a,removeOptimistic:r?e:void 0,onQueryUpdated:l,keepRootFields:v})})).subscribe({next:function(e){s.broadcastQueries(),f(e)},error:function(t){o&&(o.loading=!1,o.error=t),r&&s.cache.removeOptimistic(e),s.broadcastQueries(),p(t instanceof jm?t:new jm({networkError:t}))}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;void 0===t&&(t=this.cache);var r=e.result,i=[],o="no-cache"===e.fetchPolicy;if(!o&&Hg(r,e.errorPolicy)){i.push({result:r.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables});var a=e.updateQueries;a&&this.queries.forEach((function(e,o){var s=e.observableQuery,c=s&&s.queryName;if(c&&Qg.call(a,c)){var u=a[c],l=n.queries.get(o),f=l.document,d=l.variables,p=t.diff({query:f,variables:d,returnPartialData:!0,optimistic:!1}),h=p.result;if(p.complete&&h){var v=u(h,{mutationResult:r,queryName:f&&Yh(f)||void 0,queryVariables:d});v&&i.push({result:v,dataId:"ROOT_QUERY",query:f,variables:d})}}}))}if(i.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var s=[];if(this.refetchQueries({updateCache:function(t){o||i.forEach((function(e){return t.write(e)}));var a=e.update;if(a){if(!o){var s=t.diff({id:"ROOT_MUTATION",query:n.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});s.complete&&(r=Ma(Ma({},r),{data:s.result}))}a(t,r,{context:e.context,variables:e.variables})}o||e.keepRootFields||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var n=t.fieldName,r=t.DELETE;return"__typename"===n?e:r}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach((function(e){return s.push(e)})),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(s).then((function(){return r}))}return Promise.resolve(r)},e.prototype.markMutationOptimistic=function(e,t){var n=this,r="function"==typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult(Ma(Ma({},t),{result:{data:r}}),e)}catch(e){__DEV__&&$p.error(e)}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t,n=this.transformCache;if(!n.has(e)){var r=this.cache.transformDocument(e),i=(t=this.cache.transformForLink(r),Em([Om],$h(t))),o=this.localState.clientQuery(r),a=i&&this.localState.serverQuery(i),s={document:r,hasClientExports:Cm(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:o,serverQuery:a,defaultVars:tv(Jh(r)),asQuery:Ma(Ma({},r),{definitions:r.definitions.map((function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?Ma(Ma({},e),{operation:"query"}):e}))})},c=function(e){e&&!n.has(e)&&n.set(e,s)};c(e),c(r),c(o),c(a)}return n.get(e)},e.prototype.getVariables=function(e,t){return Ma(Ma({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){void 0===(e=Ma(Ma({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new Gg(this),n=new Wm({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:e.query,observableQuery:n,variables:e.variables}),n},e.prototype.query=function(e,t){var n=this;return void 0===t&&(t=this.generateQueryId()),__DEV__?$p(e.query,"query option is required. You must specify your GraphQL document in the query option."):$p(e.query,14),__DEV__?$p("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'):$p("Document"===e.query.kind,15),__DEV__?$p(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):$p(!e.returnPartialData,16),__DEV__?$p(!e.pollInterval,"pollInterval option only supported on watchQuery."):$p(!e.pollInterval,17),this.fetchQuery(t,e).finally((function(){return n.stopQuery(t)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new Kp("Store reset while query was in flight (not completed in link chain)"):new Kp(18)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=Fm.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var n=new Map,r=new Map,i=new Set;return Array.isArray(e)&&e.forEach((function(e){var n;"string"==typeof e?r.set(e,!1):Mh(n=e)&&"Document"===n.kind&&Array.isArray(n.definitions)?r.set(t.transform(e).document,!1):Mh(e)&&e.query&&i.add(e)})),this.queries.forEach((function(t,i){var o=t.observableQuery,a=t.document;if(o){if("all"===e)return void n.set(i,o);var s=o.queryName;if("standby"===o.options.fetchPolicy||"active"===e&&!o.hasObservers())return;("active"===e||s&&r.has(s)||a&&r.has(a))&&(n.set(i,o),s&&r.set(s,!0),a&&r.set(a,!0))}})),i.size&&i.forEach((function(e){var r=Nm("legacyOneTimeQuery"),i=t.getQuery(r).init({document:e.query,variables:e.variables}),o=new Wm({queryManager:t,queryInfo:i,options:Ma(Ma({},e),{fetchPolicy:"network-only"})});$p(o.queryId===r),i.setObservableQuery(o),n.set(r,o)})),__DEV__&&r.size&&r.forEach((function(e,t){e||__DEV__&&$p.warn("Unknown query ".concat("string"==typeof t?"named ":"").concat(JSON.stringify(t,null,2)," requested in refetchQueries options.include array"))})),n},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach((function(r,i){var o=r.options.fetchPolicy;r.resetLastResults(),(e||"standby"!==o&&"cache-only"!==o)&&n.push(r.refetch()),t.getQuery(i).setDiff(null)})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,r=e.fetchPolicy,i=e.errorPolicy,o=e.variables,a=e.context,s=void 0===a?{}:a;n=this.transform(n).document,o=this.getVariables(n,o);var c=function(e){return t.getObservableFromLink(n,s,e).map((function(o){if("no-cache"!==r&&(Hg(o,i)&&t.cache.write({query:n,result:o.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),gm(o))throw new jm({graphQLErrors:o.errors});return o}))};if(this.transform(n).hasClientExports){var u=this.localState.addExportedVariables(n,o,s).then(c);return new Nh((function(e){var t=null;return u.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return c(o)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,r){var i,o,a=this;void 0===r&&(r=null!==(i=null==t?void 0:t.queryDeduplication)&&void 0!==i?i:this.queryDeduplication);var s=this.transform(e).serverQuery;if(s){var c=this.inFlightLinkObservables,u=this.link,l={query:s,variables:n,operationName:Yh(s)||void 0,context:this.prepareContext(Ma(Ma({},t),{forceFetch:!r}))};if(t=l.context,r){var f=c.get(s)||new Map;c.set(s,f);var d=hm(n);if(!(o=f.get(d))){var p=new Dm([sv(u,l)]);f.set(d,o=p),p.cleanup((function(){f.delete(d)&&f.size<1&&c.delete(s)}))}}else o=new Dm([sv(u,l)])}else o=new Dm([Nh.of({data:{}})]),t=this.prepareContext(t);var h=this.transform(e).clientQuery;return h&&(o=mm(o,(function(e){return a.localState.runResolvers({document:h,remoteResult:e,context:t,variables:n})}))),o},e.prototype.getResultsFromLink=function(e,t,n){var r=e.lastRequestId=this.generateRequestId();return mm(this.getObservableFromLink(e.document,n.context,n.variables),(function(i){var o=Vm(i.errors);if(r>=e.lastRequestId){if(o&&"none"===n.errorPolicy)throw e.markError(new jm({graphQLErrors:i.errors}));e.markResult(i,n,t),e.markReady()}var a={data:i.data,loading:!1,networkStatus:e.networkStatus||Fm.ready};return o&&"ignore"!==n.errorPolicy&&(a.errors=i.errors),a}),(function(t){var n=t.hasOwnProperty("graphQLErrors")?t:new jm({networkError:t});throw r>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){var r=this;void 0===n&&(n=Fm.loading);var i=this.transform(t.query).document,o=this.getVariables(i,t.variables),a=this.getQuery(e),s=t.fetchPolicy,c=void 0===s?"cache-first":s,u=t.errorPolicy,l=void 0===u?"none":u,f=t.returnPartialData,d=void 0!==f&&f,p=t.notifyOnNetworkStatusChange,h=void 0!==p&&p,v=t.context,m=void 0===v?{}:v,g=Object.assign({},t,{query:i,variables:o,fetchPolicy:c,errorPolicy:l,returnPartialData:d,notifyOnNetworkStatusChange:h,context:m}),y=function(e){return g.variables=e,r.fetchQueryByPolicy(a,g,n)};this.fetchCancelFns.set(e,(function(e){setTimeout((function(){return b.cancel(e)}))}));var b=new Dm(this.transform(g.query).hasClientExports?this.localState.addExportedVariables(g.query,g.variables,g.context).then(y):y(g.variables));return b.cleanup((function(){r.fetchCancelFns.delete(e),function(e){var t=e.fetchPolicy,n=void 0===t?"cache-first":t,r=e.nextFetchPolicy;r&&(e.fetchPolicy="function"==typeof r?r.call(e,n):r)}(t)})),b},e.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,r=e.include,i=e.optimistic,o=void 0!==i&&i,a=e.removeOptimistic,s=void 0===a?o?Nm("refetchQueries"):void 0:a,c=e.onQueryUpdated,u=new Map;r&&this.getObservableQueries(r).forEach((function(e,n){u.set(n,{oq:e,lastDiff:t.getQuery(n).getDiff()})}));var l=new Map;return n&&this.cache.batch({update:n,optimistic:o&&s||!1,removeOptimistic:s,onWatchUpdated:function(e,t,n){var r=e.watcher instanceof Gg&&e.watcher.observableQuery;if(r){if(c){u.delete(r.queryId);var i=c(r,t,n);return!0===i&&(i=r.refetch()),!1!==i&&l.set(r,i),i}null!==c&&u.set(r.queryId,{oq:r,lastDiff:n,diff:t})}}}),u.size&&u.forEach((function(e,n){var r,i=e.oq,o=e.lastDiff,a=e.diff;if(c){if(!a){var s=i.queryInfo;s.reset(),a=s.getDiff()}r=c(i,a,o)}c&&!0!==r||(r=i.refetch()),!1!==r&&l.set(i,r),n.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(n)})),s&&this.cache.removeOptimistic(s),l},e.prototype.fetchQueryByPolicy=function(e,t,n){var r=this,i=t.query,o=t.variables,a=t.fetchPolicy,s=t.refetchWritePolicy,c=t.errorPolicy,u=t.returnPartialData,l=t.context,f=t.notifyOnNetworkStatusChange,d=e.networkStatus;e.init({document:i,variables:o,networkStatus:n});var p=function(){return e.getDiff(o)},h=function(t,n){void 0===n&&(n=e.networkStatus||Fm.loading);var a=t.result;!__DEV__||u||Yv(a,{})||$m(t.missing);var s=function(e){return Nh.of(Ma({data:e,loading:Um(n),networkStatus:n},t.complete?null:{partial:!0}))};return a&&r.transform(i).hasForcedResolvers?r.localState.runResolvers({document:i,remoteResult:{data:a},context:l,variables:o,onlyRunForcedResolvers:!0}).then((function(e){return s(e.data||void 0)})):s(a)},v="no-cache"===a?0:n===Fm.refetch&&"merge"!==s?1:2,m=function(){return r.getResultsFromLink(e,v,{variables:o,context:l,fetchPolicy:a,errorPolicy:c})},g=f&&"number"==typeof d&&d!==n&&Um(n);switch(a){default:case"cache-first":return(y=p()).complete?[h(y,e.markReady())]:u||g?[h(y),m()]:[m()];case"cache-and-network":var y;return(y=p()).complete||u||g?[h(y),m()]:[m()];case"cache-only":return[h(p(),e.markReady())];case"network-only":return g?[h(p()),m()]:[m()];case"no-cache":return g?[h(e.getDiff()),m()]:[m()];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new Gg(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Ma(Ma({},t),{clientAwareness:this.clientAwareness})},e}(),Kg=!1;function $g(e,t){return cv(e,t,t.variables&&{variables:Ma(Ma({},e.variables),t.variables)})}var Jg=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,r=e.credentials,i=e.headers,o=e.cache,a=e.ssrMode,s=void 0!==a&&a,c=e.ssrForceFetchDelay,u=void 0===c?0:c,l=e.connectToDevTools,f=void 0===l?"object"==typeof window&&!window.__APOLLO_CLIENT__&&__DEV__:l,d=e.queryDeduplication,p=void 0===d||d,h=e.defaultOptions,v=e.assumeImmutableResults,m=void 0!==v&&v,g=e.resolvers,y=e.typeDefs,b=e.fragmentMatcher,w=e.name,S=e.version,k=e.link;if(k||(k=n?new Hv({uri:n,credentials:r,headers:i}):av.empty()),!o)throw __DEV__?new Kp("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new Kp(7);if(this.link=k,this.cache=o,this.disableNetworkFetches=s||u>0,this.queryDeduplication=p,this.defaultOptions=h||{},this.typeDefs=y,u&&setTimeout((function(){return t.disableNetworkFetches=!1}),u),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),f&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),!Kg&&__DEV__&&(Kg=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var E=window.navigator,_=E&&E.userAgent,O=void 0;"string"==typeof _&&(_.indexOf("Chrome/")>-1?O="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":_.indexOf("Firefox/")>-1&&(O="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),O&&__DEV__&&$p.log("Download the Apollo DevTools for a better development experience: "+O)}this.version="3.5.6",this.localState=new Ug({cache:o,client:this,resolvers:g,fragmentMatcher:b}),this.queryManager=new Wg({cache:this.cache,link:this.link,queryDeduplication:p,ssrMode:s,clientAwareness:{name:w,version:S},localState:this.localState,assumeImmutableResults:m,onBroadcast:f?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=$g(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Ma(Ma({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=$g(this.defaultOptions.query,e)),__DEV__?$p("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):$p("cache-and-network"!==e.fetchPolicy,8),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Ma(Ma({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=$g(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return sv(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!1})})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!0})})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],r=[];t.forEach((function(e,t){n.push(t),r.push(e)}));var i=Promise.all(r);return i.queries=n,i.results=r,i.catch((function(e){__DEV__&&$p.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(e))})),i},e.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}(),Yg=function(){function e(){this.getFragmentDoc=Mg(Ph)}return e.prototype.batch=function(e){var t,n=this,r="string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction((function(){return t=e.update(n)}),r),t},e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ma(Ma({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ma(Ma({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},e.prototype.writeQuery=function(e){var t=e.id,n=e.data,r=Pa(e,["id","data"]);return this.write(Object.assign(r,{dataId:t||"ROOT_QUERY",result:n}))},e.prototype.writeFragment=function(e){var t=e.id,n=e.data,r=e.fragment,i=e.fragmentName,o=Pa(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(r,i),dataId:t,result:n}))},e.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var r=n.readQuery(e),i=t(r);return null==i?r:(n.writeQuery(Ma(Ma({},e),{data:i})),i)}})},e.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var r=n.readFragment(e),i=t(r);return null==i?r:(n.writeFragment(Ma(Ma({},e),{data:i})),i)}})},e}(),Xg=function(e,t,n,r){this.message=e,this.path=t,this.query=n,this.variables=r};function Zg(e){return __DEV__&&(t=e,(n=new Set([t])).forEach((function(e){Mh(e)&&function(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(e){if(e instanceof TypeError)return null;throw e}return e}(e)===e&&Object.getOwnPropertyNames(e).forEach((function(t){Mh(e[t])&&n.add(e[t])}))}))),e;var t,n}var ey=Object.prototype.hasOwnProperty;function ty(e,t){var n=e.__typename,r=e.id,i=e._id;if("string"==typeof n&&(t&&(t.keyObject=void 0!==r?{id:r}:void 0!==i?{_id:i}:void 0),void 0===r&&(r=i),void 0!==r))return"".concat(n,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var ny={dataIdFromObject:ty,addTypename:!0,resultCaching:!0,canonizeResults:!1};function ry(e){var t=e.canonizeResults;return void 0===t?ny.canonizeResults:t}var iy=/^[_a-z][_0-9a-z]*/i;function oy(e){var t=e.match(iy);return t?t[0]:e}function ay(e,t,n){return!!Mh(t)&&(Array.isArray(t)?t.every((function(t){return ay(e,t,n)})):e.selections.every((function(e){if(Wh(e)&&Rm(e,n)){var r=Hh(e);return ey.call(t,r)&&(!e.selectionSet||ay(e.selectionSet,t[r],n))}return!0})))}function sy(e){return Mh(e)&&!Fh(e)&&!Array.isArray(e)}var cy=Object.create(null),uy=function(){return cy},ly=Object.create(null),fy=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return Zg(Fh(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return Fh(e)?n.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return Vh(e);if(Fh(e))return e;var r=n.policies.identify(e)[0];if(r){var i=Vh(r);return t&&n.merge(r,e),i}}}return e.prototype.toObject=function(){return Ma({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),ey.call(this.data,e)){var n=this.data[e];if(n&&ey.call(n,t))return n[t]}return"__typename"===t&&ey.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof vy?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),ey.call(this.data,e)?this.data[e]:this instanceof vy?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n,r=this;Fh(e)&&(e=e.__ref),Fh(t)&&(t=t.__ref);var i="string"==typeof e?this.lookup(n=e):e,o="string"==typeof t?this.lookup(n=t):t;if(o){__DEV__?$p("string"==typeof n,"store.merge expects a string ID"):$p("string"==typeof n,1);var a=new eg(gy).merge(i,o);if(this.data[n]=a,a!==i&&(delete this.refs[n],this.group.caching)){var s=Object.create(null);i||(s.__exists=1),Object.keys(o).forEach((function(e){if(!i||i[e]!==a[e]){s[e]=1;var t=oy(e);t===e||r.policies.hasKeyArgs(a.__typename,t)||(s[t]=1),void 0!==a[e]||r instanceof vy||delete a[e]}})),!s.__typename||i&&i.__typename||this.policies.rootTypenamesById[n]!==a.__typename||delete s.__typename,Object.keys(s).forEach((function(e){return r.group.dirty(n,e)}))}}},e.prototype.modify=function(e,t){var n=this,r=this.lookup(e);if(r){var i=Object.create(null),o=!1,a=!0,s={DELETE:cy,INVALIDATE:ly,isReference:Fh,toReference:this.toReference,canRead:this.canRead,readField:function(t,r){return n.policies.readField("string"==typeof t?{fieldName:t,from:r||Vh(e)}:t,{store:n})}};if(Object.keys(r).forEach((function(c){var u=oy(c),l=r[c];if(void 0!==l){var f="function"==typeof t?t:t[c]||t[u];if(f){var d=f===uy?cy:f(Zg(l),Ma(Ma({},s),{fieldName:u,storeFieldName:c,storage:n.getStorage(e,c)}));d===ly?n.group.dirty(e,c):(d===cy&&(d=void 0),d!==l&&(i[c]=d,o=!0,l=d))}void 0!==l&&(a=!1)}})),o)return this.merge(e,i),a&&(this instanceof vy?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var r,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),a=t&&n?this.policies.getStoreFieldName({typename:o,fieldName:t,args:n}):t;return this.modify(e,a?((r={})[a]=uy,r):uy)}return!1},e.prototype.evict=function(e,t){var n=!1;return e.id&&(ey.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof vy&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){ey.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&ey.call(e,n)||t.delete(n)})),e){var n=e.__META,r=Pa(e,["__META"]);Object.keys(r).forEach((function(e){t.merge(e,r[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof vy?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(r){ey.call(n,r)&&(Object.keys(e.findChildRefIds(r)).forEach(t.add,t),delete n[r])}));var r=Object.keys(n);if(r.length){for(var i=this;i instanceof vy;)i=i.parent;r.forEach((function(e){return i.delete(e)}))}return r},e.prototype.findChildRefIds=function(e){if(!ey.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var r=new Set([n]);r.forEach((function(e){Fh(e)&&(t[e.__ref]=!0),Mh(e)&&Object.keys(e).forEach((function(t){var n=e[t];Mh(n)&&r.add(n)}))}))}return this.refs[e]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),dy=function(){function e(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?Cg():null,this.keyMaker=new um(lm)},e.prototype.depend=function(e,t){if(this.d){this.d(py(e,t));var n=oy(t);n!==t&&this.d(py(e,n)),this.parent&&this.parent.depend(e,t)}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(py(e,t),"__exists"===t?"forget":"setDirty")},e}();function py(e,t){return t+"#"+e}function hy(e,t){yy(e)&&e.group.depend(t,"__exists")}!function(e){var t=function(e){function t(t){var n=t.policies,r=t.resultCaching,i=void 0===r||r,o=t.seed,a=e.call(this,n,new dy(i))||this;return a.stump=new my(a),a.storageTrie=new um(lm),o&&a.replace(o),a}return Na(t,e),t.prototype.addLayer=function(e,t){return this.stump.addLayer(e,t)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(fy||(fy={}));var vy=function(e){function t(t,n,r,i){var o=e.call(this,n.policies,i)||this;return o.id=t,o.parent=n,o.replay=r,o.group=i,r(o),o}return Na(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){var r=t.data[e],i=n.lookup(e);i?r?r!==i&&Object.keys(r).forEach((function(n){Yv(r[n],i[n])||t.group.dirty(e,n)})):(t.group.dirty(e,"__exists"),Object.keys(i).forEach((function(n){t.group.dirty(e,n)}))):t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return Ma(Ma({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return ey.call(this.data,t)?Ma(Ma({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(fy),my=function(e){function t(t){return e.call(this,"EntityStore.Stump",t,(function(){}),new dy(t.group.caching,t.group))||this}return Na(t,e),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(vy);function gy(e,t,n){var r=e[n],i=t[n];return Yv(r,i)?r:i}function yy(e){return!!(e instanceof fy&&e.group.caching)}function by(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var wy=function(){function e(e){var t=this;this.knownResults=new(lm?WeakMap:Map),this.config=cv(e,{addTypename:!1!==e.addTypename,canonizeResults:ry(e)}),this.canon=e.canon||new pm,this.executeSelectionSet=Mg((function(e){var n,r=e.context.canonizeResults,i=by(e);i[3]=!r;var o=(n=t.executeSelectionSet).peek.apply(n,i);return o?r?Ma(Ma({},o),{result:t.canon.admit(o.result)}):o:(hy(e.context.store,e.enclosingRef.__ref),t.execSelectionSetImpl(e))}),{max:this.config.resultCacheMaxSize,keyArgs:by,makeCacheKey:function(e,t,n,r){if(yy(n.store))return n.store.makeCacheKey(e,Fh(t)?t.__ref:t,n.varString,r)}}),this.executeSubSelectedArray=Mg((function(e){return hy(e.context.store,e.enclosingRef.__ref),t.execSubSelectedArrayImpl(e)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var t=e.field,n=e.array,r=e.context;if(yy(r.store))return r.store.makeCacheKey(t,n,r.varString)}})}return e.prototype.resetCanon=function(){this.canon=new pm},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,r=e.rootId,i=void 0===r?"ROOT_QUERY":r,o=e.variables,a=e.returnPartialData,s=void 0===a||a,c=e.canonizeResults,u=void 0===c?this.config.canonizeResults:c,l=this.config.cache.policies;o=Ma(Ma({},tv(Zh(n))),o);var f,d=Vh(i),p=new eg,h=this.executeSelectionSet({selectionSet:ev(n).selectionSet,objectOrReference:d,enclosingRef:d,context:{store:t,query:n,policies:l,variables:o,varString:hm(o),canonizeResults:u,fragmentMap:Lh(Xh(n)),merge:function(e,t){return p.merge(e,t)}}});if(h.missing&&(f=[new Xg(Sy(h.missing),h.missing,n,o)],!s))throw f[0];return{result:h.result,complete:!f,missing:f}},e.prototype.isFresh=function(e,t,n,r){if(yy(r.store)&&this.knownResults.get(e)===n){var i=this.executeSelectionSet.peek(n,t,r,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,r=e.objectOrReference,i=e.enclosingRef,o=e.context;if(Fh(r)&&!o.policies.rootTypenamesById[r.__ref]&&!o.store.has(r.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(r.__ref," object")};var a,s=o.variables,c=o.policies,u=o.store.getFieldValue(r,"__typename"),l={};function f(e,t){var n;return e.missing&&(a=o.merge(a,((n={})[t]=e.missing,n))),e.result}this.config.addTypename&&"string"==typeof u&&!c.rootIdsByTypename[u]&&(l={__typename:u});var d=new Set(n.selections);d.forEach((function(e){var n,p;if(Rm(e,s))if(Wh(e)){var h=c.readField({fieldName:e.name.value,field:e,variables:o.variables,from:r},o),v=Hh(e);void 0===h?_m.added(e)||(a=o.merge(a,((n={})[v]="Can't find field '".concat(e.name.value,"' on ").concat(Fh(r)?r.__ref+" object":"object "+JSON.stringify(r,null,2)),n))):Array.isArray(h)?h=f(t.executeSubSelectedArray({field:e,array:h,enclosingRef:i,context:o}),v):e.selectionSet?null!=h&&(h=f(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:h,enclosingRef:Fh(h)?h:i,context:o}),v)):o.canonizeResults&&(h=t.canon.pass(h)),void 0!==h&&(l=o.merge(l,((p={})[v]=h,p)))}else{var m=Dh(e,o.fragmentMap);m&&c.fragmentMatches(m,u)&&m.selectionSet.selections.forEach(d.add,d)}}));var p={result:l,missing:a},h=o.canonizeResults?this.canon.admit(p):Zg(p);return h.result&&this.knownResults.set(h.result,n),h},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,r=e.field,i=e.array,o=e.enclosingRef,a=e.context;function s(e,n){var r;return e.missing&&(t=a.merge(t,((r={})[n]=e.missing,r))),e.result}return r.selectionSet&&(i=i.filter(a.store.canRead)),i=i.map((function(e,t){return null===e?null:Array.isArray(e)?s(n.executeSubSelectedArray({field:r,array:e,enclosingRef:o,context:a}),t):r.selectionSet?s(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:e,enclosingRef:Fh(e)?e:o,context:a}),t):(__DEV__&&function(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach((function(n){Mh(n)&&(__DEV__?$p(!Fh(n),"Missing selection set for object of type ".concat(function(e,t){return Fh(t)?e.get(t.__ref,"__typename"):t&&t.__typename}(e,n)," returned for query field ").concat(t.name.value)):$p(!Fh(n),5),Object.values(n).forEach(r.add,r))}))}}(a.store,r,e),e)})),{result:a.canonizeResults?this.canon.admit(i):i,missing:t}},e}();function Sy(e){try{JSON.stringify(e,(function(e,t){if("string"==typeof t)throw t;return t}))}catch(e){return e}}var ky=Object.create(null);function Ey(e){var t=JSON.stringify(e);return ky[t]||(ky[t]=Object.create(null))}function _y(e){var t=Ey(e);return t.keyFieldsFn||(t.keyFieldsFn=function(t,n){var r=function(e,t){return n.readField(t,e)},i=n.keyObject=Ty(e,(function(e){var i=Ay(n.storeObject,e,r);return void 0===i&&t!==n.storeObject&&ey.call(t,e[0])&&(i=Ay(t,e,Ry)),__DEV__?$p(void 0!==i,"Missing field '".concat(e.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):$p(void 0!==i,2),i}));return"".concat(n.typename,":").concat(JSON.stringify(i))})}function Oy(e){var t=Ey(e);return t.keyArgsFn||(t.keyArgsFn=function(t,n){var r=n.field,i=n.variables,o=n.fieldName,a=Ty(e,(function(e){var n=e[0],o=n.charAt(0);if("@"!==o)if("$"!==o){if(t)return Ay(t,e)}else{var a=n.slice(1);if(i&&ey.call(i,a)){var s=e.slice(0);return s[0]=a,Ay(i,s)}}else if(r&&Vm(r.directives)){var c=n.slice(1),u=r.directives.find((function(e){return e.name.value===c})),l=u&&Gh(u,i);return l&&Ay(l,e.slice(1))}})),s=JSON.stringify(a);return(t||"{}"!==s)&&(o+=":"+s),o})}function Ty(e,t){var n=new eg;return xy(e).reduce((function(e,r){var i,o=t(r);if(void 0!==o){for(var a=r.length-1;a>=0;--a)(i={})[r[a]]=o,o=i;e=n.merge(e,o)}return e}),Object.create(null))}function xy(e){var t=Ey(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach((function(t,i){Array.isArray(t)?(xy(t).forEach((function(e){return n.push(r.concat(e))})),r.length=0):(r.push(t),Array.isArray(e[i+1])||(n.push(r.slice(0)),r.length=0))}))}return t.paths}function Ry(e,t){return e[t]}function Ay(e,t,n){return n=n||Ry,Cy(t.reduce((function e(t,r){return Array.isArray(t)?t.map((function(t){return e(t,r)})):t&&n(t,r)}),e))}function Cy(e){return Mh(e)?Array.isArray(e)?e.map(Cy):Ty(Object.keys(e).sort(),(function(t){return Ay(e,t)})):e}function Iy(e){return void 0!==e.args?e.args:e.field?Gh(e.field,e.variables):null}Bh.setStringify(hm);var Ny=function(){},My=function(e,t){return t.fieldName},Py=function(e,t,n){return(0,n.mergeObjects)(e,t)},Ly=function(e,t){return t},Dy=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=Ma({dataIdFromObject:ty},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t){var n,r=this,i=t&&(t.typename||(null===(n=t.storeObject)||void 0===n?void 0:n.__typename))||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o,a=t&&t.storeObject||e,s=Ma(Ma({},t),{typename:i,storeObject:a,readField:t&&t.readField||function(){var e=Fy(arguments,a);return r.readField(e,{store:r.cache.data,variables:e.variables})}}),c=i&&this.getTypePolicy(i),u=c&&c.keyFn||this.config.dataIdFromObject;u;){var l=u(e,s);if(!Array.isArray(l)){o=l;break}u=_y(l)}return o=o?String(o):void 0,s.keyObject?[o,s.keyObject]:[o]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],i=r.queryType,o=r.mutationType,a=r.subscriptionType,s=Pa(r,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),ey.call(t.toBeAdded,n)?t.toBeAdded[n].push(s):t.toBeAdded[n]=[s]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,r=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function a(e,t){e.merge="function"==typeof t?t:!0===t?Py:!1===t?Ly:e.merge}a(r,t.merge),r.keyFn=!1===i?Ny:Array.isArray(i)?_y(i):"function"==typeof i?i:r.keyFn,o&&Object.keys(o).forEach((function(t){var r=n.getFieldPolicy(e,t,!0),i=o[t];if("function"==typeof i)r.read=i;else{var s=i.keyArgs,c=i.read,u=i.merge;r.keyFn=!1===s?My:Array.isArray(s)?Oy(s):"function"==typeof s?s:r.keyFn,"function"==typeof c&&(r.read=c),a(r,u)}r.read&&r.merge&&(r.keyFn=r.keyFn||My)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[n];t!==r&&(__DEV__?$p(!r||r===e,"Cannot change root ".concat(e," __typename more than once")):$p(!r||r===e,3),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var r=e.match(iy);r&&r[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!ey.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var r=this.supertypeMap.get(e);r&&r.size&&r.forEach((function(e){var r=t.getTypePolicy(e),i=r.fields,o=Pa(r,["fields"]);Object.assign(n,o),Object.assign(n.fields,i)}))}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach((function(n){t.updateTypePolicy(e,n)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var r=this.getTypePolicy(e).fields;return r[t]||n&&(r[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,r){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),s=[a],c=function(e){var t=i.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},u=!(!n||!this.fuzzySubtypes.size),l=!1,f=0;f<s.length;++f){var d=s[f];if(d.has(o))return a.has(o)||(l&&__DEV__&&$p.warn("Inferring subtype ".concat(t," of supertype ").concat(o)),a.add(o)),!0;d.forEach(c),u&&f===s.length-1&&ay(e.selectionSet,n,r)&&(u=!1,l=!0,this.fuzzySubtypes.forEach((function(e,n){var r=t.match(e);r&&r[0]===t&&c(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,r=e.fieldName,i=this.getFieldPolicy(n,r,!1),o=i&&i.keyFn;if(o&&n)for(var a={typename:n,fieldName:r,field:e.field||null,variables:e.variables},s=Iy(e);o;){var c=o(s,a);if(!Array.isArray(c)){t=c||r;break}o=Oy(c)}return void 0===t&&(t=e.field?function(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(r){var i=r.name,o=r.value;return jh(n[e.name.value],i,o,t)}))})));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach((function(e){var n=e.name,i=e.value;return jh(r,n,i,t)}))),Bh(e.name.value,r,n)}(e.field,e.variables):Bh(r,Iy(e))),!1===t?r:r===oy(t)?t:r+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var i=this.getStoreFieldName(e),o=oy(i),a=t.store.getFieldValue(n,i),s=this.getFieldPolicy(e.typename,o,!1),c=s&&s.read;if(c){var u=Vy(this,n,e,t,t.store.getStorage(Fh(n)?n.__ref:n,i));return Pg.withValue(this.cache,c,[a,u])}return a}},e.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},e.prototype.getMergeFunction=function(e,t,n){var r=this.getFieldPolicy(e,t,!1),i=r&&r.merge;return!i&&n&&(i=(r=this.getTypePolicy(n))&&r.merge),i},e.prototype.runMergeFunction=function(e,t,n,r,i){var o=n.field,a=n.typename,s=n.merge;return s===Py?jy(r.store)(e,t):s===Ly?t:(r.overwrite&&(e=void 0),s(e,t,Vy(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:r.variables},r,i||Object.create(null))))},e}();function Vy(e,t,n,r,i){var o=e.getStoreFieldName(n),a=oy(o),s=n.variables||r.variables,c=r.store,u=c.toReference,l=c.canRead;return{args:Iy(n),field:n.field||null,fieldName:a,storeFieldName:o,variables:s,isReference:Fh,toReference:u,storage:i,cache:e.cache,canRead:l,readField:function(){return e.readField(Fy(arguments,t,r),r)},mergeObjects:jy(r.store)}}function Fy(e,t,n){var r,i,o,a=e[0],s=e[1],c=e.length;return"string"==typeof a?r={fieldName:a,from:c>1?s:t}:(r=Ma({},a),ey.call(r,"from")||(r.from=t)),__DEV__&&void 0===r.from&&__DEV__&&$p.warn("Undefined 'from' passed to readField with arguments ".concat((i=Array.from(e),o=Nm("stringifyForDisplay"),JSON.stringify(i,(function(e,t){return void 0===t?o:t})).split(JSON.stringify(o)).join("<undefined>")))),void 0===r.variables&&(r.variables=n),r}function jy(e){return function(t,n){if(Array.isArray(t)||Array.isArray(n))throw __DEV__?new Kp("Cannot automatically merge arrays"):new Kp(4);if(Mh(t)&&Mh(n)){var r=e.getFieldValue(t,"__typename"),i=e.getFieldValue(n,"__typename");if(r&&i&&r!==i)return n;if(Fh(t)&&sy(n))return e.merge(t.__ref,n),t;if(sy(t)&&Fh(n))return e.merge(t,n.__ref),n;if(sy(t)&&sy(n))return Ma(Ma({},t),n)}return n}}function Uy(e,t,n){var r="".concat(t).concat(n),i=e.flavors.get(r);return i||e.flavors.set(r,i=e.clientOnly===t&&e.deferred===n?e:Ma(Ma({},e),{clientOnly:t,deferred:n})),i}var By=function(){function e(e,t){this.cache=e,this.reader=t}return e.prototype.writeToStore=function(e,t){var n=this,r=t.query,i=t.result,o=t.dataId,a=t.variables,s=t.overwrite,c=Jh(r),u=new eg;a=Ma(Ma({},tv(c)),a);var l={store:e,written:Object.create(null),merge:function(e,t){return u.merge(e,t)},variables:a,varString:hm(a),fragmentMap:Lh(Xh(r)),overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},f=this.processSelectionSet({result:i||Object.create(null),dataId:o,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:l});if(!Fh(f))throw __DEV__?new Kp("Could not identify object ".concat(JSON.stringify(i))):new Kp(6);return l.incomingById.forEach((function(t,r){var i=t.storeObject,o=t.mergeTree,a=t.fieldNodeSet,s=Vh(r);if(o&&o.map.size){var c=n.applyMerges(o,s,i,l);if(Fh(c))return;i=c}if(__DEV__&&!l.overwrite){var u=Object.create(null);a.forEach((function(e){e.selectionSet&&(u[e.name.value]=!0)})),Object.keys(i).forEach((function(e){(function(e){return!0===u[oy(e)]})(e)&&!function(e){var t=o&&o.map.get(e);return Boolean(t&&t.info&&t.info.merge)}(e)&&function(e,t,n,r){var i=function(e){var t=r.getFieldValue(e,n);return"object"==typeof t&&t},o=i(e);if(o){var a=i(t);if(a&&!Fh(o)&&!Yv(o,a)&&!Object.keys(o).every((function(e){return void 0!==r.getFieldValue(a,e)}))){var s=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),c=oy(n),u="".concat(s,".").concat(c);if(!Wy.has(u)){Wy.add(u);var l=[];Array.isArray(o)||Array.isArray(a)||[o,a].forEach((function(e){var t=r.getFieldValue(e,"__typename");"string"!=typeof t||l.includes(t)||l.push(t)})),__DEV__&&$p.warn("Cache data may be lost when replacing the ".concat(c," field of a ").concat(s," object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(l.length?"either ensure all objects of type "+l.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(u," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(o).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(a).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}}}}(s,i,e,l.store)}))}e.merge(r,i)})),e.retain(f.__ref),f},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,r=e.result,i=e.selectionSet,o=e.context,a=e.mergeTree,s=this.cache.policies,c=Object.create(null),u=n&&s.rootTypenamesById[n]||Qh(r,i,o.fragmentMap)||n&&o.store.get(n,"__typename");"string"==typeof u&&(c.__typename=u);var l=function(){var e=Fy(arguments,c,o.variables);if(Fh(e.from)){var t=o.incomingById.get(e.from.__ref);if(t){var n=s.readField(Ma(Ma({},e),{from:t.storeObject}),o);if(void 0!==n)return n}}return s.readField(e,o)},f=new Set;this.flattenFields(i,r,o,u).forEach((function(e,n){var i,o=Hh(n),d=r[o];if(f.add(n),void 0!==d){var p=s.getStoreFieldName({typename:u,fieldName:n.name.value,field:n,variables:e.variables}),h=zy(a,p),v=t.processFieldValue(d,n,n.selectionSet?Uy(e,!1,!1):e,h),m=void 0;n.selectionSet&&(Fh(v)||sy(v))&&(m=l("__typename",v));var g=s.getMergeFunction(u,n.name.value,m);g?h.info={field:n,typename:u,merge:g}:Qy(a,p),c=e.merge(c,((i={})[p]=v,i))}else!__DEV__||e.clientOnly||e.deferred||_m.added(n)||s.getReadFunction(u,n.name.value)||__DEV__&&$p.error("Missing field '".concat(Hh(n),"' while writing result ").concat(JSON.stringify(r,null,2)).substring(0,1e3))}));try{var d=s.identify(r,{typename:u,selectionSet:i,fragmentMap:o.fragmentMap,storeObject:c,readField:l}),p=d[0],h=d[1];n=n||p,h&&(c=o.merge(c,h))}catch(e){if(!n)throw e}if("string"==typeof n){var v=Vh(n),m=o.written[n]||(o.written[n]=[]);if(m.indexOf(i)>=0)return v;if(m.push(i),this.reader&&this.reader.isFresh(r,v,i,o))return v;var g=o.incomingById.get(n);return g?(g.storeObject=o.merge(g.storeObject,c),g.mergeTree=Gy(g.mergeTree,a),f.forEach((function(e){return g.fieldNodeSet.add(e)}))):o.incomingById.set(n,{storeObject:c,mergeTree:Hy(a)?void 0:a,fieldNodeSet:f}),v}return c},e.prototype.processFieldValue=function(e,t,n,r){var i=this;return t.selectionSet&&null!==e?Array.isArray(e)?e.map((function(e,o){var a=i.processFieldValue(e,t,n,zy(r,o));return Qy(r,o),a})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:r}):__DEV__?qm(e):e},e.prototype.flattenFields=function(e,t,n,r){void 0===r&&(r=Qh(t,e,n.fragmentMap));var i=new Map,o=this.cache.policies,a=new um(!1);return function e(s,c){var u=a.lookup(s,c.clientOnly,c.deferred);u.visited||(u.visited=!0,s.selections.forEach((function(a){if(Rm(a,n.variables)){var s=c.clientOnly,u=c.deferred;if(s&&u||!Vm(a.directives)||a.directives.forEach((function(e){var t=e.name.value;if("client"===t&&(s=!0),"defer"===t){var r=Gh(e,n.variables);r&&!1===r.if||(u=!0)}})),Wh(a)){var l=i.get(a);l&&(s=s&&l.clientOnly,u=u&&l.deferred),i.set(a,Uy(n,s,u))}else{var f=Dh(a,n.fragmentMap);f&&o.fragmentMatches(f,r,t,n.variables)&&e(f.selectionSet,Uy(n,s,u))}}})))}(e,n),i},e.prototype.applyMerges=function(e,t,n,r,i){var o,a=this;if(e.map.size&&!Fh(n)){var s,c=Array.isArray(n)||!Fh(t)&&!sy(t)?void 0:t,u=n;c&&!i&&(i=[Fh(c)?c.__ref:c]);var l=function(e,t){return Array.isArray(e)?"number"==typeof t?e[t]:void 0:r.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){var n=l(c,t),o=l(u,t);if(void 0!==o){i&&i.push(t);var f=a.applyMerges(e,n,o,r,i);f!==o&&(s=s||new Map).set(t,f),i&&$p(i.pop()===t)}})),s&&(n=Array.isArray(u)?u.slice(0):Ma({},u),s.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,r,i&&(o=r.store).getStorage.apply(o,i)):n},e}(),qy=[];function zy(e,t){var n=e.map;return n.has(t)||n.set(t,qy.pop()||{map:new Map}),n.get(t)}function Gy(e,t){if(e===t||!t||Hy(t))return e;if(!e||Hy(e))return t;var n=e.info&&t.info?Ma(Ma({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,i={info:n,map:r?new Map:e.map.size?e.map:t.map};if(r){var o=new Set(t.map.keys());e.map.forEach((function(e,n){i.map.set(n,Gy(e,t.map.get(n))),o.delete(n)})),o.forEach((function(n){i.map.set(n,Gy(t.map.get(n),e.map.get(n)))}))}return i}function Hy(e){return!e||!(e.info||e.map.size)}function Qy(e,t){var n=e.map,r=n.get(t);r&&Hy(r)&&(qy.push(r),n.delete(t))}var Wy=new Set,Ky=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=Fg,n.txCount=0,n.config=function(e){return cv(ny,e)}(t),n.addTypename=!!n.config.addTypename,n.policies=new Dy({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return Na(t,e),t.prototype.init=function(){var e=this.data=new fy.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var t=this,n=this.storeReader;this.storeWriter=new By(this,this.storeReader=new wy({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:ry(this.config),canon:e?void 0:n&&n.canon})),this.maybeBroadcastWatch=Mg((function(e,n){return t.broadcastWatch(e,n)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var n=e.optimistic?t.optimisticData:t.data;if(yy(n)){var r=e.optimistic,i=e.rootId,o=e.variables;return n.makeCacheKey(e.query,e.callback,hm({optimistic:r,rootId:i,variables:o}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((function(e){return e.resetCaching()}))},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore(Ma(Ma({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(e){if(e instanceof Xg)return null;throw e}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(ey.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore(Ma(Ma({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var t,n=this;return this.watches.size||Dg(t=this).vars.forEach((function(e){return e.attachCache(t)})),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){n.watches.delete(e)&&!n.watches.size&&Vg(n),n.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){hm.reset();var t=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),t},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if(Fh(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(e){__DEV__&&$p.warn(e)}},t.prototype.evict=function(e){if(!e.id){if(ey.call(e,"id"))return!1;e=Ma(Ma({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(e){var t=this;return this.init(),hm.reset(),e&&e.discardWatches?(this.watches.forEach((function(e){return t.maybeBroadcastWatch.forget(e)})),this.watches.clear(),Vg(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.batch=function(e){var t,n=this,r=e.update,i=e.optimistic,o=void 0===i||i,a=e.removeOptimistic,s=e.onWatchUpdated,c=function(e){var i=n,o=i.data,a=i.optimisticData;++n.txCount,e&&(n.data=n.optimisticData=e);try{return t=r(n)}finally{--n.txCount,n.data=o,n.optimisticData=a}},u=new Set;return s&&!this.txCount&&this.broadcastWatches(Ma(Ma({},e),{onWatchUpdated:function(e){return u.add(e),!1}})),"string"==typeof o?this.optimisticData=this.optimisticData.addLayer(o,c):!1===o?c(this.data):c(),"string"==typeof a&&(this.optimisticData=this.optimisticData.removeLayer(a)),s&&u.size?(this.broadcastWatches(Ma(Ma({},e),{onWatchUpdated:function(e,t){var n=s.call(this,e,t);return!1!==n&&u.delete(e),n}})),u.size&&u.forEach((function(e){return n.maybeBroadcastWatch.dirty(e)}))):this.broadcastWatches(e),t},t.prototype.performTransaction=function(e,t){return this.batch({update:e,optimistic:t||null!==t})},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=_m(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){var n=e.lastDiff,r=this.diff(e);t&&(e.optimistic&&"string"==typeof t.optimistic&&(r.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,r,n))||n&&Yv(n.result,r.result)||e.callback(e.lastDiff=r,n)},t}(Yg);const $y="settings",Jy=na({key:"settingsAtom",default:{clientId:window.crypto.randomUUID(),locale:"fr"}}),Yy=ra({key:"getSettings",get:({get:e})=>{const t=e(Jy),n=window.localStorage.getItem($y);return n?{...t,...JSON.parse(n)}:(window.localStorage.setItem($y,JSON.stringify(t)),t)},set:({set:e},t)=>{window.localStorage.setItem($y,JSON.stringify(t)),e(Jy,t)}}),Xy=ra({key:"getAblyClient",get:({get:e})=>{const{clientId:t}=e(Yy);return new(Gp().Realtime.Promise)({key:"eUPftg.U_9ung:j71TqC9cL_j3Z9zvhIpvXnQ98-PKooUYJ8lYO5syYzI",clientId:t})},dangerouslyAllowMutability:!0}),Zy=ra({key:"getApolloClient",get:()=>new Jg({uri:"https://api-eu-central-1.graphcms.com/v2/ckx8muqxk0nxy01z0amvy5bqo/master",cache:new Ky}),dangerouslyAllowMutability:!0}),eb=ra({key:"getChannelId",get:()=>nb()?.channel||crypto.getRandomValues(new Uint32Array(1))[0].toString()}),tb=ra({key:"getChannel",get:({get:e})=>{const t=e(eb);return e(Xy).channels.get("[?rewind=100]qui-est-ce-"+t)},dangerouslyAllowMutability:!0}),nb=()=>{if(window.location.hash.length)return window.location.hash.slice(1).split("&").reduce(((e,t)=>{const n=t.split("=")[0],r=t.split("=")[1];return e[n]=r,e}),{})},rb=na({key:"roundStateAtom",default:"not-started"}),ib=ra({key:"publishRoundState",get:({get:e})=>e(rb),set:({get:e},t)=>{e(rb)!==t&&e(tb).publish("state",t)}}),ob=na({key:"roundCharactersAtom",default:[]}),ab=ra({key:"publishRoundCharacters",get:({get:e})=>e(ob),set:({get:e,set:t},n)=>{const r=e(tb);t(ob,n),r.publish("characters",n)}}),sb=na({key:"getRoundCharactersOpponent",default:[]}),cb=na({key:"getRoundCharacterToGuess",default:void 0}),ub=na({key:"roundCharacterGuessedAtom",default:void 0}),lb=()=>{const e=aa(cb),t=aa(rb),n=ia(sb),{t:i}=Ca();return r.createElement("div",{className:"choosecharacter"},r.createElement("div",{className:"choosecharacter--modal"},r.createElement("div",{className:"choosecharacter--modal__title"},i("choosecharacter.title")),r.createElement("div",{className:"choosecharacter--modal__container"},r.createElement(qp,{characters:n,onClick:n=>{e(n),t("running")}}))))},fb=na({key:"getPlayers",default:[]}),db=()=>{const e=ia(tb),t=ia(Yy),n=aa(fb),i=aa(ub),o=aa(sb),a=aa(rb);return(0,r.useEffect)((()=>{(async()=>{let t=[];const r=e.presence;(await r.get()).map((e=>{t.push({name:e.clientId,timestamp:e.timestamp})})),n(t),r.subscribe("enter",(e=>{t.find((t=>t.name===e.clientId))||(t=[...t,{name:e.clientId,timestamp:e.timestamp}],n(t))})),r.subscribe("leave",(e=>{t=t.filter((t=>t.name!==e.clientId)),n(t)})),await r.enter()})()}),[e]),(0,r.useEffect)((()=>{const t=({data:e})=>{a(e)};return e.subscribe("state",t),()=>e.unsubscribe("state",t)}),[e]),(0,r.useEffect)((()=>{const n=({data:e,clientId:n})=>{n!==t.clientId&&o(e)};return e.subscribe("characters",n),()=>e.unsubscribe("characters",n)}),[e]),(0,r.useEffect)((()=>{const n=({data:e,clientId:n})=>{n!==t.clientId&&i(e)};return e.subscribe("guess",n),()=>e.unsubscribe("guess",n)}),[e]),null};function pb(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}const hb=/\r\n|[\n\r]/g;function vb(e,t){let n=0,r=1;for(const i of e.body.matchAll(hb)){if("number"==typeof i.index||pb(!1),i.index>=t)break;n=i.index+i[0].length,r+=1}return{line:r,column:t+1-n}}function mb(e,t){const n=e.locationOffset.column-1,r="".padStart(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,a=t.line+o,s=1===t.line?n:0,c=t.column+s,u=`${e.name}:${a}:${c}\n`,l=r.split(/\r\n|[\n\r]/g),f=l[i];if(f.length>120){const e=Math.floor(c/80),t=c%80,n=[];for(let e=0;e<f.length;e+=80)n.push(f.slice(e,e+80));return u+gb([[`${a} |`,n[0]],...n.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(t)],["|",n[e+1]]])}return u+gb([[a-1+" |",l[i-1]],[`${a} |`,f],["|","^".padStart(c)],[`${a+1} |`,l[i+1]]])}function gb(e){const t=e.filter((([e,t])=>void 0!==t)),n=Math.max(...t.map((([e])=>e.length)));return t.map((([e,t])=>e.padStart(n)+(t?" "+t:""))).join("\n")}class yb extends Error{constructor(e,t,n,r,i,o,a){var s,c,u;super(e),this.name="GraphQLError",this.path=null!=i?i:void 0,this.originalError=null!=o?o:void 0,this.nodes=bb(Array.isArray(t)?t:t?[t]:void 0);const l=bb(null===(s=this.nodes)||void 0===s?void 0:s.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!=n?n:null==l||null===(c=l[0])||void 0===c?void 0:c.source,this.positions=null!=r?r:null==l?void 0:l.map((e=>e.start)),this.locations=r&&n?r.map((e=>vb(n,e))):null==l?void 0:l.map((e=>vb(e.source,e.start)));const f="object"==typeof(d=null==o?void 0:o.extensions)&&null!==d?null==o?void 0:o.extensions:void 0;var d;this.extensions=null!==(u=null!=a?a:f)&&void 0!==u?u:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,yb):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(e+="\n\n"+mb((t=n.loc).source,vb(t.source,t.start)));else if(this.source&&this.locations)for(const t of this.locations)e+="\n\n"+mb(this.source,t);var t;return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function bb(e){return void 0===e||0===e.length?void 0:e}function wb(e,t,n){return new yb(`Syntax Error: ${n}`,void 0,e,[t])}let Sb,kb;var Eb;(Eb=Sb||(Sb={})).SOF="<SOF>",Eb.EOF="<EOF>",Eb.BANG="!",Eb.DOLLAR="$",Eb.AMP="&",Eb.PAREN_L="(",Eb.PAREN_R=")",Eb.SPREAD="...",Eb.COLON=":",Eb.EQUALS="=",Eb.AT="@",Eb.BRACKET_L="[",Eb.BRACKET_R="]",Eb.BRACE_L="{",Eb.PIPE="|",Eb.BRACE_R="}",Eb.NAME="Name",Eb.INT="Int",Eb.FLOAT="Float",Eb.STRING="String",Eb.BLOCK_STRING="BlockString",Eb.COMMENT="Comment",function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(kb||(kb={}));class _b{constructor(e){const t=new lv(Sb.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==Sb.EOF)do{if(e.next)e=e.next;else{const t=Ib(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===Sb.COMMENT);return e}}function Ob(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function Tb(e,t){return xb(e.charCodeAt(t))&&Rb(e.charCodeAt(t+1))}function xb(e){return e>=55296&&e<=56319}function Rb(e){return e>=56320&&e<=57343}function Ab(e,t){const n=e.source.body.codePointAt(t);if(void 0===n)return Sb.EOF;if(n>=32&&n<=126){const e=String.fromCodePoint(n);return'"'===e?"'\"'":`"${e}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function Cb(e,t,n,r,i){const o=e.line,a=1+n-e.lineStart;return new lv(t,n,r,o,a,i)}function Ib(e,t){const n=e.source.body,r=n.length;let i=t;for(;i<r;){const t=n.charCodeAt(i);switch(t){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===n.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return Nb(e,i);case 33:return Cb(e,Sb.BANG,i,i+1);case 36:return Cb(e,Sb.DOLLAR,i,i+1);case 38:return Cb(e,Sb.AMP,i,i+1);case 40:return Cb(e,Sb.PAREN_L,i,i+1);case 41:return Cb(e,Sb.PAREN_R,i,i+1);case 46:if(46===n.charCodeAt(i+1)&&46===n.charCodeAt(i+2))return Cb(e,Sb.SPREAD,i,i+3);break;case 58:return Cb(e,Sb.COLON,i,i+1);case 61:return Cb(e,Sb.EQUALS,i,i+1);case 64:return Cb(e,Sb.AT,i,i+1);case 91:return Cb(e,Sb.BRACKET_L,i,i+1);case 93:return Cb(e,Sb.BRACKET_R,i,i+1);case 123:return Cb(e,Sb.BRACE_L,i,i+1);case 124:return Cb(e,Sb.PIPE,i,i+1);case 125:return Cb(e,Sb.BRACE_R,i,i+1);case 34:return 34===n.charCodeAt(i+1)&&34===n.charCodeAt(i+2)?Bb(e,i):Lb(e,i)}if(_v(t)||45===t)return Mb(e,i,t);if(Tv(t))return qb(e,i);throw wb(e.source,i,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":Ob(t)||Tb(n,i)?`Unexpected character: ${Ab(e,i)}.`:`Invalid character: ${Ab(e,i)}.`)}return Cb(e,Sb.EOF,r,r)}function Nb(e,t){const n=e.source.body,r=n.length;let i=t+1;for(;i<r;){const e=n.charCodeAt(i);if(10===e||13===e)break;if(Ob(e))++i;else{if(!Tb(n,i))break;i+=2}}return Cb(e,Sb.COMMENT,t,i,n.slice(t+1,i))}function Mb(e,t,n){const r=e.source.body;let i=t,o=n,a=!1;if(45===o&&(o=r.charCodeAt(++i)),48===o){if(o=r.charCodeAt(++i),_v(o))throw wb(e.source,i,`Invalid number, unexpected digit after 0: ${Ab(e,i)}.`)}else i=Pb(e,i,o),o=r.charCodeAt(i);if(46===o&&(a=!0,o=r.charCodeAt(++i),i=Pb(e,i,o),o=r.charCodeAt(i)),69!==o&&101!==o||(a=!0,o=r.charCodeAt(++i),43!==o&&45!==o||(o=r.charCodeAt(++i)),i=Pb(e,i,o),o=r.charCodeAt(i)),46===o||Tv(o))throw wb(e.source,i,`Invalid number, expected digit but got: ${Ab(e,i)}.`);return Cb(e,a?Sb.FLOAT:Sb.INT,t,i,r.slice(t,i))}function Pb(e,t,n){if(!_v(n))throw wb(e.source,t,`Invalid number, expected digit but got: ${Ab(e,t)}.`);const r=e.source.body;let i=t+1;for(;_v(r.charCodeAt(i));)++i;return i}function Lb(e,t){const n=e.source.body,r=n.length;let i=t+1,o=i,a="";for(;i<r;){const r=n.charCodeAt(i);if(34===r)return a+=n.slice(o,i),Cb(e,Sb.STRING,t,i+1,a);if(92!==r){if(10===r||13===r)break;if(Ob(r))++i;else{if(!Tb(n,i))throw wb(e.source,i,`Invalid character within String: ${Ab(e,i)}.`);i+=2}}else{a+=n.slice(o,i);const t=117===n.charCodeAt(i+1)?123===n.charCodeAt(i+2)?Db(e,i):Vb(e,i):Ub(e,i);a+=t.value,i+=t.size,o=i}}throw wb(e.source,i,"Unterminated string.")}function Db(e,t){const n=e.source.body;let r=0,i=3;for(;i<12;){const e=n.charCodeAt(t+i++);if(125===e){if(i<5||!Ob(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|jb(e),r<0)break}throw wb(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+i)}".`)}function Vb(e,t){const n=e.source.body,r=Fb(n,t+2);if(Ob(r))return{value:String.fromCodePoint(r),size:6};if(xb(r)&&92===n.charCodeAt(t+6)&&117===n.charCodeAt(t+7)){const e=Fb(n,t+8);if(Rb(e))return{value:String.fromCodePoint(r,e),size:12}}throw wb(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function Fb(e,t){return jb(e.charCodeAt(t))<<12|jb(e.charCodeAt(t+1))<<8|jb(e.charCodeAt(t+2))<<4|jb(e.charCodeAt(t+3))}function jb(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Ub(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw wb(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function Bb(e,t){const n=e.source.body,r=n.length;let i=e.lineStart,o=t+3,a=o,s="";const c=[];for(;o<r;){const r=n.charCodeAt(o);if(34===r&&34===n.charCodeAt(o+1)&&34===n.charCodeAt(o+2)){s+=n.slice(a,o),c.push(s);const r=Cb(e,Sb.BLOCK_STRING,t,o+3,xv(c).join("\n"));return e.line+=c.length-1,e.lineStart=i,r}if(92!==r||34!==n.charCodeAt(o+1)||34!==n.charCodeAt(o+2)||34!==n.charCodeAt(o+3))if(10!==r&&13!==r)if(Ob(r))++o;else{if(!Tb(n,o))throw wb(e.source,o,`Invalid character within String: ${Ab(e,o)}.`);o+=2}else s+=n.slice(a,o),c.push(s),13===r&&10===n.charCodeAt(o+1)?o+=2:++o,s="",a=o,i=o;else s+=n.slice(a,o),a=o+1,o+=4}throw wb(e.source,o,"Unterminated string.")}function qb(e,t){const n=e.source.body,r=n.length;let i=t+1;for(;i<r&&(Ov(o=n.charCodeAt(i))||_v(o)||95===o);)++i;var o;return Cb(e,Sb.NAME,t,i,n.slice(t,i))}class zb{constructor(e,t){const n=function(e){return e instanceof fh}(e)?e:new fh(e);this._lexer=new _b(n),this._options=t}parseName(){const e=this.expectToken(Sb.NAME);return this.node(e,{kind:vv.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:vv.DOCUMENT,definitions:this.many(Sb.SOF,this.parseDefinition,Sb.EOF)})}parseDefinition(){if(this.peek(Sb.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===Sb.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw wb(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(Sb.BRACE_L))return this.node(e,{kind:vv.OPERATION_DEFINITION,operation:hv.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(Sb.NAME)&&(n=this.parseName()),this.node(e,{kind:vv.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(Sb.NAME);switch(e.value){case"query":return hv.QUERY;case"mutation":return hv.MUTATION;case"subscription":return hv.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(Sb.PAREN_L,this.parseVariableDefinition,Sb.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:vv.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Sb.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Sb.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(Sb.DOLLAR),this.node(e,{kind:vv.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:vv.SELECTION_SET,selections:this.many(Sb.BRACE_L,this.parseSelection,Sb.BRACE_R)})}parseSelection(){return this.peek(Sb.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,r;return this.expectOptionalToken(Sb.COLON)?(n=t,r=this.parseName()):r=t,this.node(e,{kind:vv.FIELD,alias:n,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Sb.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(Sb.PAREN_L,t,Sb.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(Sb.COLON),this.node(t,{kind:vv.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(Sb.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(Sb.NAME)?this.node(e,{kind:vv.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:vv.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){var e;const t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacyFragmentVariables)?this.node(t,{kind:vv.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:vv.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case Sb.BRACKET_L:return this.parseList(e);case Sb.BRACE_L:return this.parseObject(e);case Sb.INT:return this._lexer.advance(),this.node(t,{kind:vv.INT,value:t.value});case Sb.FLOAT:return this._lexer.advance(),this.node(t,{kind:vv.FLOAT,value:t.value});case Sb.STRING:case Sb.BLOCK_STRING:return this.parseStringLiteral();case Sb.NAME:switch(this._lexer.advance(),t.value){case"true":return this.node(t,{kind:vv.BOOLEAN,value:!0});case"false":return this.node(t,{kind:vv.BOOLEAN,value:!1});case"null":return this.node(t,{kind:vv.NULL});default:return this.node(t,{kind:vv.ENUM,value:t.value})}case Sb.DOLLAR:if(e){if(this.expectToken(Sb.DOLLAR),this._lexer.token.kind===Sb.NAME){const e=this._lexer.token.value;throw wb(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this._lexer.advance(),this.node(e,{kind:vv.STRING,value:e.value,block:e.kind===Sb.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:vv.LIST,values:this.any(Sb.BRACKET_L,(()=>this.parseValueLiteral(e)),Sb.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:vv.OBJECT,fields:this.any(Sb.BRACE_L,(()=>this.parseObjectField(e)),Sb.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(Sb.COLON),this.node(t,{kind:vv.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(Sb.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(Sb.AT),this.node(t,{kind:vv.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(Sb.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(Sb.BRACKET_R),t=this.node(e,{kind:vv.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(Sb.BANG)?this.node(e,{kind:vv.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:vv.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(Sb.STRING)||this.peek(Sb.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.many(Sb.BRACE_L,this.parseOperationTypeDefinition,Sb.BRACE_R);return this.node(e,{kind:vv.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(Sb.COLON);const n=this.parseNamedType();return this.node(e,{kind:vv.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();return this.node(e,{kind:vv.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:vv.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(Sb.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(Sb.BRACE_L,this.parseFieldDefinition,Sb.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(Sb.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:vv.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(Sb.PAREN_L,this.parseInputValueDef,Sb.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(Sb.COLON);const r=this.parseTypeReference();let i;this.expectOptionalToken(Sb.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:vv.INPUT_VALUE_DEFINITION,description:t,name:n,type:r,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:vv.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:vv.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(Sb.EQUALS)?this.delimitedMany(Sb.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:vv.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i})}parseEnumValuesDefinition(){return this.optionalMany(Sb.BRACE_L,this.parseEnumValueDefinition,Sb.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),r=this.parseConstDirectives();return this.node(e,{kind:vv.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw wb(this._lexer.source,this._lexer.token.start,`${Gb(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:vv.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(Sb.BRACE_L,this.parseInputValueDef,Sb.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===Sb.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(Sb.BRACE_L,this.parseOperationTypeDefinition,Sb.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:vv.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(0===n.length)throw this.unexpected();return this.node(e,{kind:vv.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:vv.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:vv.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:vv.UNION_TYPE_EXTENSION,name:t,directives:n,types:r})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:vv.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:vv.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Sb.AT);const n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:vv.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(Sb.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(kb,t.value))return t;throw this.unexpected(e)}node(e,t){var n;return!0!==(null===(n=this._options)||void 0===n?void 0:n.noLocation)&&(t.loc=new uv(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw wb(this._lexer.source,t.start,`Expected ${Hb(e)}, found ${Gb(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this._lexer.advance(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==Sb.NAME||t.value!==e)throw wb(this._lexer.source,t.start,`Expected "${e}", found ${Gb(t)}.`);this._lexer.advance()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===Sb.NAME&&t.value===e&&(this._lexer.advance(),!0)}unexpected(e){const t=null!=e?e:this._lexer.token;return wb(this._lexer.source,t.start,`Unexpected ${Gb(t)}.`)}any(e,t,n){this.expectToken(e);const r=[];for(;!this.expectOptionalToken(n);)r.push(t.call(this));return r}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const e=[];do{e.push(t.call(this))}while(!this.expectOptionalToken(n));return e}return[]}many(e,t,n){this.expectToken(e);const r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n}}function Gb(e){const t=e.value;return Hb(e.kind)+(null!=t?` "${t}"`:"")}function Hb(e){return function(e){return e===Sb.BANG||e===Sb.DOLLAR||e===Sb.AMP||e===Sb.PAREN_L||e===Sb.PAREN_R||e===Sb.SPREAD||e===Sb.COLON||e===Sb.EQUALS||e===Sb.AT||e===Sb.BRACKET_L||e===Sb.BRACKET_R||e===Sb.BRACE_L||e===Sb.PIPE||e===Sb.BRACE_R}(e)?`"${e}"`:e}var Qb=new Map,Wb=new Map,Kb=!0,$b=!1;function Jb(e){return e.replace(/[\s,]+/g," ").trim()}function Yb(e){var t,n,r,i=Jb(e);if(!Qb.has(i)){var o=function(e,t){return new zb(e,t).parseDocument()}(e,{experimentalFragmentVariables:$b,allowLegacyFragmentVariables:$b});if(!o||"Document"!==o.kind)throw new Error("Not a valid GraphQL document.");Qb.set(i,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var r=e[n];r&&"object"==typeof r&&t.add(r)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}((t=o,n=new Set,r=[],t.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var t=e.name.value,i=Jb((a=e.loc).source.body.substring(a.start,a.end)),o=Wb.get(t);o&&!o.has(i)?Kb&&console.warn("Warning: fragment with name "+t+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||Wb.set(t,o=new Set),o.add(i),n.has(i)||(n.add(i),r.push(e))}else r.push(e);var a})),Ma(Ma({},t),{definitions:r}))))}return Qb.get(i)}function Xb(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var r=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?r+=t.loc.source.body:r+=t,r+=e[n+1]})),Yb(r)}var Zb,ew=Xb;(Zb=Xb||(Xb={})).gql=ew,Zb.resetCaches=function(){Qb.clear(),Wb.clear()},Zb.disableFragmentWarnings=function(){Kb=!1},Zb.enableExperimentalFragmentVariables=function(){$b=!0},Zb.disableExperimentalFragmentVariables=function(){$b=!1},Xb.default=Xb;const tw=ra({key:"getCharacters",get:async({get:e})=>{const t=e(Zy),{data:{personages:n}}=await t.query({query:Xb`
                query getPersonnages {
                    personages {
                        id
                        nom
                        image {
                            url
                        }
                    }
                }
            `});return function(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const n=Math.random()*r--|0,i=e[r+t];e[r+t]=e[n+t],e[n+t]=i}return e}([...n.map((e=>({id:e.id,name:e.nom,image:e.image.url})))])}}),nw=()=>{const e=aa(ib),t=aa(ab),n=aa(sb),i=sa(tw);(0,r.useEffect)((()=>{i(),t([]),n([])}));const{t:o}=Ca();return r.createElement("div",{className:"finished"},r.createElement("button",{className:"finished--start-again",onClick:()=>e("not-started")},o("finished.start-again")))};n(33),n(269),n(845),n(654);const rw=()=>r.createElement("div",{className:"loadassets"},["assets/case-background.webp","assets/case-front.webp","assets/plateau-background.webp","assets/plateau-front.webp"].map(((e,t)=>r.createElement("img",{key:t,src:e})))),iw=()=>{const e=ia(eb),t=ia(tw),n=ia(sb),i=ia(fb),[o,a]=oa(ab),s=aa(rb),[c,u]=(0,r.useState)(!1),{t:l}=Ca(),f=()=>t.filter((e=>!n.includes(e))).slice(0,24);return(0,r.useEffect)((()=>{n.length>0&&(0===o.length&&a(f()),o.length>0&&s("choose-character"))}),[o,n]),(0,r.useEffect)((()=>{c&&setTimeout((()=>{u(!1)}),2e3)}),[c]),i.length<2?r.createElement("div",{className:"lobby"},l("lobby.waiting"),r.createElement("button",{className:"lobby--link",onClick:()=>(u(!0),void window.navigator.clipboard.writeText(`${window.origin}/#channel=${e}`))},l(c?"lobby.link-clicked":"lobby.link"))):r.createElement("div",{className:"lobby"},r.createElement("button",{className:"lobby--start",onClick:()=>{a(f())}},l("lobby.start")),i.length>2&&r.createElement("div",{className:"lobby--toomanyplayers"},l("lobby.toomanyplayers")))},ow=()=>{const e=ia(tb),t=ia(ab),n=ia(cb),[i,o]=oa(ub),a=aa(ib),[s,c]=(0,r.useState)([]),[u,l]=(0,r.useState)(!1),f=["scene--plateau"];u&&f.push("scene--guessing");const d={hidden:{y:"-100%"},visible:{y:0}},{t:p}=Ca();return r.createElement("div",{className:"scene"},r.createElement("div",{className:f.join(" ")},r.createElement(qp,{characters:t,charactersHidden:s,onClick:u?(t,n)=>{n||(e.publish("guess",t),l(!1))}:e=>{if(s.includes(e))return c(s.filter((t=>t!==e)));c([...s,e])}}),r.createElement(fs,null,r.createElement(jp.button,{className:"scene--guessing__button",onClick:()=>l(!u)},u?r.createElement("svg",{height:"48",width:"48",viewBox:"0 0 24 24"},r.createElement("path",{d:"M13.427 3.021h-7.427v-3.021l-6 5.39 6 5.61v-3h7.427c3.071 0 5.561 2.356 5.561 5.427 0 3.071-2.489 5.573-5.561 5.573h-7.427v5h7.427c5.84 0 10.573-4.734 10.573-10.573s-4.733-10.406-10.573-10.406z"})):"?"))),n&&r.createElement("div",{className:"scene--opponent"},r.createElement(Up,{character:n})),r.createElement(fs,null,i&&r.createElement("div",{className:"scene--characterguessed"},r.createElement(jp.div,{className:"scene--characterguessed__content",transition:{duration:.3},initial:"hidden",animate:"visible",variants:d,exit:d.hidden},r.createElement("div",null,p("plateau.guess")," ",r.createElement("span",{className:"scene--characterguessed__name"},i.name)," ?"),i.id===n?.id&&r.createElement("button",{onClick:()=>(o(void 0),void a("finished"))},p("plateau.yes")),i.id!==n?.id&&r.createElement("button",{onClick:()=>o(void 0)},p("plateau.no"))))))};function aw(e){return aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aw(e)}function sw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cw(e,t){return cw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cw(e,t)}function uw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cw(e,t)}function lw(e,t){if(t&&("object"===aw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sw(e)}function fw(e){return fw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fw(e)}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dw(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hw={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},vw=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fa(this,e),this.init(t,n)}return pa(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||hw,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,pw(pw({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),e}()),mw=function(){function e(){fa(this,e),this.observers={}}return pa(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var i=[].concat(this.observers[e]);i.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function gw(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function yw(e){return null==e?"":""+e}function bw(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function ww(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function Sw(e,t,n){var r=ww(e,t,Object);r.obj[r.k]=n}function kw(e,t){var n=ww(e,t),r=n.obj,i=n.k;if(r)return r[i]}function Ew(e,t,n){var r=kw(e,n);return void 0!==r?r:kw(t,n)}function _w(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):_w(e[r],t[r],n):e[r]=t[r]);return e}function Ow(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Tw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function xw(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Tw[e]})):e}var Rw="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Aw=[" ",",","?","!",";"];function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,o=0;o<r.length;++o){if(!i)return;if("string"==typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var a=2,s=r.slice(o,o+a).join(n),c=i[s];void 0===c&&r.length>o+a;)a++,c=i[s=r.slice(o,o+a).join(n)];if(void 0===c)return;if("string"==typeof c)return c;if(s&&"string"==typeof c[s])return c[s];var u=r.slice(o+a).join(n);return u?Nw(c,u,n):void 0}i=i[r[o]]}return i}}var Mw=function(e){uw(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=fw(t);if(n){var i=fw(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lw(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return fa(this,i),t=r.call(this),Rw&&mw.call(sw(t)),t.data=e||{},t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return pa(i,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=kw(this.data,a);return s||!o||"string"!=typeof n?s:Nw(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),Sw(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=kw(this.data,a)||{};r?_w(s,n,i):s=Iw(Iw({},s),n),Sw(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Iw(Iw({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),i}(mw),Pw={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}};function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vw={},Fw=function(e){uw(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=fw(t);if(n){var i=fw(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lw(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fa(this,i),t=r.call(this),Rw&&mw.call(sw(t)),bw(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,sw(t)),t.options=n,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=vw.create("translator"),t}return pa(i,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=Aw.filter((function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}(e,n,r));if(o&&!a){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:i};var c=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,t,n){var r=this;if("object"!==aw(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],t),s=a.key,c=a.namespaces,u=c[c.length-1],l=t.lng||this.language,f=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(f){var d=t.nsSeparator||this.options.nsSeparator;return u+d+s}return s}var p=this.resolve(e,t),h=p&&p.res,v=p&&p.usedKey||s,m=p&&p.exactUsedKey||s,g=Object.prototype.toString.apply(h),y=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,S="string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h;if(w&&h&&S&&y.indexOf(g)<0&&("string"!=typeof b||"[object Array]"!==g)){if(!t.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,h,Dw(Dw({},t),{},{ns:c})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(o){var k="[object Array]"===g,E=k?[]:{},_=k?m:v;for(var O in h)if(Object.prototype.hasOwnProperty.call(h,O)){var T="".concat(_).concat(o).concat(O);E[O]=this.translate(T,Dw(Dw({},t),{joinArrays:!1,ns:c})),E[O]===T&&(E[O]=h[O])}h=E}}else if(w&&"string"==typeof b&&"[object Array]"===g)(h=h.join(b))&&(h=this.extendTranslation(h,e,t,n));else{var x=!1,R=!1,A=void 0!==t.count&&"string"!=typeof t.count,C=i.hasDefaultValue(t),I=A?this.pluralResolver.getSuffix(l,t.count,t):"",N=t["defaultValue".concat(I)]||t.defaultValue;!this.isValidLookup(h)&&C&&(x=!0,h=N),this.isValidLookup(h)||(R=!0,h=s);var M=t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,P=M&&R?void 0:h,L=C&&N!==h&&this.options.updateMissing;if(R||x||L){if(this.logger.log(L?"updateKey":"missingKey",l,u,s,L?N:h),o){var D=this.resolve(s,Dw(Dw({},t),{},{keySeparator:!1}));D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var V=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var j=0;j<F.length;j++)V.push(F[j]);else"all"===this.options.saveMissingTo?V=this.languageUtils.toResolveHierarchy(t.lng||this.language):V.push(t.lng||this.language);var U=function(e,n,i){var o=C&&i!==h?i:P;r.options.missingKeyHandler?r.options.missingKeyHandler(e,u,n,o,L,t):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,u,n,o,L,t),r.emit("missingKey",e,u,n,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?V.forEach((function(e){r.pluralResolver.getSuffixes(e).forEach((function(n){U([e],s+n,t["defaultValue".concat(n)]||N)}))})):U(V,s,N))}h=this.extendTranslation(h,e,t,p,n),R&&h===s&&this.options.appendNamespaceToMissingKey&&(h="".concat(u,":").concat(s)),(R||x)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Dw(Dw({},n),{interpolation:Dw(Dw({},this.options.interpolation),n.interpolation)}));var a,s="string"==typeof e&&(n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables);if(s){var c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=Dw(Dw({},this.options.interpolation.defaultVariables),u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var l=e.match(this.interpolator.nestingRegexp);a<(l&&l.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=Pw.handle(d,e,t,this.options&&this.options.postProcessPassResolved?Dw({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var c=a.extractFromKey(e,s),u=c.key;n=u;var l=c.namespaces;a.options.fallbackNS&&(l=l.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=f&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);l.forEach((function(e){a.isValidLookup(t)||(o=e,!Vw["".concat(h[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(Vw["".concat(h[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(t)){i=n;var o,c=[u];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(c,u,n,e,s);else{var l;f&&(l=a.pluralResolver.getSuffix(n,s.count,s));var h="_zero";if(f&&(c.push(u+l),d&&c.push(u+h)),p){var v="".concat(u).concat(a.options.contextSeparator).concat(s.context);c.push(v),f&&(c.push(v+l),d&&c.push(v+h))}}for(;o=c.pop();)a.isValidLookup(t)||(r=o,t=a.getResource(n,e,o,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),i}(mw);function jw(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Uw=function(){function e(t){fa(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=vw.create("languageUtils")}return pa(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=jw(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=jw(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=jw(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),Bw=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],qw={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},zw=["v1","v2","v3"],Gw={zero:0,one:1,two:2,few:3,many:4,other:5};function Hw(){var e={};return Bw.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:qw[t.fc]}}))})),e}var Qw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fa(this,e),this.languageUtils=t,this.options=n,this.logger=vw.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Hw()}return pa(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return Gw[e]-Gw[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!zw.includes(this.options.compatibilityJSON)}}]),e}();function Ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ww(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fa(this,e),this.logger=vw.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return pa(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:xw,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Ow(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Ow(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Ow(t.nestingPrefix):t.nestingPrefixEscaped||Ow("$t("),this.nestingSuffix=t.nestingSuffix?Ow(t.nestingSuffix):t.nestingSuffixEscaped||Ow(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(s.formatSeparator)<0){var i=Ew(t,c,e);return s.alwaysFormat?s.format(i,void 0,n,Kw(Kw(Kw({},r),t),{},{interpolationkey:e})):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),u=o.join(s.formatSeparator).trim();return s.format(Ew(t,c,a),u,n,Kw(Kw(Kw({},r),t),{},{interpolationkey:a}))};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}].forEach((function(t){for(a=0;i=t.regex.exec(e);){if(void 0===(o=l(i[1].trim())))if("function"==typeof f){var n=f(e,i,r);o="string"==typeof n?n:""}else{if(d){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=yw(o));var c=t.safeValue(o);if(e=e.replace(i[0],c),d?(t.regex.lastIndex+=c.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Kw({},o);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=Kw(Kw({},t),a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var c=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var l=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=l.shift(),c=l,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=yw(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=c.reduce((function(e,t){return i.format(e,t,o.lng,Kw(Kw({},o),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fa(this,e),this.logger=vw.create("formatter"),this.options=t,this.formats={number:function(e,t,n){return new Intl.NumberFormat(t,n).format(e)},currency:function(e,t,n){return new Intl.NumberFormat(t,Yw(Yw({},n),{},{style:"currency"})).format(e)},datetime:function(e,t,n){return new Intl.DateTimeFormat(t,Yw({},n)).format(e)},relativetime:function(e,t,n){return new Intl.RelativeTimeFormat(t,Yw({},n)).format(e,n.range||"day")},list:function(e,t,n){return new Intl.ListFormat(t,Yw({},n)).format(e)}},this.init(t)}return pa(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=t.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e]=t}},{key:"format",value:function(e,t,n,r){var i=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(e){if(e){var t=ua(e.split(":"),2),r=t[0],i=t[1];"false"===i.trim()&&(n[r.trim()]=!1),"true"===i.trim()&&(n[r.trim()]=!0),isNaN(i.trim())||(n[r.trim()]=parseInt(i.trim(),10)),n[r.trim()]||(n[r.trim()]=i.trim())}}))}return{formatName:t,formatOptions:n}}(t),a=o.formatName,s=o.formatOptions;if(i.formats[a]){var c=e;try{var u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},l=u.locale||u.lng||r.locale||r.lng||n;c=i.formats[a](e,l,Yw(Yw(Yw({},s),r),u))}catch(e){i.logger.warn(e)}return c}return i.logger.warn("there was no format function for ".concat(a)),e}),e)}}]),e}();function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tS=function(e){uw(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=fw(t);if(n){var i=fw(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lw(this,e)});function i(e,t,n){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return fa(this,i),o=r.call(this),Rw&&mw.call(sw(o)),o.backend=e,o.store=t,o.services=n,o.languageUtils=n.languageUtils,o.options=a,o.logger=vw.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(n,a.backend,a),o}return pa(i,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],a=[],s=[],c=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),c.indexOf(t)<0&&c.push(t)))})),r||s.push(e)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){!function(e,t,n,r){var i=ww(e,t,Object),o=i.obj,a=i.k;o[a]=o[a]||[],o[a].push(n)}(n.loaded,[i],o),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,c){s&&c&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,a)}),o):a(s,c)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,eS(eS({},o),{},{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),i}(mw);function nS(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===aw(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===aw(e[2])||"object"===aw(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function rS(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function iS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iS(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aS(){}function sS(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var cS=function(e){uw(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=fw(t);if(n){var i=fw(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lw(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(fa(this,i),e=r.call(this),Rw&&mw.call(sw(e)),e.options=rS(t),e.services={},e.logger=vw,e.modules={external:[]},sS(sw(e)),n&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,n),lw(e,sw(e));setTimeout((function(){e.init(t,n)}),0)}return e}return pa(i,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r=nS();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options=oS(oS(oS({},r),this.options),rS(t)),this.options.interpolation=oS({},this.options.interpolation),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?vw.init(i(this.modules.logger),this.options):vw.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!=typeof Intl&&(o=Xw);var a=new Uw(this.options);this.store=new Mw(this.options.resources,this.options);var s=this.services;s.logger=vw,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new Qw(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(o),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new $w(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new tS(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Fw(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=aS),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var f=gw(),d=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),f.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),f}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aS,r=n,i="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){o.indexOf(e)<0&&o.push(e)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=gw();return e||(e=this.languages),t||(t=this.options.ns),n||(n=aS),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Pw.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=gw();this.emit("languageChanging",e);var i=function(e){if(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<n.languages.length;t++){var r=n.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&n.store.hasLanguageSomeTranslations(r)){n.resolvedLanguage=r;break}}},o=function(o){e||o||!n.services.languageDetector||(o=[]);var a="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);a&&(n.language||i(a),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,i=function e(t,i){var o;if("object"!==aw(i)){for(var a=arguments.length,s=new Array(a>2?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];o=r.options.overloadTranslationOptionHandler([t,i].concat(s))}else o=oS({},i);o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns;var u=r.options.keySeparator||".",l=n?"".concat(n).concat(u).concat(t):t;return r.t(l,o)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||!(!a(r,e)||i&&!a(o,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=gw();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=gw();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aS,r=oS(oS(oS({},this.options),t),{isClone:!0}),o=new i(r),a=["store","services","language"];return a.forEach((function(t){o[t]=e[t]})),o.services=oS({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new Fw(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})),o.init(r,n),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),i}(mw);la(cS,"createInstance",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new cS(e,t)}));var uS=cS.createInstance();uS.createInstance=cS.createInstance,uS.createInstance,uS.init,uS.loadResources,uS.reloadResources,uS.use,uS.changeLanguage,uS.getFixedT,uS.t,uS.exists,uS.setDefaultNamespace,uS.hasLoadedNamespace,uS.loadNamespaces,uS.loadLanguages;const lS=uS;var fS=[],dS=fS.forEach,pS=fS.slice;function hS(e){return dS.call(pS.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}var vS=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,mS=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=e+"="+encodeURIComponent(t);if(r.maxAge>0){var o=r.maxAge-0;if(isNaN(o))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(o)}if(r.domain){if(!vS.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain="+r.domain}if(r.path){if(!vS.test(r.path))throw new TypeError("option path is invalid");i+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},gS={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=mS(e,encodeURIComponent(t),i)}(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},yS={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");i>0&&n[r].substring(0,i)===e.lookupQuerystring&&(t=n[r].substring(i+1))}return t}},bS=null,wS=function(){if(null!==bS)return bS;try{bS="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){bS=!1}return bS},SS={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&wS()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&wS()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},kS=null,ES=function(){if(null!==kS)return kS;try{kS="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){kS=!1}return kS},_S={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&ES()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&ES()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},OS={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},TS={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},xS={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},RS={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}},AS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fa(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return pa(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=hS(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(gS),this.addDetector(yS),this.addDetector(SS),this.addDetector(_S),this.addDetector(OS),this.addDetector(TS),this.addDetector(xS),this.addDetector(RS)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}]),e}();AS.type="languageDetector";const CS=AS,IS=JSON.parse('{"translation":{"choosecharacter":{"title":"Choisis la carte pour ton adversaire"},"finished":{"start-again":"Nouvelle game ?"},"lobby":{"link":"Copier le lien de la room","link-clicked":"Copié","start":"Commencer une partie","toomanyplayers":"Il y a plus de 2 joueurs dans la room","waiting":"En attente de l\'adversaire"},"plateau":{"guess":"Est-ce que c\'est","no":"Non","yes":"Oui"}}}');window.localStorage.getItem($y),lS.use(CS).use(ka).init({lng:"fr",detection:{caches:[]},interpolation:{escapeValue:!1},resources:{fr:IS}});const NS=()=>{switch(ia(ib)){case"not-started":return r.createElement(iw,null);case"choose-character":return r.createElement(lb,null);case"running":return r.createElement(ow,null);case"finished":return r.createElement(nw,null)}};n(511),i.render(r.createElement(ta,null,r.createElement((()=>r.createElement(r.Suspense,{fallback:r.createElement(r.Fragment,null)},r.createElement(db,null),r.createElement(NS,null),r.createElement(rw,null))),null)),document.querySelector("#app"))},33:(e,t,n)=>{"use strict";e.exports=n.p+"assets/case-background.webp"},269:(e,t,n)=>{"use strict";e.exports=n.p+"assets/case-front.webp"},511:(e,t,n)=>{"use strict";e.exports=n.p+"favicon.png"},845:(e,t,n)=>{"use strict";e.exports=n.p+"assets/plateau-background.webp"},654:(e,t,n)=>{"use strict";e.exports=n.p+"assets/plateau-front.webp"},149:(e,t,n)=>{"use strict";e.exports=n.p+"index.html"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(575)})();